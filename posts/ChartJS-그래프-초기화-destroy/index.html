<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.8.1"/><meta data-react-helmet="true" name="description" content="초기에 그래프를 로딩하고 그리는데에는 문제가 없었지만, 다른 나라를 클릭하고 데이터를 불러올때, 기존 그래프가 초기화 되질 않아서 다음과 같이 이슈가 발생했다."/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="chart.js 그래프 초기화 - destroy()"/><meta data-react-helmet="true" property="og:description" content="초기에 그래프를 로딩하고 그리는데에는 문제가 없었지만, 다른 나라를 클릭하고 데이터를 불러올때, 기존 그래프가 초기화 되질 않아서 다음과 같이 이슈가 발생했다."/><meta data-react-helmet="true" property="og:image" content="/static/311b1f23784be372d8681bb82fd1f662/ChartJS.png"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="chart.js 그래프 초기화 - destroy()"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="chart.js 그래프 초기화 - destroy()"/><meta data-react-helmet="true" name="twitter:description" content="초기에 그래프를 로딩하고 그리는데에는 문제가 없었지만, 다른 나라를 클릭하고 데이터를 불러올때, 기존 그래프가 초기화 되질 않아서 다음과 같이 이슈가 발생했다."/><meta data-react-helmet="true" name="twitter:image" content="/static/311b1f23784be372d8681bb82fd1f662/ChartJS.png"/><meta data-react-helmet="true" name="twitter:site" content="@사용자이름"/><meta data-react-helmet="true" name="twitter:creator" content="@사용자이름"/><meta data-react-helmet="true" name="google-site-verification" content="xE3auPHV6cacveeZD8Ln09qMfHXMDLn1HolWdbzhfk0"/><meta data-react-helmet="true" name="naver-site-verification" content="d4b0bb2e16cfc98a2826d2ffe989006d74cb2cbf"/><style data-href="/styles.4ed3cba14dc24a136b91.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.light{--color-background:#f6f6f6;--color-category-bg:#000;--color-category-font:#fff;--color-Introduction-shadow:1px 2px 18px rgba(0,0,0,.2);--color-postLink-shadow:0 0 8px rgba(0,0,0,.15)}.dark{--color-background:#25262c;--color-text:#f6f6f6;--color-category-bg:#e8e8e8;--color-category-font:#000;--color-Introduction-shadow:1px 2px 18px hsla(0,0%,100%,.1);--color-postLink-shadow:0 0 5px #000}body{background-color:var(--color-background);transition:.2s}a,footer,h1,h2,h3,h4,h5,hr,li,p,span,td,tr{color:var(--color-text)}.LeftPrev path,.RightNext path,.ScrollToTop path,.githubIcon path{fill:var(--color-text)}div .categoryItems{background:var(--color-category-bg);color:var(--color-category-font)}div .postItemWrapper{box-shadow:var(--color-postLink-shadow)}div .scroll{background-color:var(--color-background);box-shadow:var(--color-Introduction-shadow)}</style><link rel="canonical" href="https://dobyming.github.io/posts/ChartJS-그래프-초기화-destroy/" data-baseprotocol="https:" data-basehost="dobyming.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-react-helmet="true">chart.js 그래프 초기화 - destroy()</title><link rel="icon" href="/favicon-32x32.png?v=a04f0cffc2ba7434f893e2b100af3e70" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body class="light"><script>
              (function () {
                try {
                  var mode = localStorage.getItem('color-theme');
                  if (!mode) return;
                  document.body.classList.add(mode);
                } catch (e) {}
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z e1strnqo0"><style data-emotion="css-global 16vf086">@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'IBM Plex Sans KR',sans-serif;}html,body,#___gatsby{height:100%;}a,a:hover{-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:1194px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;548&#x27;%20width=&#x27;1194&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7ElEQVR42pWRTUvDQBCG+3t79qCgx/6IHP0VEYzYNC1YKDmI0lKyglvYm0IlHyRm55GNbTBISjqH3dll5tn3nR3REyJyTKjKb4qyQmx9vDos/2N0CibWUrSNNXkNtW1ofbwTQIHSHVavqBfD4gMwj+T7z66DcxSWbpt4vE9uePA9uBhTbLat+kFAB/tVKLiJ5UEI11dwOabwbqn2X926cxQ2uYO+adLVc/OA/FE3CNh+iAhZlkGPtcEztAeAMYb7IGA6DfH9O2bhjDiOiaI56/WmUztIYZqmJEqhteZpuUQpRZIoovkCvdv1Wv4BUMS5zHCmIWoAAAAASUVORK5CYII=" alt=""/><picture><source type="image/webp" data-srcset="/static/311b1f23784be372d8681bb82fd1f662/ce4ab/ChartJS.webp 299w,/static/311b1f23784be372d8681bb82fd1f662/a1521/ChartJS.webp 597w,/static/311b1f23784be372d8681bb82fd1f662/6609d/ChartJS.webp 1194w" sizes="(min-width: 1194px) 1194px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1194px) 1194px, 100vw" decoding="async" loading="lazy" data-src="/static/311b1f23784be372d8681bb82fd1f662/acfee/ChartJS.png" data-srcset="/static/311b1f23784be372d8681bb82fd1f662/d8c41/ChartJS.png 299w,/static/311b1f23784be372d8681bb82fd1f662/846b6/ChartJS.png 597w,/static/311b1f23784be372d8681bb82fd1f662/acfee/ChartJS.png 1194w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/311b1f23784be372d8681bb82fd1f662/ce4ab/ChartJS.webp 299w,/static/311b1f23784be372d8681bb82fd1f662/a1521/ChartJS.webp 597w,/static/311b1f23784be372d8681bb82fd1f662/6609d/ChartJS.webp 1194w" sizes="(min-width: 1194px) 1194px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1194px) 1194px, 100vw" decoding="async" loading="lazy" src="/static/311b1f23784be372d8681bb82fd1f662/acfee/ChartJS.png" srcSet="/static/311b1f23784be372d8681bb82fd1f662/d8c41/ChartJS.png 299w,/static/311b1f23784be372d8681bb82fd1f662/846b6/ChartJS.png 597w,/static/311b1f23784be372d8681bb82fd1f662/acfee/ChartJS.png 1194w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css m1156n">.css-m1156n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-m1156n{width:100%;padding:40px 20px;}}</style><div class="css-m1156n e1st1jau3"><style data-emotion="css gywgo7">.css-gywgo7{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;background:#ffffff;color:#000000;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);}@media (max-width: 768px){.css-gywgo7{width:30px;height:30px;font-size:18px;}}</style><a class="css-gywgo7 e1st1jau2" href="/"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg></a><style data-emotion="css gn4qtp">.css-gn4qtp{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:45px;font-weight:800;}@media (max-width: 768px){.css-gn4qtp{font-size:30px;}}</style><div class="css-gn4qtp e1st1jau1">chart.js 그래프 초기화 - destroy()</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau0"><div>ChartJS / TypeScript</div><div>2023.01.15.</div></div></div></div><div><style data-emotion="css 1tjlath">.css-1tjlath{width:100%;position:-webkit-sticky;position:sticky;margin-top:35px;font-size:0.9rem;top:100px;}.css-1tjlath .wrapper{position:absolute;left:72.5rem;}.css-1tjlath .wrapper .content{width:240px;margin:0 0 0 5rem;}.css-1tjlath .wrapper .content ol{list-style:none;list-style-position:inside;line-height:1.5rem;margin:0;padding:0;}.css-1tjlath .wrapper .content ol li{border-left:2px solid #9b8df0;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;opacity:0.5;}.css-1tjlath .wrapper .content ol li:hover{opacity:1;}.css-1tjlath .wrapper .content ol a{-webkit-text-decoration:none;text-decoration:none;}.css-1tjlath .wrapper .content ol .active{opacity:1;font-weight:700;}@media (max-width: 1388px){.css-1tjlath .wrapper{display:none;}}</style><div class="css-1tjlath e1051zj90"><div class="wrapper"><div class="content"><ol><li style="padding-left:22px" class="active"><a data-idx="0" href="#issue---canvas-is-already-in-use">Issue - “Canvas is already in use”</a></li><li style="padding-left:33px" class=""><a data-idx="1" href="#해결">해결</a></li><li style="padding-left:33px" class=""><a data-idx="2" href="#코드">코드</a></li><li style="padding-left:33px" class=""><a data-idx="3" href="#-타입-강하게-잡아내기--옵셔널-체이닝연산자--">+) 타입 강하게 잡아내기 : 옵셔널 체이닝(연산자 : ?)</a></li></ol></div></div></div><style data-emotion="css 1u5fyl4">.css-1u5fyl4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:80px 0;word-break:break-all;line-height:2;font-size:15px;font-weight:400;}.css-1u5fyl4 p{padding:3px 0;}.css-1u5fyl4 h1,.css-1u5fyl4 h2,.css-1u5fyl4 h3{font-weight:800;margin-bottom:20px;}.css-1u5fyl4 *+h1,.css-1u5fyl4 *+h2,.css-1u5fyl4 *+h3,.css-1u5fyl4 *+h4{margin-top:50px;}.css-1u5fyl4 hr+h1,.css-1u5fyl4 hr+h2,.css-1u5fyl4 hr+h3{margin-top:0;}.css-1u5fyl4 h1{font-size:30px;}.css-1u5fyl4 h2{font-size:25px;}.css-1u5fyl4 h3{font-size:20px;}.css-1u5fyl4 blockquote{margin:30px 0;padding:0 1em;color:#000000;border-left:0.25em solid #dfe2e5;}.css-1u5fyl4 ol,.css-1u5fyl4 ul{margin-left:20px;padding:30px 0;}.css-1u5fyl4 img{max-width:100%;box-shadow:0 0 5px rgba(0, 0, 0, 0.1);}.css-1u5fyl4 hr{border:0.5px solid #dfe2e5;margin:32px 0;}.css-1u5fyl4 a{color:#00a170;-webkit-text-decoration:none;text-decoration:none;}.css-1u5fyl4 a:hover{color:#f6546a;-webkit-text-decoration:underline;text-decoration:underline;}.css-1u5fyl4 pre[class*='language-']{padding:1em;margin:0.5em 0;overflow:auto;background:#1e1e1e;}.css-1u5fyl4 pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-1u5fyl4 code[class*='language-'],.css-1u5fyl4 pre[class*='language-']{tab-size:2;}.css-1u5fyl4 code[class='language-text']{padding:0.1em 0.3em;border-radius:0.3em;white-space:normal;text-shadow:none;background:#b3d4fc;color:#000000;}@media (max-width: 768px){.css-1u5fyl4{width:100%;padding:10px 20px;line-height:1.6;font-size:14px;}.css-1u5fyl4 h1{font-size:23px;}.css-1u5fyl4 h2{font-size:20px;}.css-1u5fyl4 h3{font-size:17px;}.css-1u5fyl4 img{width:100%;}.css-1u5fyl4 hr{margin:50px 0;}}</style><div class="css-1u5fyl4 e1ijh0y10"><h2 id="issue---canvas-is-already-in-use" style="position:relative;"><a href="#issue---canvas-is-already-in-use" aria-label="issue   canvas is already in use permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Issue - “Canvas is already in use”</h2>
<p>웹팩 번들링 문제를 해결하고 나니, 또 다른 이슈가 발생했었다. <del>산 넘어 산</del></p>
<p><img src="https://velog.velcdn.com/images/damin1025/post/3ad00259-a0dc-4322-a127-1233bc165b1b/image.PNG" alt=""></p>
<p>구글링 해보니, 꽤 유명한 에러 로그인것 같았다.</p>
<p>초기에 그래프를 로딩하고 그리는데에는 문제가 없었지만, 다른 나라를 클릭하고 데이터를 불러올때, 기존 그래프가 <strong>초기화</strong> 되질 않아서 다음과 같이 이슈가 발생했다. 6일동안 삽질한 결과 다음과 같이 해결할 수 있었다.</p>
<h3 id="해결" style="position:relative;"><a href="#%ED%95%B4%EA%B2%B0" aria-label="해결 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>해결</h3>
<p><a href="https://www.chartjs.org/docs/latest/developers/api.html" target="_blank" rel="nofollow">chart.js 공식문서</a> 에서는 기존 차트 instance를 날리고 싶으면 <code class="language-text">.destroy()</code> 메소드를 써보라고 합니다.</p>
<blockquote>
<p>This must be called before the canvas is reused for a new chart.</p>
</blockquote>
<p>네 console에 잡혔던 에러랑 똑같은 말을 해주고 있죠,, 이걸로 쇼부를 봅시다.</p>
<h3 id="코드" style="position:relative;"><a href="#%EC%BD%94%EB%93%9C" aria-label="코드 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>코드</h3>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> Chart from chart<span class="token punctuation">.</span>js<span class="token operator">/</span>auto

<span class="token keyword">function</span> <span class="token function">renderChart</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> labels<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> lineChart <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#lineChart'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLCanvasElement<span class="token punctuation">;</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> lineChart<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Chart<span class="token punctuation">.</span><span class="token function">getChart</span><span class="token punctuation">(</span>lineChart<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Chart<span class="token punctuation">.</span><span class="token function">getChart</span><span class="token punctuation">(</span>lineChart<span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Chart<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'#f5eaea'</span><span class="token punctuation">;</span>
  Chart<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>font<span class="token punctuation">.</span>family <span class="token operator">=</span> <span class="token string">'Exo 2'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">new</span> <span class="token class-name">Chart</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      labels<span class="token punctuation">,</span>
      datasets<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          label<span class="token operator">:</span> <span class="token string">'Confirmed for the last two weeks'</span><span class="token punctuation">,</span>
          backgroundColor<span class="token operator">:</span> <span class="token string">'#feb72b'</span><span class="token punctuation">,</span>
          borderColor<span class="token operator">:</span> <span class="token string">'#feb72b'</span><span class="token punctuation">,</span>
          data<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      maintainAspectRatio<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//차트 그래프 사이즈 고정</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>해당 코드에서 3번째 line의 if문을 주목하시면,</p>
<ol>
<li><code class="language-text">Chart.getChart(lineChart)</code>가 만약 값이 할당되어 있다면 (=그래프가 그려져 있음)</li>
<li>그 차트값을 불러오고, <code class="language-text">destroy()</code> (=그래프 초기화)</li>
</ol>
<p>를 의미합니다. 따라서 다음과 같이 코드를 수정 시, 그래프가 동적으로 변하지 않는 이슈가 해결됩니다.</p>
<h3 id="-타입-강하게-잡아내기--옵셔널-체이닝연산자--" style="position:relative;"><a href="#-%ED%83%80%EC%9E%85-%EA%B0%95%ED%95%98%EA%B2%8C-%EC%9E%A1%EC%95%84%EB%82%B4%EA%B8%B0--%EC%98%B5%EC%85%94%EB%84%90-%EC%B2%B4%EC%9D%B4%EB%8B%9D%EC%97%B0%EC%82%B0%EC%9E%90--" aria-label=" 타입 강하게 잡아내기  옵셔널 체이닝연산자   permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>+) 타입 강하게 잡아내기 : 옵셔널 체이닝(연산자 : ?)</h3>
<p>이때 <code class="language-text">Chart.getChart(lineChart)?.destroy();</code> 이게 뭔가 싶으실텐데요
해당 연산자는 <strong>Optional Chaining</strong> 이라고 다음 코드와 동일한 의미를 갖습니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>Chart<span class="token punctuation">.</span><span class="token function">getChart</span><span class="token punctuation">(</span>lineChart<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span> 
    <span class="token operator">||</span> Chart<span class="token punctuation">.</span><span class="token function">getChart</span><span class="token punctuation">(</span>lineChart<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span> 
  Chart<span class="token punctuation">.</span><span class="token function">getChart</span><span class="token punctuation">(</span>lineChart<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">Chart.getChart(lineChart)</code> 가 <code class="language-text">null</code> 또는 <code class="language-text">undefined</code>에 해당하지 않는다면(=그래프가 이미 그려져 있는 상태) <code class="language-text">destroy()</code> 하라는것과 동일한 의미를 지닙니다.</p></div></div><style data-emotion="css l9zn25">.css-l9zn25{height:56px;margin-bottom:30px;}.css-l9zn25 ul{text-align:center;}.css-l9zn25 li{display:inline-block;*display:block;*zoom:1;height:56px;line-height:56px;white-space:nowrap;margin:0 10px;}.css-l9zn25 svg{margin-top:-3px;width:21px;height:21px;vertical-align:middle;}.css-l9zn25 a{-webkit-text-decoration:none;text-decoration:none;}.css-l9zn25 a:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-l9zn25 span{cursor:not-allowed;color:#888;}</style><nav class="css-l9zn25 e1t5r2y70"><ul><li><a href="/posts/js-function/"><svg class="LeftPrev" width="30px" height="30px" viewBox="0 0 24 24"><path fill="current" fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z"></path></svg>다음글</a></li><li><span>이전글 <svg fill="gray" width="30px" height="30px" viewBox="0 0 24 24"><path fill="current" fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 4.29289C8.68342 3.90237 9.31658 3.90237 9.70711 4.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L9.70711 19.7071C9.31658 20.0976 8.68342 20.0976 8.29289 19.7071C7.90237 19.3166 7.90237 18.6834 8.29289 18.2929L14.5858 12L8.29289 5.70711C7.90237 5.31658 7.90237 4.68342 8.29289 4.29289Z"></path></svg></span></li></ul></nav><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">© <!-- -->2023<!-- --> Damin-Kim, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/ChartJS-그래프-초기화-destroy/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-8b3bd9656930ca843ca2.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-2073c6e4755e6d0bfb15.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-cce2fcb9226a7f0f384c.js\"],\"component---src-pages-info-tsx\":[\"/component---src-pages-info-tsx-1f7231da34a5e78aa38a.js\"],\"component---src-templates-post-template-tsx\":[\"/component---src-templates-post-template-tsx-ae460d7a32a12cf7bf8d.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="80d341b52b1544dc5b18";</script><script src="/webpack-runtime-e6fafa0862893604f2fe.js" async></script><script src="/framework-a4e155cd0476dc1ca208.js" async></script><script src="/app-8b3bd9656930ca843ca2.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>