<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.8.1"/><meta data-react-helmet="true" name="description" content="이번 포스팅에선 Gatsby 블로그에 검색 기능을 추가하는 방법에 대해서 적어보려고 합니다."/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Gatsby 블로그 - 검색기능 구현하기🔎"/><meta data-react-helmet="true" property="og:description" content="이번 포스팅에선 Gatsby 블로그에 검색 기능을 추가하는 방법에 대해서 적어보려고 합니다."/><meta data-react-helmet="true" property="og:image" content="/static/0e6a2859511bc04abeba878c5508a73f/gatsby.jpg"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="Gatsby 블로그 - 검색기능 구현하기🔎"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Gatsby 블로그 - 검색기능 구현하기🔎"/><meta data-react-helmet="true" name="twitter:description" content="이번 포스팅에선 Gatsby 블로그에 검색 기능을 추가하는 방법에 대해서 적어보려고 합니다."/><meta data-react-helmet="true" name="twitter:image" content="/static/0e6a2859511bc04abeba878c5508a73f/gatsby.jpg"/><meta data-react-helmet="true" name="twitter:site" content="@사용자이름"/><meta data-react-helmet="true" name="twitter:creator" content="@사용자이름"/><meta data-react-helmet="true" name="google-site-verification" content="xE3auPHV6cacveeZD8Ln09qMfHXMDLn1HolWdbzhfk0"/><meta data-react-helmet="true" name="naver-site-verification" content="d4b0bb2e16cfc98a2826d2ffe989006d74cb2cbf"/><style data-href="/styles.3f3c996c74733b32c9d5.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}:host,:root{--fa-font-solid:normal 900 1em/1 "Font Awesome 6 Solid";--fa-font-regular:normal 400 1em/1 "Font Awesome 6 Regular";--fa-font-light:normal 300 1em/1 "Font Awesome 6 Light";--fa-font-thin:normal 100 1em/1 "Font Awesome 6 Thin";--fa-font-duotone:normal 900 1em/1 "Font Awesome 6 Duotone";--fa-font-sharp-solid:normal 900 1em/1 "Font Awesome 6 Sharp";--fa-font-sharp-regular:normal 400 1em/1 "Font Awesome 6 Sharp";--fa-font-sharp-light:normal 300 1em/1 "Font Awesome 6 Sharp";--fa-font-brands:normal 400 1em/1 "Font Awesome 6 Brands"}svg:not(:host).svg-inline--fa,svg:not(:root).svg-inline--fa{box-sizing:content-box;overflow:visible}.svg-inline--fa{display:var(--fa-display,inline-block);height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-2xs{vertical-align:.1em}.svg-inline--fa.fa-xs{vertical-align:0}.svg-inline--fa.fa-sm{vertical-align:-.07143em}.svg-inline--fa.fa-lg{vertical-align:-.2em}.svg-inline--fa.fa-xl{vertical-align:-.25em}.svg-inline--fa.fa-2xl{vertical-align:-.3125em}.svg-inline--fa.fa-pull-left{margin-right:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-pull-right{margin-left:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-li{top:.25em;width:var(--fa-li-width,2em)}.svg-inline--fa.fa-fw{width:var(--fa-fw-width,1.25em)}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{transform-origin:center center}.fa-layers-text{left:50%;top:50%;transform:translate(-50%,-50%);transform-origin:center center}.fa-layers-counter{background-color:var(--fa-counter-background-color,#ff253a);border-radius:var(--fa-counter-border-radius,1em);box-sizing:border-box;color:var(--fa-inverse,#fff);line-height:var(--fa-counter-line-height,1);max-width:var(--fa-counter-max-width,5em);min-width:var(--fa-counter-min-width,1.5em);overflow:hidden;padding:var(--fa-counter-padding,.25em .5em);right:var(--fa-right,0);text-overflow:ellipsis;top:var(--fa-top,0);transform:scale(var(--fa-counter-scale,.25));transform-origin:top right}.fa-layers-bottom-right{bottom:var(--fa-bottom,0);right:var(--fa-right,0);top:auto;transform:scale(var(--fa-layers-scale,.25));transform-origin:bottom right}.fa-layers-bottom-left{bottom:var(--fa-bottom,0);left:var(--fa-left,0);right:auto;top:auto;transform:scale(var(--fa-layers-scale,.25));transform-origin:bottom left}.fa-layers-top-right{right:var(--fa-right,0);top:var(--fa-top,0);transform:scale(var(--fa-layers-scale,.25));transform-origin:top right}.fa-layers-top-left{left:var(--fa-left,0);right:auto;top:var(--fa-top,0);transform:scale(var(--fa-layers-scale,.25));transform-origin:top left}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-2xs{font-size:.625em;line-height:.1em;vertical-align:.225em}.fa-xs{font-size:.75em;line-height:.08333em;vertical-align:.125em}.fa-sm{font-size:.875em;line-height:.07143em;vertical-align:.05357em}.fa-lg{font-size:1.25em;line-height:.05em;vertical-align:-.075em}.fa-xl{font-size:1.5em;line-height:.04167em;vertical-align:-.125em}.fa-2xl{font-size:2em;line-height:.03125em;vertical-align:-.1875em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:var(--fa-li-margin,2.5em);padding-left:0}.fa-ul>li{position:relative}.fa-li{left:calc(var(--fa-li-width, 2em)*-1);line-height:inherit;position:absolute;text-align:center;width:var(--fa-li-width,2em)}.fa-border{border-color:var(--fa-border-color,#eee);border-radius:var(--fa-border-radius,.1em);border-style:var(--fa-border-style,solid);border-width:var(--fa-border-width,.08em);padding:var(--fa-border-padding,.2em .25em .15em)}.fa-pull-left{float:left;margin-right:var(--fa-pull-margin,.3em)}.fa-pull-right{float:right;margin-left:var(--fa-pull-margin,.3em)}.fa-beat{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-beat;animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-bounce{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-bounce;animation-timing-function:var(--fa-animation-timing,cubic-bezier(.28,.84,.42,1))}.fa-fade{animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-fade;animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-beat-fade,.fa-fade{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s)}.fa-beat-fade{animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-beat-fade;animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-flip{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-flip;animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-shake{animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-shake;animation-timing-function:var(--fa-animation-timing,linear)}.fa-shake,.fa-spin{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal)}.fa-spin{animation-duration:var(--fa-animation-duration,2s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-spin;animation-timing-function:var(--fa-animation-timing,linear)}.fa-spin-reverse{--fa-animation-direction:reverse}.fa-pulse,.fa-spin-pulse{animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-spin;animation-timing-function:var(--fa-animation-timing,steps(8))}@media (prefers-reduced-motion:reduce){.fa-beat,.fa-beat-fade,.fa-bounce,.fa-fade,.fa-flip,.fa-pulse,.fa-shake,.fa-spin,.fa-spin-pulse{animation-delay:-1ms;animation-duration:1ms;animation-iteration-count:1;transition-delay:0s;transition-duration:0s}}@keyframes fa-beat{0%,90%{transform:scale(1)}45%{transform:scale(var(--fa-beat-scale,1.25))}}@keyframes fa-bounce{0%{transform:scale(1) translateY(0)}10%{transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{transform:scale(1) translateY(0)}to{transform:scale(1) translateY(0)}}@keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);transform:scale(1)}50%{opacity:1;transform:scale(var(--fa-beat-fade-scale,1.125))}}@keyframes fa-flip{50%{transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@keyframes fa-shake{0%{transform:rotate(-15deg)}4%{transform:rotate(15deg)}24%,8%{transform:rotate(-18deg)}12%,28%{transform:rotate(18deg)}16%{transform:rotate(-22deg)}20%{transform:rotate(22deg)}32%{transform:rotate(-12deg)}36%{transform:rotate(12deg)}40%,to{transform:rotate(0deg)}}@keyframes fa-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.fa-rotate-90{transform:rotate(90deg)}.fa-rotate-180{transform:rotate(180deg)}.fa-rotate-270{transform:rotate(270deg)}.fa-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}.fa-rotate-by{transform:rotate(var(--fa-rotate-angle,none))}.fa-stack{display:inline-block;height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;z-index:var(--fa-stack-z-index,auto)}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:var(--fa-inverse,#fff)}.fa-sr-only,.fa-sr-only-focusable:not(:focus),.sr-only,.sr-only-focusable:not(:focus){clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fa-duotone.fa-inverse,.fad.fa-inverse{color:var(--fa-inverse,#fff)}.light{--color-background:#f6f6f6;--color-siteTitle-link:#000;--color-category-bg:#000;--color-category-font:#fff;--color-Introduction-shadow:1px 2px 18px rgba(0,0,0,.2);--color-postLink-shadow:0 0 8px rgba(0,0,0,.15)}.dark{--color-background:#232326;--color-text:#f6f6f6;--color-strong-text:#6abcff;--color-siteTitle-link:#f6f6f6;--color-category-bg:#e8e8e8;--color-category-font:#000;--color-Introduction-shadow:1px 2px 18px hsla(0,0%,100%,.1);--color-postLink-shadow:0 0 5px #000}body{background-color:var(--color-background);font-family:IBM Plex Sans KR,sans-serif,Fira Code,monospace;transition:.2s}a,footer,h1,h2,h3,h4,h5,hr,i,input,li,p,span,td,tr{color:var(--color-text)}strong{color:var(--color-strong-text)}a:before{background-color:var(--color-siteTitle-link)}.LeftPrev path,.RightNext path,.ScrollToTop path,.githubIcon path,.rssFeed path,.searchIcon path{fill:var(--color-text)}.closeIcon path{stroke:var(--color-text)}div .categoryItems{background:var(--color-category-bg);color:var(--color-category-font)}div .postItemWrapper{box-shadow:var(--color-postLink-shadow)}div .scroll{background-color:var(--color-background);box-shadow:var(--color-Introduction-shadow)}</style><link rel="canonical" href="https://dobyming.github.io/Develop/Gatsby-Search/" data-baseprotocol="https:" data-basehost="dobyming.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="Damin-Kim blog&#x27;s RSS Feed" href="/rss.xml"/><title data-react-helmet="true">Gatsby 블로그 - 검색기능 구현하기🔎</title><link rel="icon" href="/favicon-32x32.png?v=a04f0cffc2ba7434f893e2b100af3e70" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a04f0cffc2ba7434f893e2b100af3e70"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body class="light"><script>
              (function () {
                try {
                  var mode = localStorage.getItem('color-theme');
                  if (!mode) return;
                  document.body.classList.add(mode);
                } catch (e) {}
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z e1strnqo0"><style data-emotion="css-global 5j1oxz">*{padding:0;margin:0;box-sizing:border-box;font-family:sans-serif,'Fira Code',monospace;}html,body,#___gatsby{height:100%;}a,a:hover{-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css qqkit">.css-qqkit{position:relative;width:100%;height:250px;}@media (max-width: 768px){.css-qqkit{height:300px;}}</style><div class="css-qqkit e1opi4mu0"><style data-emotion="css 1e955nk">.css-1e955nk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;}@media (max-width: 768px){.css-1e955nk{width:100%;padding:40px 20px;}}</style><div class="css-1e955nk e1st1jau2"><style data-emotion="css 1s8jnju">.css-1s8jnju{position:fixed;width:100%;top:0;left:0;z-index:3;}.css-1s8jnju hr{width:768px;margin:auto;border-color:#fff;}.css-1s8jnju.scroll{height:90px;}.css-1s8jnju.scroll hr{display:none;}@media (max-width: 768px){.css-1s8jnju.scroll{width:100%;height:80px;}}@media (max-width: 768px){.css-1s8jnju hr{display:none;}}</style><div class=" css-1s8jnju e160b013"><style data-emotion="css 1fuqtlt">.css-1fuqtlt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;width:768px;height:100px;margin:0 auto;}.css-1fuqtlt .searchIcon{position:absolute;top:1.5rem;right:5rem;cursor:pointer;}.css-1fuqtlt .about{position:absolute;top:1.5rem;right:8.3rem;font-size:17px;cursor:pointer;}.css-1fuqtlt .about:hover{color:gray;}@media (max-width: 768px){.css-1fuqtlt{width:100%;height:80px;padding:0 20px;}}</style><div class="css-1fuqtlt e160b012"><a aria-label="Search" href="/Search/"><svg fill="black" class="searchIcon" width="25px" height="25px" viewBox="0 0 20 20"><path fill="current" stroke="current" fill-rule="evenodd" d="M4 9a5 5 0 1110 0A5 5 0 014 9zm5-7a7 7 0 104.2 12.6.999.999 0 00.093.107l3 3a1 1 0 001.414-1.414l-3-3a.999.999 0 00-.107-.093A7 7 0 009 2z"></path></svg></a><a aria-label="About" href="/about/"><p class="about">About</p></a><style data-emotion="css 6cna4h">.css-6cna4h{position:relative;font-size:35px;font-weight:700;}.css-6cna4h::before{content:'';position:absolute;display:block;width:100%;height:2px;bottom:0;left:0;-webkit-transform:scaleX(0);-moz-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);-webkit-transition:-webkit-transform 0.3s ease;transition:transform 0.3s ease;}.css-6cna4h:hover::before{-webkit-transform:scaleX(1);-moz-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);}@media (max-width: 768px){.css-6cna4h{padding-top:5px;font-size:28px;}.css-6cna4h::before{background-color:transparent;}}</style><a class="css-6cna4h e160b011" href="/">dobyming</a><style data-emotion="css c00bsb">.css-c00bsb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-top:5px;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.css-c00bsb .rssFeed{margin:5px;}</style><div class="css-c00bsb e160b010"><a href="https://github.com/dobyming" aria-label="GitHub" target="_blank"><svg class="githubIcon" width="27px" height="27px" viewBox="0 0 24 24"><title>github</title><rect width="24" height="24" fill="none"></rect><path fill="current" stroke="current" d="M12,2A10,10,0,0,0,8.84,21.5c.5.08.66-.23.66-.5V19.31C6.73,19.91,6.14,18,6.14,18A2.69,2.69,0,0,0,5,16.5c-.91-.62.07-.6.07-.6a2.1,2.1,0,0,1,1.53,1,2.15,2.15,0,0,0,2.91.83,2.16,2.16,0,0,1,.63-1.34C8,16.17,5.62,15.31,5.62,11.5a3.87,3.87,0,0,1,1-2.71,3.58,3.58,0,0,1,.1-2.64s.84-.27,2.75,1a9.63,9.63,0,0,1,5,0c1.91-1.29,2.75-1,2.75-1a3.58,3.58,0,0,1,.1,2.64,3.87,3.87,0,0,1,1,2.71c0,3.82-2.34,4.66-4.57,4.91a2.39,2.39,0,0,1,.69,1.85V21c0,.27.16.59.67.5A10,10,0,0,0,12,2Z"></path></svg></a><a class="rssFeed" aria-label="RSS" href="/rss.xml"><svg fill="black" width="21px" height="21px" viewBox="0 0 24 24"><path fill="current" stroke="current" fill-rule="evenodd" clip-rule="evenodd" d="M4 5C4 4.44772 4.44772 4 5 4C13.2843 4 20 10.7157 20 19C20 19.5523 19.5523 20 19 20C18.4477 20 18 19.5523 18 19C18 11.8203 12.1797 6 5 6C4.44772 6 4 5.55228 4 5ZM4 10C4 9.44772 4.44772 9 5 9C10.5228 9 15 13.4772 15 19C15 19.5523 14.5523 20 14 20C13.4477 20 13 19.5523 13 19C13 14.5817 9.41828 11 5 11C4.44772 11 4 10.5523 4 10ZM6.5 20C7.88071 20 9 18.8807 9 17.5C9 16.1193 7.88071 15 6.5 15C5.11929 15 4 16.1193 4 17.5C4 18.8807 5.11929 20 6.5 20Z"></path></svg></a></div></div><hr/></div><style data-emotion="css xcgts6">.css-xcgts6{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;}</style><h1 class="css-xcgts6 e1st1jau1">Gatsby 블로그 - 검색기능 구현하기🔎</h1><style data-emotion="css 18cjusz">.css-18cjusz{padding-top:20px;text-align:right;font-size:12px;font-style:italic;}</style><p class="css-18cjusz e1st1jau0">2023.06.08.</p></div></div><div><style data-emotion="css 1tjlath">.css-1tjlath{width:100%;position:-webkit-sticky;position:sticky;margin-top:35px;font-size:0.9rem;top:100px;}.css-1tjlath .wrapper{position:absolute;left:72.5rem;}.css-1tjlath .wrapper .content{width:240px;margin:0 0 0 5rem;}.css-1tjlath .wrapper .content ol{list-style:none;list-style-position:inside;line-height:1.5rem;margin:0;padding:0;}.css-1tjlath .wrapper .content ol li{border-left:2px solid #9b8df0;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;opacity:0.5;}.css-1tjlath .wrapper .content ol li:hover{opacity:1;}.css-1tjlath .wrapper .content ol a{-webkit-text-decoration:none;text-decoration:none;}.css-1tjlath .wrapper .content ol .active{opacity:1;font-weight:700;}@media (max-width: 1388px){.css-1tjlath .wrapper{display:none;}}</style><div class="css-1tjlath e1051zj90"><div class="wrapper"><div class="content"><ol><li style="padding-left:22px" class="active"><a data-idx="0" href="#동기">동기</a></li><li style="padding-left:22px" class=""><a data-idx="1" href="#결과-화면">결과 화면</a></li><li style="padding-left:22px" class=""><a data-idx="2" href="#어떤-기술을-선택할-것인가">어떤 기술을 선택할 것인가</a></li><li style="padding-left:22px" class=""><a data-idx="3" href="#검색-관련-라이브러리">검색 관련 라이브러리</a></li><li style="padding-left:22px" class=""><a data-idx="4" href="#fusejs-검색">fuse.js 검색</a></li><li style="padding-left:33px" class=""><a data-idx="5" href="#gatsby에서-fusejs-사용하기">Gatsby에서 fuse.js 사용하기</a></li><li style="padding-left:33px" class=""><a data-idx="6" href="#gatsby-plugin-fusejs">gatsby-plugin-fusejs</a></li><li style="padding-left:33px" class=""><a data-idx="7" href="#react-use-fusejs">react-use-fusejs</a></li><li style="padding-left:22px" class=""><a data-idx="8" href="#배포-후-성능-check">배포 후 성능 check</a></li></ol></div></div></div><style data-emotion="css 1ywr3xf">.css-1ywr3xf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:30px 0;word-break:break-word;line-height:1.8rem;font-size:15px;font-weight:400;}.css-1ywr3xf p,.css-1ywr3xf .gatsby-highlight{margin:0.2rem 0 1rem;}.css-1ywr3xf h1,.css-1ywr3xf h2,.css-1ywr3xf h3{font-weight:800;margin-bottom:20px;}.css-1ywr3xf h4{margin-bottom:10px;}.css-1ywr3xf *+h1,.css-1ywr3xf *+h2,.css-1ywr3xf *+h3,.css-1ywr3xf *+h4{margin-top:25px;}.css-1ywr3xf hr+h1,.css-1ywr3xf hr+h2,.css-1ywr3xf hr+h3{margin-top:0;}.css-1ywr3xf h1{font-size:32px;}.css-1ywr3xf h2{font-size:24px;}.css-1ywr3xf h3{font-size:18px;}.css-1ywr3xf blockquote{margin:30px 0;padding:0 1em;color:#000000;border-left:0.25em solid #dfe2e5;}.css-1ywr3xf ol,.css-1ywr3xf ul{margin:1rem 0 2rem;padding-left:2rem;}.css-1ywr3xf img{max-width:100%;box-shadow:0 0 5px rgba(0, 0, 0, 0.1);}.css-1ywr3xf hr{border:0.5px solid #dfe2e5;margin:32px 0;}.css-1ywr3xf a{color:#00a170;-webkit-text-decoration:none;text-decoration:none;}.css-1ywr3xf a:hover{color:#f6546a;-webkit-text-decoration:underline;text-decoration:underline;}.css-1ywr3xf pre[class*='language-']{font-family:'Fira Code' padding:1em;margin:0.5em 0;overflow:auto;background:#1e1e1e;}.css-1ywr3xf pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-1ywr3xf code[class*='language-'],.css-1ywr3xf pre[class*='language-']{font-size:14px;tab-size:4;}@media (max-width: 768px){.css-1ywr3xf code[class*='language-'],.css-1ywr3xf pre[class*='language-']{font-size:12px;}}.css-1ywr3xf code[class='language-text']{padding:0.1em 0.3em;border-radius:0.3em;white-space:normal;text-shadow:none;background:#b3d4fc;color:#000000;}@media (max-width: 768px){.css-1ywr3xf code[class='language-text']{font-size:12px;}}.css-1ywr3xf .token{font-family:'Fira Code';}.css-1ywr3xf .token.comment{color:#6a9955;}.css-1ywr3xf .token.keyword,.css-1ywr3xf .token.builtin{color:#c586c0;}.css-1ywr3xf .token.punctuation{color:#d4d4d4;}.css-1ywr3xf .token.operator,.css-1ywr3xf .token.entity,.css-1ywr3xf .token.url,.css-1ywr3xf .language-css .token.string,.css-1ywr3xf .style .token.string{color:#d4d4d4;background:#1e1e1e;}.css-1ywr3xf .token.property,.css-1ywr3xf .token.tag,.css-1ywr3xf .token.boolean,.css-1ywr3xf .token.number,.css-1ywr3xf .token.constant,.css-1ywr3xf .token.symbol,.css-1ywr3xf .token.deleted{color:#b5cea8;}@media (max-width: 768px){.css-1ywr3xf{width:100%;padding:10px 20px;line-height:1.6;font-size:14px;}.css-1ywr3xf h1{font-size:23px;}.css-1ywr3xf h2{font-size:20px;}.css-1ywr3xf h3{font-size:17px;}.css-1ywr3xf img{width:100%;}.css-1ywr3xf hr{margin:50px 0;}}</style><div class="css-1ywr3xf e1ijh0y10"><h2 id="동기" style="position:relative;"><a href="#%EB%8F%99%EA%B8%B0" aria-label="동기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>동기</h2>
<p>동기라고 거창하게 써놨지만 별거 없습니다. 앞으로 이 블로그를 평생 쓸 예정인데.. 그럼 지금보다 포스팅 수도 더 많아질거고. 그러면 내가 일일이 무한 스크롤로 내려서 글을 찾는 행위 자체가 굉장히 불편한데?</p>
<p>정말 이 사고의 흐름대로 생각했고 이 고민에 대한 결론은 “그래. 검색 기능을 만들어보자!” 로 귀결됐습니다.</p>
<h2 id="결과-화면" style="position:relative;"><a href="#%EA%B2%B0%EA%B3%BC-%ED%99%94%EB%A9%B4" aria-label="결과 화면 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>결과 화면</h2>
<p><img src="https://velog.velcdn.com/images/damin1025/post/515c2fd7-c31e-4497-81c5-65f39ba31a30/image.gif" alt="">
결과 화면은 위와 같이 검색 아이콘을 클릭 후 검색 페이지로 이동하여 keyword를 검색하면 아래에 관련 포스팅이 나열되고 그리고 원하는 포스팅으로 이동하는 방식으로 구현에 진행했습니다.</p>
<h2 id="어떤-기술을-선택할-것인가" style="position:relative;"><a href="#%EC%96%B4%EB%96%A4-%EA%B8%B0%EC%88%A0%EC%9D%84-%EC%84%A0%ED%83%9D%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80" aria-label="어떤 기술을 선택할 것인가 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>어떤 기술을 선택할 것인가</h2>
<p><a href="https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-search/" target="_blank" rel="nofollow">공식 docs</a>를 보면 gatsby에 검색을 구현하는 방법을 크게 2가지로 소개하고 있습니다.</p>
<p>첫 번째 방법은 <strong>클라이언트 측 검색</strong>입니다. 빌드 또는 런타임에 데이터를 인덱싱하고 이를 이용해 로컬에서 검색을 수행하는 방법입니다. 공식 docs에서는 <code class="language-text">js-search</code>, <code class="language-text">gatsby-plugin-elasticlunr-search</code>, <code class="language-text">gatsby-plugin-local-search</code> 를 제시하고 있습니다.</p>
<p>두 번째 방법은 <strong>API기반 검색엔진</strong>을 활용하는 방법으로 외부 서비스를 활용하는 방식입니다. 빌드 시점에 검색 대상 데이터들을 인덱싱해 외부 서비스에 올려두고 런타임에는 API로 검색합니다.</p>
<p>하지만 API기반 검색엔진 사용 시 블로그의 빌드 배포 프로세스에 인덱스를 전송해야하고 사용 시 비용이 발생하거나 그리고 무료인 경우 횟수에 제약이 있어 굳이 사용해야 할 이유는 찾지 못했고, 클라이언트 측 검색 방법이 블로그에 부담이 덜 갈것 같은 방식이라고 생각하여 저는 첫번째 방법으로 아이디어를 scheme했습니다.</p>
<h2 id="검색-관련-라이브러리" style="position:relative;"><a href="#%EA%B2%80%EC%83%89-%EA%B4%80%EB%A0%A8-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC" aria-label="검색 관련 라이브러리 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>검색 관련 라이브러리</h2>
<p>여러 Gatsby Starter에 구현된 검색 기능을 참고해봤을때, GraphQL에서 요청한 edges를 모두 돌아 값을 불러오고, 그리고 그 값을 돌면서 search하는 방식으로 구현된 방식이 많았습니다. 하지만 search 시, 모든 배열의 사이즈에 depend하기 때문에 <code class="language-text">O(N) time</code>이 소요되는 것을 생각하면 추후 포스팅 양이 많아지게 될때 검색 속도 저하를 야기할 수 있습니다. 따라서 검색 라이브러리를 활용하는 것이 시간 복잡도면에서 나을것 같다는 판단이 들었습니다.</p>
<p>검색 라이브러리로 구현 시, 아래와 같은 기능을 제공합니다.</p>
<ul>
<li>인덱싱으로 빠른 검색</li>
<li>검색하려는 콘텐츠(제목 혹은 본문)에 더 가중치를 둘 수 있다</li>
<li>검색어 하이라이팅 기능</li>
<li>검색에 and, or과 같은 논리 연산 적용 가능</li>
</ul>
<p>그럼 어떤 라이브러리로 이를 실현할 수 있을까 고민을 하던 중에 <a href="https://velog.io/@seyoung8239/Gatsby-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EA%B2%80%EC%83%89%EA%B8%B0%EB%8A%A5-%EB%8F%84%EC%9E%85%ED%95%98%EA%B8%B0" target="_blank" rel="nofollow">해당 블로그</a>에서 아이디어를 얻어갈 수 있었습니다.</p>
<p><code class="language-text">flexsearch</code> 나 <code class="language-text">lunr</code> 같은 경우는 한글 검색어 이슈가 있고(영문에 특화) <code class="language-text">js-search</code>는 그 생태계가 아직 좁았기에 <code class="language-text">fuse.js</code> 방식을 선택했습니다.</p>
<h2 id="fusejs-검색" style="position:relative;"><a href="#fusejs-%EA%B2%80%EC%83%89" aria-label="fusejs 검색 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fuse.js 검색</h2>
<p><a href="https://fusejs.io/" target="_blank" rel="nofollow">fuse.js</a>는 fuzzy하게 search한다에서 착안됐습니다. 여기서 fuzzy란 <strong>대략적으로 검색</strong>한다의 의미를 지니고 있습니다.</p>
<p>가장 큰 장점은 백엔드의 지원이 필요 없고, 다른 라이브러리에 dependency를 갖고 있지 않으며 결정적으로 <strong>클라이언트 측 검색</strong>기반이라는 것이었습니다.</p>
<h3 id="gatsby에서-fusejs-사용하기" style="position:relative;"><a href="#gatsby%EC%97%90%EC%84%9C-fusejs-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0" aria-label="gatsby에서 fusejs 사용하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Gatsby에서 fuse.js 사용하기</h3>
<p>Gatsby 빌드 과정에서 목록을 인덱싱하여 어딘가 저장해두어야 하고 이렇게 생성된 데이터는 블로그의 런타임에 fuse.js 인스턴스를 생성하여 사용하도록 구성해야 합니다.</p>
<p>이때 빌드 과정은 플러그인을 활용하면 되고 런타임 검색은 hook을 활용하면 됩니다.</p>
<h3 id="gatsby-plugin-fusejs" style="position:relative;"><a href="#gatsby-plugin-fusejs" aria-label="gatsby plugin fusejs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>gatsby-plugin-fusejs</h3>
<p><a href="gatsby-plugin-fusejs">gatsby-plugin-fusejs</a> 해당 docs의 npm 명령어를 follow하여 설치를 진행 후, config를 설정합니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-config.js</span>
	<span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-plugin-fusejs</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 인덱스를 만들고자 하는 데이터의 쿼리</span>
        <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          {
            allMarkdownRemark {
              nodes {
                id
                rawMarkdownBody
                fields {
                  slug
                }
                frontmatter {
                  title
                }
              }
            }
          }
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token comment">// 인덱스를 만들고자 하는 데이터의 프로퍼티</span>
        <span class="token literal-property property">keys</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'body'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// graphql의 결과물을 단순 객체 배열로 변환하는 함수</span>
        <span class="token function-variable function">normalizer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
          data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> node<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> node<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
            <span class="token literal-property property">body</span><span class="token operator">:</span> node<span class="token punctuation">.</span>rawMarkdownBody<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<p>설치 후 gatsby-config.js에 인덱스로 만들어지기 원하는 데이터의 쿼리, 데이터 중에서도 검색이 되었으면 하는 프로퍼티, GraphQL 결과물을 객체 배열로 변환하기 위한 함수를 옵션으로 전달합니다.</p>
<p><img src="https://velog.velcdn.com/images/damin1025/post/4ad55151-b71b-474f-bb50-aea87c69e6d3/image.PNG" alt=""></p>
<p>GraphQL 사이트에 접속 시, <code class="language-text">allFusejs</code> 필드가 추가 됨을 확인할 수 있습니다.</p>
<h3 id="react-use-fusejs" style="position:relative;"><a href="#react-use-fusejs" aria-label="react use fusejs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>react-use-fusejs</h3>
<p>다음으론 만들어진 인덱스를 활용하기 위해 런타임에 hook을 활용하여 검색을 수행해야 합니다.</p>
<p>이때 매번 검색어를 입력 시, 인덱스를 parsing 후 인스턴스를 생성하게 되면 추후 포스팅의 양이 많아질때 자원이 낭비됩니다. (Props Drilling)
따라서 이를 방지하기 위해서 index 페이지를 처음 Search 페이지를 클릭 했을때 모두 다운받고 그리고 그 다운받은 data들을 context에 담아 재사용할 수 있도록 유도하는 것이 더 효율적일것입니다.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">/* Search.tsx */</span>

  <span class="token comment">// index.js(최상위)로부터 다운 후 파싱하여 검색을 수행</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useStaticQuery</span><span class="token generic class-name"><span class="token operator">&lt;</span>SearchProps<span class="token operator">></span></span></span><span class="token punctuation">(</span>graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    {
      fusejs {
        publicUrl
      }
    }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

  <span class="token comment">/**
   * 1. Get User Search Input value
   * 2. Collect all Index data and store in context
   * 3. Based on fuseData find query data with fuzzy search
   * 4. Lazy Loading (when Post's amount is getting larger)
   */</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> fuseData<span class="token punctuation">,</span> setFuseData <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>AppContext<span class="token punctuation">)</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useGatsbyPluginFusejs</span><span class="token generic class-name"><span class="token operator">&lt;</span>SearchItem<span class="token operator">></span></span></span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> fuseData<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isFetching<span class="token punctuation">,</span> setIsFetching<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> fetching <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fetching<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>fuseData <span class="token operator">&amp;&amp;</span> query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fetching<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">true</span>

      <span class="token function">fetch</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>fusejs<span class="token punctuation">.</span>publicUrl<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token function">setFuseData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setIsFetching</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>fuseData<span class="token punctuation">,</span> query<span class="token punctuation">,</span> setFuseData<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></div>
<p>인덱스를 재사용하기 위해서 context에 담을 것이고, 이는 최상위 컴포넌트에서 구현해줘야 합니다. 따라서 <code class="language-text">context</code> 폴더를 새로 생성하고, <code class="language-text">app.tsx</code> 파일을 새로 만들어서 아래와 같이 context를 App ➡ Search로 data를 위임할 수 있도록 합니다.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">/* app.tsx */</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  createContext<span class="token punctuation">,</span>
  SetStateAction<span class="token punctuation">,</span>
  useState<span class="token punctuation">,</span>
  ReactNode<span class="token punctuation">,</span>
  FunctionComponent<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Dispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">interface</span> <span class="token class-name">AppContext</span> <span class="token punctuation">{</span>
  fuseData<span class="token operator">:</span> <span class="token builtin">any</span>
  setFuseData<span class="token operator">:</span> Dispatch<span class="token operator">&lt;</span>SetStateAction<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">>></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AppContext <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createContext</span><span class="token generic class-name"><span class="token operator">&lt;</span>AppContext<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  fuseData<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token function-variable function">setFuseData</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">type</span> <span class="token class-name">AppProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  children<span class="token operator">:</span> ReactNode
<span class="token punctuation">}</span>

<span class="token comment">// Provide Props to Search</span>
<span class="token keyword">const</span> AppProvider<span class="token operator">:</span> FunctionComponent<span class="token operator">&lt;</span>AppProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> children <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fuseData<span class="token punctuation">,</span> setFuseData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AppContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fuseData<span class="token punctuation">,</span> setFuseData <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">AppContext.Provider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> AppProvider</code></pre></div>
<p>이때 Provider에 value를 담을때 객체로 한번 더 감싸서 보내주는 이유는 data의(state) 값이 변경될때 setFuseData는 재생성되지 않지만, fuseData가 재생성되지 않도록 하기 위해 감싸서 보냅니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-browser.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./src/context/app'</span>
 
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">wrapRootElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> element <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>AppProvider<span class="token operator">></span><span class="token punctuation">{</span>element<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>AppProvider<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre></div>
<p>위와 같이 코드를 모두 구성 시, React-Developer-Tools를 확인하면 Context에 post 정보들이 담겨있는것을 확인할 수 있습니다. 그렇기 때문에 검색어를 입력 시, 해당 값들은 이미 담겨있어 자원의 낭비를 최소화 할 수 있습니다.
<img src="https://velog.velcdn.com/images/damin1025/post/3258df66-245c-4b99-84aa-6f0d09f7371e/image.PNG" alt=""></p>
<h2 id="배포-후-성능-check" style="position:relative;"><a href="#%EB%B0%B0%ED%8F%AC-%ED%9B%84-%EC%84%B1%EB%8A%A5-check" aria-label="배포 후 성능 check permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>배포 후 성능 check</h2>
<p><img src="https://velog.velcdn.com/images/damin1025/post/56f43f3a-a80b-42e2-8091-35326e624444/image.PNG" alt=""></p>
<p>검색 기능 추가 후, lightHouse 점수를 확인해본 결과 퍼포에서 1점 깎인것 빼곤 모두 100을 유지했다..!!</p></div></div><style data-emotion="css l9zn25">.css-l9zn25{height:56px;margin-bottom:30px;}.css-l9zn25 ul{text-align:center;}.css-l9zn25 li{display:inline-block;*display:block;*zoom:1;height:56px;line-height:56px;white-space:nowrap;margin:0 10px;}.css-l9zn25 svg{margin-top:-3px;width:21px;height:21px;vertical-align:middle;}.css-l9zn25 a{-webkit-text-decoration:none;text-decoration:none;}.css-l9zn25 a:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-l9zn25 span{cursor:not-allowed;color:#888;}</style><nav class="css-l9zn25 e1t5r2y70"><ul><li><span><svg fill="gray" width="30px" height="30px" viewBox="0 0 24 24"><path fill="current" fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z"></path></svg> 다음글</span></li><li><a href="/Develop/Gatsby-Trouble-Shooting/">이전글<svg class="RightNext" width="30px" height="30px" viewBox="0 0 24 24" fill="current"><path fill="current" fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 4.29289C8.68342 3.90237 9.31658 3.90237 9.70711 4.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L9.70711 19.7071C9.31658 20.0976 8.68342 20.0976 8.29289 19.7071C7.90237 19.3166 7.90237 18.6834 8.29289 18.2929L14.5858 12L8.29289 5.70711C7.90237 5.31658 7.90237 4.68342 8.29289 4.29289Z"></path></svg></a></li></ul></nav><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">© <!-- -->2023<!-- --> Damin-Kim, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/Develop/Gatsby-Search/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-20475ef1db7cf3da6ad9.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-e7ffd94a2e0dc219c609.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-55e6a676810998769245.js\"],\"component---src-pages-about-tsx\":[\"/component---src-pages-about-tsx-3435d814c2591c8ed041.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-8992ed2c6fbae538c64d.js\"],\"component---src-pages-search-tsx\":[\"/component---src-pages-search-tsx-1e38d02d24c174d98c4c.js\"],\"component---src-templates-post-template-tsx\":[\"/component---src-templates-post-template-tsx-e22c7438c7a86a2ab098.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="a3912488b7d23e240934";</script><script src="/webpack-runtime-f0a0fa71d059cc1a7b19.js" async></script><script src="/framework-a4e155cd0476dc1ca208.js" async></script><script src="/app-20475ef1db7cf3da6ad9.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>