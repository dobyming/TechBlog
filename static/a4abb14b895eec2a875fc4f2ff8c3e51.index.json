{"index":"{\"keys\":[{\"path\":[\"title\"],\"id\":\"title\",\"weight\":1,\"src\":\"title\",\"getFn\":null},{\"path\":[\"body\"],\"id\":\"body\",\"weight\":1,\"src\":\"body\",\"getFn\":null}],\"records\":[{\"i\":0,\"$\":{\"0\":{\"v\":\"chart.js ê·¸ë˜í”„ ì´ˆê¸°í™” - destroy()\",\"n\":0.447},\"1\":{\"v\":\"## Issue - \\\"Canvas is already in use\\\"\\r\\nì›¹íŒ© ë²ˆë“¤ë§ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ë‚˜ë‹ˆ, ë˜ ë‹¤ë¥¸ ì´ìŠˆê°€ ë°œìƒí–ˆì—ˆë‹¤. ~~ì‚° ë„˜ì–´ ì‚°~~\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/3ad00259-a0dc-4322-a127-1233bc165b1b/image.PNG)\\r\\n\\r\\nêµ¬ê¸€ë§ í•´ë³´ë‹ˆ, ê½¤ ìœ ëª…í•œ ì—ëŸ¬ ë¡œê·¸ì¸ê²ƒ ê°™ì•˜ë‹¤.\\r\\n\\r\\nì´ˆê¸°ì— ê·¸ë˜í”„ë¥¼ ë¡œë”©í•˜ê³  ê·¸ë¦¬ëŠ”ë°ì—ëŠ” ë¬¸ì œê°€ ì—†ì—ˆì§€ë§Œ, ë‹¤ë¥¸ ë‚˜ë¼ë¥¼ í´ë¦­í•˜ê³  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ë•Œ, ê¸°ì¡´ ê·¸ë˜í”„ê°€ **ì´ˆê¸°í™”** ë˜ì§ˆ ì•Šì•„ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì´ìŠˆê°€ ë°œìƒí–ˆë‹¤. 6ì¼ë™ì•ˆ ì‚½ì§ˆí•œ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ì´ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.\\r\\n\\r\\n### í•´ê²°\\r\\n[chart.js ê³µì‹ë¬¸ì„œ](https://www.chartjs.org/docs/latest/developers/api.html) ì—ì„œëŠ” ê¸°ì¡´ ì°¨íŠ¸ instanceë¥¼ ë‚ ë¦¬ê³  ì‹¶ìœ¼ë©´ `.destroy()` ë©”ì†Œë“œë¥¼ ì¨ë³´ë¼ê³  í•©ë‹ˆë‹¤. \\r\\n\\r\\n>This must be called before the canvas is reused for a new chart.\\r\\n\\r\\në„¤ consoleì— ì¡í˜”ë˜ ì—ëŸ¬ë‘ ë˜‘ê°™ì€ ë§ì„ í•´ì£¼ê³  ìˆì£ ,, ì´ê±¸ë¡œ ì‡¼ë¶€ë¥¼ ë´…ì‹œë‹¤.\\r\\n\\r\\n### ì½”ë“œ\\r\\n```tsx\\r\\nimport Chart from chart.js/auto\\r\\n\\r\\nfunction renderChart(data: number[], labels: string[]) {\\r\\n  const lineChart = $('#lineChart') as HTMLCanvasElement;\\r\\n  const ctx = lineChart.getContext('2d');\\r\\n  if (Chart.getChart(lineChart)) {\\r\\n    Chart.getChart(lineChart)?.destroy();\\r\\n  }\\r\\n\\r\\n  Chart.defaults.color = '#f5eaea';\\r\\n  Chart.defaults.font.family = 'Exo 2';\\r\\n  if (!ctx) {\\r\\n    return;\\r\\n  }\\r\\n  new Chart(ctx, {\\r\\n    type: 'line',\\r\\n    data: {\\r\\n      labels,\\r\\n      datasets: [\\r\\n        {\\r\\n          label: 'Confirmed for the last two weeks',\\r\\n          backgroundColor: '#feb72b',\\r\\n          borderColor: '#feb72b',\\r\\n          data,\\r\\n        },\\r\\n      ],\\r\\n    },\\r\\n    options: {\\r\\n      maintainAspectRatio: false, //ì°¨íŠ¸ ê·¸ë˜í”„ ì‚¬ì´ì¦ˆ ê³ ì •\\r\\n    },\\r\\n  });\\r\\n}\\r\\n```\\r\\ní•´ë‹¹ ì½”ë“œì—ì„œ 3ë²ˆì§¸ lineì˜ ifë¬¸ì„ ì£¼ëª©í•˜ì‹œë©´,\\r\\n1. `Chart.getChart(lineChart)`ê°€ ë§Œì•½ ê°’ì´ í• ë‹¹ë˜ì–´ ìˆë‹¤ë©´ (=ê·¸ë˜í”„ê°€ ê·¸ë ¤ì ¸ ìˆìŒ)\\r\\n2. ê·¸ ì°¨íŠ¸ê°’ì„ ë¶ˆëŸ¬ì˜¤ê³ , `destroy()` (=ê·¸ë˜í”„ ì´ˆê¸°í™”) \\r\\n\\r\\në¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ìˆ˜ì • ì‹œ, ê·¸ë˜í”„ê°€ ë™ì ìœ¼ë¡œ ë³€í•˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ í•´ê²°ë©ë‹ˆë‹¤. \\r\\n\\r\\n### +) íƒ€ì… ê°•í•˜ê²Œ ì¡ì•„ë‚´ê¸° : ì˜µì…”ë„ ì²´ì´ë‹(ì—°ì‚°ì : ?)\\r\\nì´ë•Œ `Chart.getChart(lineChart)?.destroy();` ì´ê²Œ ë­”ê°€ ì‹¶ìœ¼ì‹¤í…ë°ìš”\\r\\ní•´ë‹¹ ì—°ì‚°ìëŠ” **Optional Chaining** ì´ë¼ê³  ë‹¤ìŒ ì½”ë“œì™€ ë™ì¼í•œ ì˜ë¯¸ë¥¼ ê°–ìŠµë‹ˆë‹¤.  \\r\\n\\r\\n```js\\r\\nif (Chart.getChart(lineChart) === null \\r\\n    || Chart.getChart(lineChart) === undefined) { \\r\\n  return; \\r\\n}\\r\\nelse { \\r\\n  Chart.getChart(lineChart).destroy(); \\r\\n}\\r\\n```\\r\\n`Chart.getChart(lineChart)` ê°€ `null` ë˜ëŠ” `undefined`ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´(=ê·¸ë˜í”„ê°€ ì´ë¯¸ ê·¸ë ¤ì ¸ ìˆëŠ” ìƒíƒœ) `destroy()` í•˜ë¼ëŠ”ê²ƒê³¼ ë™ì¼í•œ ì˜ë¯¸ë¥¼ ì§€ë‹™ë‹ˆë‹¤. \",\"n\":0.064}}},{\"i\":1,\"$\":{\"0\":{\"v\":\"Gatsby ë¸”ë¡œê·¸ - ì´ì „ê¸€/ë‹¤ìŒê¸€ ë²„íŠ¼ ë¡œì§ êµ¬í˜„í•˜ê¸° \",\"n\":0.378},\"1\":{\"v\":\"## ë™ê¸° \\r\\nìš”ì¦˜ `Gatsby`ë¥¼ í™œìš©í•˜ì—¬ Tech Blogë¥¼ êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì–¼ì¶” í¬ìŠ¤íŒ… í…œí”Œë¦¿ë„ êµ¬í˜„ì´ ëœ ìƒíƒœì—ì„œ, ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ë§Œë“  ë¸”ë¡œê·¸ì™€ íŠ¹íˆ ê°œë°œ ë¸”ë¡œê·¸ë¡œ ìœ ëª…í•œ **velog**ì—ì„œ ì–´ë–¤ ìš”ì†Œë“¤ì„ ê°–ê³  ìˆëŠ”ì§€ ì²´í¬í•´ë³¸ ê²°ê³¼, \\r\\n\\r\\n- TOC (Table Of Contents) ê¸°ëŠ¥ \\r\\n- ì´ì „ê¸€/ë‹¤ìŒê¸€ ê¸°ëŠ¥ \\r\\n- ëŒ“ê¸€ ê¸°ëŠ¥ \\r\\n- ScrollToTop ë²„íŠ¼ ê¸°ëŠ¥ \\r\\n\\r\\nì´ ì •ë„ë¡œ ì¶”ë ¤ ë³¼ ìˆ˜ ìˆì„ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ë„ ìµœì†Œí•œ ì € ê¸°ëŠ¥ë“¤ì€ íƒ‘ì¬í•œ ë¸”ë¡œê·¸ë¥¼ ì œì‘í•´ì•¼ì§€ ìƒê°í–ˆìŠµë‹ˆë‹¤. ëŒ“ê¸€ ê¸°ëŠ¥(Utterance í™œìš©)ì´ë‚˜ ScrollToTop ê¸°ëŠ¥ì€ êµ¬ê¸€ë§í•˜ë©´ ì½”ë“œ ì˜ˆì œë„ ë§ì•„ì„œ ê¸ˆë°© êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nì œê°€ ì´ ë¸”ë¡œê·¸ë¥¼ ì“°ëŠ” ì´ìœ ëŠ” **ì´ì „ê¸€/ë‹¤ìŒê¸€** ê¸°ëŠ¥ ì œì‘ê¸°ë¥¼ í•´ë‹¹ í¬ìŠ¤íŒ…ì„ í†µí•´ì„œ ë‚˜ì—´í•˜ê³ ì í•©ë‹ˆë‹¤.. (ì™œëƒí•˜ë©´ 3ì¼ë™ì•ˆ ì‚½ì§ˆí–ˆê¸°ì—)\\r\\nê·¸ë¦¬ê³  ê²°ì •ì ì¸ ë™ê¸°ëŠ” ë‹¨ìˆœíˆ ì‚¬ëŒë“¤ì´ ì´ ê¸°ëŠ¥ì„ ë§ì´ ê°œë°œí•´ì„œ ë‚˜ë„ í•´ì•¼ì§€ ë³´ë‹¨ ì œ ë¸”ë¡œê·¸ì˜ ì‘ë™ êµ¬ì¡°ì— ëŒ€í•´ì„œ ìƒê°í–ˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n>ğŸ‘€ ì‹œë‚˜ë¦¬ì˜¤ \\r\\n>1. ë¸”ë¡œê·¸ë¥¼ ì½ëŠ”ë‹¤.\\r\\n>2. ì´ì „ê¸€ì´ë‚˜ ë‹¤ìŒê¸€ì„ ë³´ê³  ì‹¶ì€ë°?\\r\\n>3. ScrollToTop ë²„íŠ¼ì„ ëˆ„ë¥´ê³  `<-` ë²„íŠ¼ì„ ëˆŒëŸ¬ í™ˆí™”ë©´ìœ¼ë¡œ ëŒì•„ì˜¨ë‹¤\\r\\n\\r\\nì‚¬ìš©ì ê²½í—˜ì´ ë–¨ì–´ì§ˆê²ƒ ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ **ì´ì „ê¸€/ë‹¤ìŒê¸€** ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì„œ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ í¬ìŠ¤íŒ…ë„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ê² ë‹¤! ë¼ëŠ” ìƒê°ì—ì„œ ì‹œì‘í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## ê²°ê³¼\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/577bc8c0-a684-4373-9bb8-700597f2a817/image.gif)\\r\\n\\r\\nìš°ì„  ê²°ê³¼ë¶€í„° ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë™ì‘ ë°©ì‹ì€ ìœ„ì™€ ê°™ê³ , ë§Œì•½ ê°€ì¥ ìµœì‹  í¬ìŠ¤íŠ¸ì´ê±°ë‚˜ ì•„ë‹ˆë©´ ê°€ì¥ ì˜¤ë˜ëœ í¬ìŠ¤íŠ¸ë¼ë©´ ë‹¤ìŒê¸€/ì´ì „ê¸€ ë²„íŠ¼ì´ ë¹„í™œì„±í™” ë  ìˆ˜ ìˆë„ë¡ ë¡œì§ì„ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## gatsby-node.js íŒŒì¼ ìˆ˜ì • \\r\\n\\r\\në§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ í˜ì´ì§€ë¡œ ë³€í™˜í•´ì£¼ëŠ” `createPages` ì—ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ queryë¥¼ ìš”ì²­í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤. í•´ë‹¹ ë¶€ë¶„ì—ì„œëŠ”, `contents` í´ë” (ì´ ë¶€ë¶„ì€ `gatsby-config.js`ì—ì„œ optionsì„ ì„¤ì •í•´ì¤¬ì„ê±°ë¼ê³  ìƒê°í•˜ê³  ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.) ì— ë‹´ê¸´ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ë“¤ì„ ëª¨ë‘ ìš”ì²­í•©ë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nexports.createPages = async ({ actions, graphql, reporter }) => {\\r\\n  const { createPage } = actions;\\r\\n\\r\\n  // Get All Markdown File For create Pages\\r\\n  const queryAllMarkdownData = await graphql(\\r\\n    `\\r\\n      {\\r\\n        allMarkdownRemark(\\r\\n          sort: {\\r\\n            order: DESC\\r\\n            fields: [frontmatter___date, frontmatter___title]\\r\\n          }\\r\\n        ) {\\r\\n          edges {\\r\\n            node {\\r\\n              fields {\\r\\n                slug\\r\\n              }\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    `,\\r\\n  );\\r\\n  // ...\\r\\n}\\r\\n```\\r\\në°˜ë“œì‹œ `graphiql` ì—ì„œ í•´ë‹¹ ì¿¼ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. (slugê°€ ì•Œë§ê²Œ ë‚˜ì˜¤ëŠ”ì§€ê°€ ì¤‘ìš”) \\r\\n\\r\\n\\r\\n```jsx\\r\\n  // Import Post Template Component\\r\\n  const PostTemplateComponent = path.resolve(\\r\\n    __dirname,\\r\\n    'src/templates/post_template.tsx',\\r\\n  );\\r\\n\\r\\n  const posts = queryAllMarkdownData.data.allMarkdownRemark.edges\\r\\n  posts.forEach((\\r\\n    {\\r\\n      node: {\\r\\n        fields: { slug },\\r\\n      }\\r\\n    },\\r\\n    index\\r\\n  ) => {\\r\\n    // Logic of Prev/Next Button \\r\\n    const prev = index === 0 ? null : posts[index-1]\\r\\n    const next = index === posts.length -1 ? null: posts[index+1]\\r\\n    createPage({\\r\\n      path: slug,\\r\\n      component: PostTemplateComponent,\\r\\n      context: {\\r\\n        slug,\\r\\n        prev,\\r\\n        next,\\r\\n      }\\r\\n    })\\r\\n  })\\r\\n```\\r\\n`posts` ë°°ì—´ì„ ëŒë©´ì„œ, ì•„ê¹Œ ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë¡œì§ì„ `prev`, `next`ì— ì‘ì„±í•©ë‹ˆë‹¤. ë§Œì•½ ê°€ì¥ ìµœì‹ ê¸€ì´ê±°ë‚˜, ê°€ì¥ ì˜¤ë˜ëœ ê¸€ì´ë©´ slugëŠ” <span style=\\\"color:red\\\">null</span>ë¡œ ì„¸íŒ…ë ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³   `createPage`ì— contextì— `prev`, `next`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. \\r\\n\\r\\n\\r\\n## ì´ì „ê¸€/ë‹¤ìŒê¸€ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„í•˜ê¸° \\r\\nì´ì œ ì´ì „ê¸€/ë‹¤ìŒê¸€ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“­ì‹œë‹¤. ë­ ë””ìì¸ì ì¸ ë¶€ë¶„ì€ ë³¸ì¸ì´ ì›í•˜ëŠ”ëŒ€ë¡œ Stylingì— ì§„í–‰í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. \\r\\n\\r\\nê³µí†µì ì¸ ë¶€ë¶„ì´ë¼ë©´, `Props`ë¥¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸(`post_template`-ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… í…œí”Œë¦¿)ì—ì„œ ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„ì¼ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” slugë¥¼ í™œìš©í•´ì„œ ì ‘ê·¼í•  ê²ƒì´ê³ , slugëŠ” string íƒ€ì…ì…ë‹ˆë‹¤. ë”°ë¼ì„œ Propsë¡œëŠ” `ì´ì „ê¸€ slug`ì™€ `ë‹¤ìŒê¸€ slug`ë¥¼ ë°›ì•„ì˜¤ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\nexport type PrevNextProps = {\\r\\n  previousPagePath: string | null\\r\\n  nextPagePath: string | null\\r\\n}\\r\\n\\r\\nconst PostPrevNextBtn: FunctionComponent<PrevNextProps> = function ({\\r\\n  previousPagePath,\\r\\n  nextPagePath,\\r\\n}) {\\r\\n  return (\\r\\n    <StyledPager>\\r\\n      <ul>\\r\\n        <li>\\r\\n          {previousPagePath !== null ? (\\r\\n            <Link to={previousPagePath}>\\r\\n              <Left /> ë‹¤ìŒê¸€\\r\\n            </Link>\\r\\n          ) : (\\r\\n            <span>\\r\\n              <Left /> ë‹¤ìŒê¸€\\r\\n            </span>\\r\\n          )}\\r\\n        </li>\\r\\n\\r\\n        <li>\\r\\n          {nextPagePath !== null ? (\\r\\n            <Link to={nextPagePath}>\\r\\n              ì´ì „ê¸€ <Right />\\r\\n            </Link>\\r\\n          ) : (\\r\\n            <span>\\r\\n              ì´ì „ê¸€ <Right />\\r\\n            </span>\\r\\n          )}\\r\\n        </li>\\r\\n      </ul>\\r\\n    </StyledPager>\\r\\n  )\\r\\n}\\r\\n\\r\\nexport default PostPrevNextBtn\\r\\n```\\r\\n\\r\\n## post_template ì—ì„œ slug ì¡°ì‘í•˜ê¸° \\r\\npost_templateì€ ì—„ë°€íˆ ë”°ì§€ë©´ ìœ„ì—ì„œ ì„¤ê³„í•œ ì»´í¬ë„ŒíŠ¸ì— Propsë¥¼ ë¿Œë ¤ì¤˜ì•¼í•  ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” í•´ë‹¹ í…œí”Œë¦¿ì—ì„œ `gatsby-node.js` ì—ì„œ queryë¡œ ìš”ì²­í•œ ê°’ë“¤ì„ ì´ì œ ë°›ì•„ì™€ì•¼ í•©ë‹ˆë‹¤. ìš°ì„  Propsë¡œ ê·¸ ë¶€ë¶„ì— ëŒ€í•œ íƒ€ì…ì„ ëª…ì‹œí•©ë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\ntype PostTemplateProps = {\\r\\n  // ...\\r\\n  pageContext: {\\r\\n    prev: {\\r\\n      node: {\\r\\n        fields: {\\r\\n          slug: string\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n    next: {\\r\\n      node: {\\r\\n        fields: {\\r\\n          slug: string\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n```\\r\\n\\r\\nê·¸ë¦¬ê³  pageContextê°€ ì˜ ë°›ì•„ì™€ì§€ëŠ”ì§€ `console.log(pageContext)`ë¥¼ ìˆ˜í–‰í•´ë³´ì„¸ìš”. `next,prev,slug`ê°€ objectí˜•íƒœë¡œ ì¶œë ¥ì´ ëœë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ queryìš”ì²­ê°’ì„ ë°›ì•„ì™”ìŠµë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\nconst PostTemplate: FunctionComponent<PostTemplateProps> = function ({\\r\\n  //...\\r\\n  pageContext: { prev, next },\\r\\n}) {\\r\\n  return (\\r\\n    //...\\r\\n      <PostPrevNextBtn\\r\\n        previousPagePath={prev ? prev.node.fields.slug : null}\\r\\n        nextPagePath={next ? next.node.fields.slug : null}\\r\\n      />\\r\\n    //...\\r\\n  )\\r\\n}\\r\\n```\\r\\nì˜ ë°›ì•„ì˜¨ `next`ì™€ `prev`ì˜ objectê°’ì„ parsingí•œ slugê°’ì„, `PostPrevNextBtn` ì»´í¬ë„ŒíŠ¸ì— Propsë¡œ ë„˜ê²¨ì¤ë‹ˆë‹¤. \\r\\n\\r\\nì´ë•Œ ê°€ì¥ ìµœì‹ ê¸€ì´ë‚˜,ê°€ì¥ ì˜¤ë˜ëœ ê¸€ì— ëŒ€í•´ì„œëŠ” pageContext consoleì„ ì°ì–´ë³´ë©´ `prev,next` objectì´ **keyê°’ìœ¼ë¡œë„ ë“±ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** ì´ì— ëŒ€í•œ validation checkê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì´ ì‚¼í•­ì—°ì‚°ìë¥¼ í†µí•´ ê±¸ëŸ¬ì¤ë‹ˆë‹¤. \\r\\n\\r\\n\\r\\n## ë§ºìŒë§\\r\\nì˜ ì‘ë™í•˜ë‚˜ìš”? ì €ë„ ì—¬ëŸ¬ë²ˆì˜ ì‚½ì§ˆì„ í†µí•´ì„œ êµ¬í˜„í•œê±°ë¼ ëª¨ë‘ì—ê²Œ ìƒìš©ë  ë°©ë²•ì€ ì•„ë‹ˆë¼ê³  ìƒê°í•©ë‹ˆë‹¤ ã…ã….. ì œê°€ êµ¬í˜„í•œ ë¡œì§ë„ ì—­ì‹œ ì°¸ê³ ìš©ìœ¼ë¡œ ë³¸ì¸ ì½”ë“œì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ë–¼ì–´ê°€ì„œ ì‚´ì„ ë¶™íˆì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.ğŸ¤— \\r\\n\",\"n\":0.039}}},{\"i\":2,\"$\":{\"0\":{\"v\":\"Gatsby ë¸”ë¡œê·¸ - ê²€ìƒ‰ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°ğŸ”\",\"n\":0.447},\"1\":{\"v\":\"## ë™ê¸°\\r\\në™ê¸°ë¼ê³  ê±°ì°½í•˜ê²Œ ì¨ë†¨ì§€ë§Œ ë³„ê±° ì—†ìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œ ì´ ë¸”ë¡œê·¸ë¥¼ í‰ìƒ ì“¸ ì˜ˆì •ì¸ë°.. ê·¸ëŸ¼ ì§€ê¸ˆë³´ë‹¤ í¬ìŠ¤íŒ… ìˆ˜ë„ ë” ë§ì•„ì§ˆê±°ê³ . ê·¸ëŸ¬ë©´ ë‚´ê°€ ì¼ì¼ì´ ë¬´í•œ ìŠ¤í¬ë¡¤ë¡œ ë‚´ë ¤ì„œ ê¸€ì„ ì°¾ëŠ” í–‰ìœ„ ìì²´ê°€ êµ‰ì¥íˆ ë¶ˆí¸í•œë°? \\r\\n\\r\\nì •ë§ ì´ ì‚¬ê³ ì˜ íë¦„ëŒ€ë¡œ ìƒê°í–ˆê³  ì´ ê³ ë¯¼ì— ëŒ€í•œ ê²°ë¡ ì€ \\\"ê·¸ë˜. ê²€ìƒ‰ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ë³´ì!\\\" ë¡œ ê·€ê²°ëìŠµë‹ˆë‹¤. \\r\\n\\r\\n\\r\\n## ê²°ê³¼ í™”ë©´\\r\\n![](https://velog.velcdn.com/images/damin1025/post/515c2fd7-c31e-4497-81c5-65f39ba31a30/image.gif)\\r\\nê²°ê³¼ í™”ë©´ì€ ìœ„ì™€ ê°™ì´ ê²€ìƒ‰ ì•„ì´ì½˜ì„ í´ë¦­ í›„ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ keywordë¥¼ ê²€ìƒ‰í•˜ë©´ ì•„ë˜ì— ê´€ë ¨ í¬ìŠ¤íŒ…ì´ ë‚˜ì—´ë˜ê³  ê·¸ë¦¬ê³  ì›í•˜ëŠ” í¬ìŠ¤íŒ…ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ì— ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n\\r\\n## ì–´ë–¤ ê¸°ìˆ ì„ ì„ íƒí•  ê²ƒì¸ê°€\\r\\n[ê³µì‹ docs](https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-search/)ë¥¼ ë³´ë©´ gatsbyì— ê²€ìƒ‰ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ í¬ê²Œ 2ê°€ì§€ë¡œ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nì²« ë²ˆì§¸ ë°©ë²•ì€ **í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê²€ìƒ‰**ì…ë‹ˆë‹¤. ë¹Œë“œ ë˜ëŠ” ëŸ°íƒ€ì„ì— ë°ì´í„°ë¥¼ ì¸ë±ì‹±í•˜ê³  ì´ë¥¼ ì´ìš©í•´ ë¡œì»¬ì—ì„œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ê³µì‹ docsì—ì„œëŠ” `js-search`, `gatsby-plugin-elasticlunr-search`, `gatsby-plugin-local-search` ë¥¼ ì œì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\në‘ ë²ˆì§¸ ë°©ë²•ì€ **APIê¸°ë°˜ ê²€ìƒ‰ì—”ì§„**ì„ í™œìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë¹Œë“œ ì‹œì ì— ê²€ìƒ‰ ëŒ€ìƒ ë°ì´í„°ë“¤ì„ ì¸ë±ì‹±í•´ ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ì˜¬ë ¤ë‘ê³  ëŸ°íƒ€ì„ì—ëŠ” APIë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.\\r\\n\\r\\ní•˜ì§€ë§Œ APIê¸°ë°˜ ê²€ìƒ‰ì—”ì§„ ì‚¬ìš© ì‹œ ë¸”ë¡œê·¸ì˜ ë¹Œë“œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ì— ì¸ë±ìŠ¤ë¥¼ ì „ì†¡í•´ì•¼í•˜ê³  ì‚¬ìš© ì‹œ ë¹„ìš©ì´ ë°œìƒí•˜ê±°ë‚˜ ê·¸ë¦¬ê³  ë¬´ë£Œì¸ ê²½ìš° íšŸìˆ˜ì— ì œì•½ì´ ìˆì–´ êµ³ì´ ì‚¬ìš©í•´ì•¼ í•  ì´ìœ ëŠ” ì°¾ì§€ ëª»í–ˆê³ , í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê²€ìƒ‰ ë°©ë²•ì´ ë¸”ë¡œê·¸ì— ë¶€ë‹´ì´ ëœ ê°ˆê²ƒ ê°™ì€ ë°©ì‹ì´ë¼ê³  ìƒê°í•˜ì—¬ ì €ëŠ” ì²«ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ ì•„ì´ë””ì–´ë¥¼ schemeí–ˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n## ê²€ìƒ‰ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ \\r\\nì—¬ëŸ¬ Gatsby Starterì— êµ¬í˜„ëœ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì°¸ê³ í•´ë´¤ì„ë•Œ, GraphQLì—ì„œ ìš”ì²­í•œ edgesë¥¼ ëª¨ë‘ ëŒì•„ ê°’ì„ ë¶ˆëŸ¬ì˜¤ê³ , ê·¸ë¦¬ê³  ê·¸ ê°’ì„ ëŒë©´ì„œ searchí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ëœ ë°©ì‹ì´ ë§ì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ search ì‹œ, ëª¨ë“  ë°°ì—´ì˜ ì‚¬ì´ì¦ˆì— dependí•˜ê¸° ë•Œë¬¸ì— `O(N) time`ì´ ì†Œìš”ë˜ëŠ” ê²ƒì„ ìƒê°í•˜ë©´ ì¶”í›„ í¬ìŠ¤íŒ… ì–‘ì´ ë§ì•„ì§€ê²Œ ë ë•Œ ê²€ìƒ‰ ì†ë„ ì €í•˜ë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê²€ìƒ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì‹œê°„ ë³µì¡ë„ë©´ì—ì„œ ë‚˜ì„ê²ƒ ê°™ë‹¤ëŠ” íŒë‹¨ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nê²€ìƒ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ êµ¬í˜„ ì‹œ, ì•„ë˜ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. \\r\\n\\r\\n- ì¸ë±ì‹±ìœ¼ë¡œ ë¹ ë¥¸ ê²€ìƒ‰\\r\\n- ê²€ìƒ‰í•˜ë ¤ëŠ” ì½˜í…ì¸ (ì œëª© í˜¹ì€ ë³¸ë¬¸)ì— ë” ê°€ì¤‘ì¹˜ë¥¼ ë‘˜ ìˆ˜ ìˆë‹¤\\r\\n- ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ… ê¸°ëŠ¥\\r\\n- ê²€ìƒ‰ì— and, orê³¼ ê°™ì€ ë…¼ë¦¬ ì—°ì‚° ì ìš© ê°€ëŠ¥\\r\\n\\r\\nê·¸ëŸ¼ ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì´ë¥¼ ì‹¤í˜„í•  ìˆ˜ ìˆì„ê¹Œ ê³ ë¯¼ì„ í•˜ë˜ ì¤‘ì— [í•´ë‹¹ ë¸”ë¡œê·¸](https://velog.io/@seyoung8239/Gatsby-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EA%B2%80%EC%83%89%EA%B8%B0%EB%8A%A5-%EB%8F%84%EC%9E%85%ED%95%98%EA%B8%B0)ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ì–»ì–´ê°ˆ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n`flexsearch` ë‚˜ `lunr` ê°™ì€ ê²½ìš°ëŠ” í•œê¸€ ê²€ìƒ‰ì–´ ì´ìŠˆê°€ ìˆê³ (ì˜ë¬¸ì— íŠ¹í™”) `js-search`ëŠ” ê·¸ ìƒíƒœê³„ê°€ ì•„ì§ ì¢ì•˜ê¸°ì— `fuse.js` ë°©ì‹ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## fuse.js ê²€ìƒ‰ \\r\\n[fuse.js](https://fusejs.io/)ëŠ” fuzzyí•˜ê²Œ searchí•œë‹¤ì—ì„œ ì°©ì•ˆëìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ fuzzyë€ **ëŒ€ëµì ìœ¼ë¡œ ê²€ìƒ‰**í•œë‹¤ì˜ ì˜ë¯¸ë¥¼ ì§€ë‹ˆê³  ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nê°€ì¥ í° ì¥ì ì€ ë°±ì—”ë“œì˜ ì§€ì›ì´ í•„ìš” ì—†ê³ , ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— dependencyë¥¼ ê°–ê³  ìˆì§€ ì•Šìœ¼ë©° ê²°ì •ì ìœ¼ë¡œ **í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê²€ìƒ‰**ê¸°ë°˜ì´ë¼ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n### Gatsbyì—ì„œ fuse.js ì‚¬ìš©í•˜ê¸°\\r\\nGatsby ë¹Œë“œ ê³¼ì •ì—ì„œ ëª©ë¡ì„ ì¸ë±ì‹±í•˜ì—¬ ì–´ë”˜ê°€ ì €ì¥í•´ë‘ì–´ì•¼ í•˜ê³  ì´ë ‡ê²Œ ìƒì„±ëœ ë°ì´í„°ëŠ” ë¸”ë¡œê·¸ì˜ ëŸ°íƒ€ì„ì— fuse.js ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\\r\\n\\r\\nì´ë•Œ ë¹Œë“œ ê³¼ì •ì€ í”ŒëŸ¬ê·¸ì¸ì„ í™œìš©í•˜ë©´ ë˜ê³  ëŸ°íƒ€ì„ ê²€ìƒ‰ì€ hookì„ í™œìš©í•˜ë©´ ë©ë‹ˆë‹¤.\\r\\n\\r\\n### gatsby-plugin-fusejs\\r\\n[gatsby-plugin-fusejs](gatsby-plugin-fusejs) í•´ë‹¹ docsì˜ npm ëª…ë ¹ì–´ë¥¼ followí•˜ì—¬ ì„¤ì¹˜ë¥¼ ì§„í–‰ í›„, configë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. \\r\\n\\r\\n```js\\r\\n// gatsby-config.js\\r\\n\\t{\\r\\n      resolve: `gatsby-plugin-fusejs`,\\r\\n      options: {\\r\\n        // ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ ì¿¼ë¦¬\\r\\n        query: `\\r\\n          {\\r\\n            allMarkdownRemark {\\r\\n              nodes {\\r\\n                id\\r\\n                rawMarkdownBody\\r\\n                fields {\\r\\n                  slug\\r\\n                }\\r\\n                frontmatter {\\r\\n                  title\\r\\n                }\\r\\n              }\\r\\n            }\\r\\n          }\\r\\n        `,\\r\\n        // ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ í”„ë¡œí¼í‹°\\r\\n        keys: ['title', 'body'],\\r\\n        // graphqlì˜ ê²°ê³¼ë¬¼ì„ ë‹¨ìˆœ ê°ì²´ ë°°ì—´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜\\r\\n        normalizer: ({ data }) =>\\r\\n          data.allMarkdownRemark.nodes.map((node) => ({\\r\\n            id: node.id,\\r\\n            path: node.fields.slug,\\r\\n            title: node.frontmatter.title,\\r\\n            body: node.rawMarkdownBody,\\r\\n          })),\\r\\n      },\\r\\n    },\\r\\n```\\r\\nì„¤ì¹˜ í›„ gatsby-config.jsì— ì¸ë±ìŠ¤ë¡œ ë§Œë“¤ì–´ì§€ê¸° ì›í•˜ëŠ” ë°ì´í„°ì˜ ì¿¼ë¦¬, ë°ì´í„° ì¤‘ì—ì„œë„ ê²€ìƒ‰ì´ ë˜ì—ˆìœ¼ë©´ í•˜ëŠ” í”„ë¡œí¼í‹°, GraphQL ê²°ê³¼ë¬¼ì„ ê°ì²´ ë°°ì—´ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ì˜µì…˜ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/4ad55151-b71b-474f-bb50-aea87c69e6d3/image.PNG)\\r\\n\\r\\nGraphQL ì‚¬ì´íŠ¸ì— ì ‘ì† ì‹œ, `allFusejs` í•„ë“œê°€ ì¶”ê°€ ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n### react-use-fusejs\\r\\në‹¤ìŒìœ¼ë¡  ë§Œë“¤ì–´ì§„ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ ëŸ°íƒ€ì„ì— hookì„ í™œìš©í•˜ì—¬ ê²€ìƒ‰ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. \\r\\n\\r\\nì´ë•Œ ë§¤ë²ˆ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ ì‹œ, ì¸ë±ìŠ¤ë¥¼ parsing í›„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ ì¶”í›„ í¬ìŠ¤íŒ…ì˜ ì–‘ì´ ë§ì•„ì§ˆë•Œ ìì›ì´ ë‚­ë¹„ë©ë‹ˆë‹¤. (Props Drilling) \\r\\në”°ë¼ì„œ ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ index í˜ì´ì§€ë¥¼ ì²˜ìŒ Search í˜ì´ì§€ë¥¼ í´ë¦­ í–ˆì„ë•Œ ëª¨ë‘ ë‹¤ìš´ë°›ê³  ê·¸ë¦¬ê³  ê·¸ ë‹¤ìš´ë°›ì€ dataë“¤ì„ contextì— ë‹´ì•„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìœ ë„í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¼ê²ƒì…ë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\n/* Search.tsx */\\r\\n\\r\\n  // index.js(ìµœìƒìœ„)ë¡œë¶€í„° ë‹¤ìš´ í›„ íŒŒì‹±í•˜ì—¬ ê²€ìƒ‰ì„ ìˆ˜í–‰\\r\\n  const data = useStaticQuery<SearchProps>(graphql`\\r\\n    {\\r\\n      fusejs {\\r\\n        publicUrl\\r\\n      }\\r\\n    }\\r\\n  `)\\r\\n\\r\\n  /**\\r\\n   * 1. Get User Search Input value\\r\\n   * 2. Collect all Index data and store in context\\r\\n   * 3. Based on fuseData find query data with fuzzy search\\r\\n   * 4. Lazy Loading (when Post's amount is getting larger)\\r\\n   */\\r\\n  const [query, setQuery] = useState<string>('')\\r\\n  const { fuseData, setFuseData } = useContext(AppContext)\\r\\n  const result = useGatsbyPluginFusejs<SearchItem>(query, fuseData)\\r\\n  const [isFetching, setIsFetching] = useState(false)\\r\\n\\r\\n  const fetching = useRef(false)\\r\\n  useEffect(() => {\\r\\n    if (!fetching.current && !fuseData && query) {\\r\\n      fetching.current = true\\r\\n\\r\\n      fetch(data.fusejs.publicUrl)\\r\\n        .then(res => res.json())\\r\\n        .then(data => setFuseData(data))\\r\\n        .finally(() => setIsFetching(false))\\r\\n    }\\r\\n  }, [fuseData, query, setFuseData])\\r\\n```\\r\\n\\r\\nì¸ë±ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ contextì— ë‹´ì„ ê²ƒì´ê³ , ì´ëŠ” ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ êµ¬í˜„í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ `context` í´ë”ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ê³ , `app.tsx` íŒŒì¼ì„ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ì•„ë˜ì™€ ê°™ì´ contextë¥¼ App â¡ Searchë¡œ dataë¥¼ ìœ„ì„í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\n/* app.tsx */\\r\\n\\r\\nimport React, {\\r\\n  createContext,\\r\\n  SetStateAction,\\r\\n  useState,\\r\\n  ReactNode,\\r\\n  FunctionComponent,\\r\\n} from 'react'\\r\\nimport { Dispatch } from 'react'\\r\\n\\r\\ninterface AppContext {\\r\\n  fuseData: any\\r\\n  setFuseData: Dispatch<SetStateAction<any>>\\r\\n}\\r\\n\\r\\nexport const AppContext = createContext<AppContext>({\\r\\n  fuseData: null,\\r\\n  setFuseData: () => {},\\r\\n})\\r\\n\\r\\ntype AppProps = {\\r\\n  children: ReactNode\\r\\n}\\r\\n\\r\\n// Provide Props to Search\\r\\nconst AppProvider: FunctionComponent<AppProps> = function ({ children }) {\\r\\n  const [fuseData, setFuseData] = useState(null)\\r\\n\\r\\n  return (\\r\\n    <AppContext.Provider value={{ fuseData, setFuseData }}>\\r\\n      {children}\\r\\n    </AppContext.Provider>\\r\\n  )\\r\\n}\\r\\n\\r\\nexport default AppProvider\\r\\n```\\r\\nì´ë•Œ Providerì— valueë¥¼ ë‹´ì„ë•Œ ê°ì²´ë¡œ í•œë²ˆ ë” ê°ì‹¸ì„œ ë³´ë‚´ì£¼ëŠ” ì´ìœ ëŠ” dataì˜(state) ê°’ì´ ë³€ê²½ë ë•Œ setFuseDataëŠ” ì¬ìƒì„±ë˜ì§€ ì•Šì§€ë§Œ, fuseDataê°€ ì¬ìƒì„±ë˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ ê°ì‹¸ì„œ ë³´ëƒ…ë‹ˆë‹¤. \\r\\n\\r\\n```js\\r\\n// gatsby-browser.js\\r\\nimport { AppProvider } from './src/context/app'\\r\\n \\r\\nexport const wrapRootElement = ({ element }) => {\\r\\n  return <AppProvider>{element}</AppProvider>\\r\\n}\\r\\n```\\r\\n\\r\\nìœ„ì™€ ê°™ì´ ì½”ë“œë¥¼ ëª¨ë‘ êµ¬ì„± ì‹œ, React-Developer-Toolsë¥¼ í™•ì¸í•˜ë©´ Contextì— post ì •ë³´ë“¤ì´ ë‹´ê²¨ìˆëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ ì‹œ, í•´ë‹¹ ê°’ë“¤ì€ ì´ë¯¸ ë‹´ê²¨ìˆì–´ ìì›ì˜ ë‚­ë¹„ë¥¼ ìµœì†Œí™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n![](https://velog.velcdn.com/images/damin1025/post/3258df66-245c-4b99-84aa-6f0d09f7371e/image.PNG)\\r\\n\\r\\n\\r\\n## ë°°í¬ í›„ ì„±ëŠ¥ check\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/56f43f3a-a80b-42e2-8091-35326e624444/image.PNG)\\r\\n\\r\\nê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€ í›„, lightHouse ì ìˆ˜ë¥¼ í™•ì¸í•´ë³¸ ê²°ê³¼ í¼í¬ì—ì„œ 1ì  ê¹ì¸ê²ƒ ë¹¼ê³¤ ëª¨ë‘ 100ì„ ìœ ì§€í–ˆë‹¤..!! \\r\\n\",\"n\":0.035}}},{\"i\":3,\"$\":{\"0\":{\"v\":\"Gatsby ë¸”ë¡œê·¸ - ê°œë°œí•˜ë©´ì„œ ë§Œë‚¬ë˜ Issue\",\"n\":0.408},\"1\":{\"v\":\"`Gastby` í”„ë ˆì„ì›Œí¬ë¥¼ í™œìš©í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ êµ¬í˜„í•˜ê³  ìš´ì˜í•œì§€ ì–´ëŠë§ 2ë‹¬ì´ ë‹¤ ë˜ê°€ê³  ìˆë„¤ìš”.. ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ë¸”ë¡œê·¸ì— í•˜ë‚˜ì”© ë§ë¶™í˜€ê°€ë©´ì„œ ë™ì‹œì— ì—ëŸ¬ë„ ê°™ì´ ëŠ˜ì–´ë‚¬ì—ˆëŠ”ë°ìš” ğŸ˜… \\r\\n\\r\\nì´ ê¸°ê°„ë™ì•ˆ ì œê°€ ì ‘í•œ Issueë“¤ê³¼ ì–´ë–»ê²Œ í•´ê²°í•˜ë ¤ê³  ë…¸ë ¥í–ˆëŠ”ì§€ë¥¼ ì—¬ëŸ¬ë¶„ê»˜ ê³µìœ í•˜ë ¤ê³  í•´ìš”. \\r\\n\\r\\n\\r\\n## #418 #423 Minified Error \\r\\nì–´ëŠì •ë„ ë¸”ë¡œê·¸ë¥¼ êµ¬í˜„í•˜ê³  ë°°í¬í•˜ë©´ì„œ lightHouseë¡œ Performance ì ìˆ˜ë¥¼ ì¸¡ì •í•˜ëŠ”ë° Best Practices ë¶€ë¬¸ì—ì„œ ìê¾¸ 92ì ì´ë¼ëŠ” Scoreê°€ ì°í˜€ìˆì—ˆê³ , í•´ë‹¹ ì›ì¸ìœ¼ë¡œëŠ” Console logì— ì—ëŸ¬ê°€ ì°íˆëŠ”ë°? ë¼ê³  ì•Œë ¤ì£¼ë”ë¼êµ¬ìš”. \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/f8871c18-0dc4-4b03-be52-0fcf92b7ab65/image.PNG)\\r\\n\\r\\nLightHouseì—ì„œ ë§í•œ ì´ìŠˆê°€ ì´ê±¸ ì˜ë¯¸í•˜ëŠ”ê±¸ê¹Œ ì‹¶ì—ˆê³  ë˜í•œ ì½˜ì†”ì— ë§ì€ ì—ëŸ¬ê°€ ì°í˜€ìˆëŠ”ê±´ ê°œë°œì ì…ì¥ì—ì„œë„ ë§¤ìš° ê±°ìŠ¬ë ¸ê¸° ë•Œë¬¸ì— ì´ë¥¼ ë³¸ê²©ì ìœ¼ë¡œ í•´ê²°í•˜ê³ ì í–ˆì–´ìš”.\\r\\n\\r\\n[í•´ë‹¹ ë¸”ë¡œê·¸](https://vaihe.com/blog/react-hydration-error-explained/)ì—ì„œ ê·¸ ì›ì¸ì„ ì°¾ì„ ìˆ˜ ìˆì—ˆì–´ìš”. ì´ ì—ëŸ¬ì˜ ì •í™•í•œ ëª…ì¹­ì€ **React Hydration** ì—ëŸ¬ì´ê³ , ì´ ì—ëŸ¬ëŠ” Client Renderì™€ Server Renderê°€ ì¼ì¹˜í•˜ì§€ ì•Šì„ë•Œ ë°œìƒí•œë‹¤ê³  í•´ìš”. \\r\\n\\r\\nGatsbyëŠ” Pre-Renderë˜ëŠ” ì†ì„±ì´ ìˆê¸° ë•Œë¬¸ì—, ì´ë•Œ ì´ Pre-Renderë˜ëŠ” HTML íŒŒì¼ê³¼ React(ëŒ€í‘œì  CSR ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ì Gatsbyì˜ ê·¼ê°„)ì—ì„œ Virtual Domìœ¼ë¡œ ìŒ“ì•„ì˜¬ë¦° HTML íŒŒì¼ê³¼ <span style=\\\"color:red\\\">ì¼ì¹˜í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ê±°ì˜ˆìš”.</span> ê·¸ë˜ì„œ Pre-Renderëœ HTML íŒŒì¼ì´ ë Œë”ë§ì´ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìì²´ì ìœ¼ë¡œ  Reactê°€ ìŒ“ì•„ì˜¬ë¦°ê±¸ë¡œ replace ë˜ë²„ë¦¬ëŠ” ê±°ì£ . \\r\\n\\r\\nì´ë ‡ê²Œ ë˜ë²„ë¦¬ë©´ ìš°ë¦¬ëŠ” Gatsbyì˜ ì¥ì ì„ ì‚´ë¦´ ìˆ˜ ì—†ì–´ìš” ğŸ˜±\\r\\n\\r\\n### í•´ê²°\\r\\nê²°êµ­ì—” ëª¨ë“  ë¬¸ì œëŠ” Serverì™€ì˜ ì—°ì‚°ì´ ìš”êµ¬ë˜ëŠ” ì½”ë“œì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ”ê±°ë¼ê³  íŒë‹¨í–ˆì–´ìš”. Pre-Render ì‹œì—ëŠ” Server ì—°ì‚°ì„ ì°¸ì¡°í•˜ì§€ ëª»í•˜ëŠ”ë°ìš”, ëŒ€í‘œì ìœ¼ë¡œ `window` ê°ì²´ë¼ëŠ”ê²Œ ë­”ì§€ë„ ëª¨ë¥´ëŠ” ìƒíƒœì—ì„œ ìš”ì²­í•˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ Validationí•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•´ìš”.\\r\\n\\r\\nì œ ë¸”ë¡œê·¸ì—ì„œ ì²« index pageë¥¼ load í• ë•Œ ê°€ì¥ ì˜ì‹¬ì´ ê°€ëŠ” ë¶€ë¶„ì€ ë°”ë¡œ ë‹¤í¬ëª¨ë“œë¥¼ handleí•  ìˆ˜ ìˆëŠ” `HeaderTheme` ì»´í¬ë„ŒíŠ¸ì˜€ì–´ìš”. ì™œëƒí•˜ë©´ localStorageë¥¼ ì°¸ì¡°í•˜ì—¬ darkì¸ì§€ lightì¸ì§€ë¥¼ ë‹´ëŠ” ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ì—ìš”. \\r\\n\\r\\nê·¸ë˜ì„œ `HeaderTheme`ì˜ í† ê¸€ ë²„íŠ¼ì´ ë¡œë”©ì„ **lazy loading**ìœ¼ë¡œ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆì–´ìš”. \\r\\n\\r\\n```tsx\\r\\n// ClientOnly.tsx\\r\\nimport React, { useState, useEffect, ReactNode, FunctionComponent } from 'react'\\r\\n\\r\\ntype ClientProps = {\\r\\n  children: ReactNode\\r\\n}\\r\\n\\r\\nconst ClientOnly: FunctionComponent<ClientProps> = function ({ children }) {\\r\\n  const [isMounted, setIsMounted] = useState<boolean>(false)\\r\\n\\r\\n  useEffect(() => {\\r\\n    setIsMounted(true)\\r\\n  }, [])\\r\\n\\r\\n  if (!isMounted) {\\r\\n    return null\\r\\n  }\\r\\n\\r\\n  return <>{children}</>\\r\\n}\\r\\n\\r\\nexport default ClientOnly\\r\\n```\\r\\n`ClientOnly`ë¥¼ `HeaderTheme` ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒë‹¨ìœ¼ë¡œ ë°°ì¹˜í•´ì„œ HTML íŒŒì¼ì´ ëª¨ë‘ ì„±ê³µì ìœ¼ë¡œ loadí›„ í† ê¸€ë²„íŠ¼ì„ ë¦¬í„´í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆì–´ìš”.\\r\\n\\r\\nì´ê±´ ì‹¤ì œë¡œ ì œê°€ í•´ê²°í•œ [PR](https://github.com/dobyming/dobyming.github.io/pull/16#issue-1723164020) ì´ì—ìš”.\\r\\n\\r\\n## SVG Icon Flicker Issue \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/c555ab5e-d15c-482f-925e-ead9b3db00ab/image.gif)\\r\\n\\r\\nì´ê±´ GIFë¥¼ ë³´ë©´ì„œ ì„¤ëª…í•˜ë©´ ë” ì´í•´ê°€ ì˜ë ê²ƒ ê°™ì•„ìš”. \\r\\ní˜¹ì‹œ `<-` ì•„ì´ì½˜ì´ ê°‘ìê¸° Resizingì´ ì¼ì–´ë‚˜ê³  ê·¸ë¦¬ê³  Dark mode Toggle ë²„íŠ¼ì€ í•´->ë‹¬ë¡œ ì ê¹ ê¹œë¹¡ì´ëŠ”ê²ƒì„ ëª©ê²©í•˜ì…¨ë‚˜ìš”? \\r\\n\\r\\nê¸°ëŠ¥ì€ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ì€ ë˜ëŠ” ë²„íŠ¼ì´ë¼ë„, ì´ëŸ° ìì˜í•œ ì—ëŸ¬ë“¤ì€ UXë¥¼ ë–¨ì–´íŠ¸ë¦¬ëŠ” ìš”ì†Œë¼ê³  ìƒê°í–ˆì–´ìš”. \\r\\n\\r\\nìš°ì„  `<-` ë²„íŠ¼ ê°™ì€ ê²½ìš°ëŠ” `fontAwesome`ì—ì„œ iconì„ importí•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆì—ˆì–´ìš”. ê·¸ë¦¬ê³  ì´ Resizing ì—ëŸ¬ê°€ ë°œìƒí•œ ì›ì¸ì€ ë‹¤ìŒê³¼ ê°™ì•˜ì–´ìš”.\\r\\n\\r\\n> Instead, they are downloaded through a separate network request and then inserted into the document using Javascript. Itâ€™s essentially DOM manipulation, which is how React (which underlies Gatsby) works. Only this time, instead of manipulating UI elements like `<div>`, it is inserting a `<style>` element. Essentially, the styles are downloaded externally and inserted into the document through DOM manipulation. ([ì¶œì²˜](https://medium.com/@fabianterh/fixing-flashing-huge-font-awesome-icons-on-a-gatsby-static-site-787e1cfb3a18))\\r\\n\\r\\nìš”ì•½í•˜ë©´, í•´ë‹¹ iconì´ inlineí•˜ê²Œ HTMLì— insertë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ `style` íƒœê·¸ë¡œ ì‚½ì…ë˜ì–´ì„œ **ì™¸ë¶€ì **ìœ¼ë¡œ downloadê°€ ì´ë¤„ì§„ í›„ì— DOMì— ì‚½ì…ì´ ë˜ì–´ì„œ ì´ëŸ° ì´ìŠˆê°€ ë°œìƒí•˜ëŠ”ê±°ë¼ê³  í•´ìš”. ì¦‰ Gatsbyì—ì„  ì´ iconì´ CSSê°€ loadë˜ì–´ ì‚½ì…ë˜ê¸° ì „ì— ì´ë¯¸ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— Resizeë˜ëŠ” í˜„ìƒì„ ëª©ë„í•˜ê²Œ ë˜ëŠ”ê±°ì—ìš”. \\r\\n\\r\\në”°ë¼ì„œ ì´ ë¬¸ì œëŠ” iconì´ CSSì— Auto Add ë˜ëŠ”ê²ƒì„ ë§‰ìœ¼ë©´ í•´ê²°í•  ìˆ˜ ìˆì–´ìš”. ì¦‰ `inline`í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•˜ëŠ”ê±°ì£ . FontAwesomeì˜ Config settingì„ í†µí•´ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆì–´ìš”. ê·¸ëŸ¬ë©´ build timeì— í•´ë‹¹ iconì´ ë‚´ì¥í•˜ê²Œ ë˜ìš”. \\r\\n\\r\\n```js\\r\\n// gatsby-browser.js\\r\\nimport '@fortawesome/fontawesome-svg-core/styles.css'\\r\\nimport { config } from '@fortawesome/fontawesome-svg-core'\\r\\n\\r\\nconfig.autoAddCss = false;\\r\\n```\\r\\n<br/>\\r\\n\\r\\n### useEffectì™€ useLayoutEffect ì ì ˆíˆ ì‚¬ìš©í•˜ê¸°\\r\\në‹¤ìŒìœ¼ë¡  ë‹¤í¬ëª¨ë“œ í† ê¸€ë²„íŠ¼ì˜ ìƒíƒœê°’ì´ í•´->ë‹¬ë¡œ ì ê¹ ë³´ì˜€ë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” ì´ìŠˆë¥¼ í•´ê²°í•  ì°¨ë¡€ì˜ˆìš”. ìš°ì„  React Developer Toolë¡œ Stateì˜ ê°ì§€ë¥¼ ì‚´í´ë´¤ì„ë• booleanê°’ì´ ì ê¹ ë°”ë€ŒëŠ” í˜„ìƒì´ ì¼ì–´ë‚˜ì§„ ì•Šì•˜ì–´ìš”. \\r\\n\\r\\nê·¸ëŸ¼ ë­ê°€ ë¬¸ì œì¸ê±¸ê¹Œ ìƒê°í–ˆì„ë•Œ, ì´ë²¤íŠ¸ê°€ Triggerë˜ëŠ” ì‹œì ì— ëŒ€í•´ì„œ ìƒê°í•´ë³´ê²Œ ëì–´ìš”. ì €ëŠ” ë‹¤í¬ëª¨ë“œ í† ê¸€ì´ ì´ë¤„ì§€ëŠ” ì´ë²¤íŠ¸ Triggerë¥¼ `useEffect` ë¦¬ì•¡íŠ¸ í›…ì„ ì´ìš©í•˜ì—¬ Triggerí–ˆì—ˆëŠ”ë°, ì´ì— ëŒ€ì í•˜ëŠ” `useLayoutEffect` ë¦¬ì•¡íŠ¸ í›…ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê¸°ë¡œ í–ˆì–´ìš”. \\r\\n\\r\\nì‚¬ì‹¤ ê¸°ì—… ë©´ì ‘ì—ì„œ `useEffect` ì™€ `useLayoutEffect`ì˜ ì°¨ì´ì ì„ ì•„ì„¸ìš”? ë¼ëŠ” ì§ˆë¬¸ì„ ë°›ì•˜ë˜ ê²½í—˜ì´ ìˆì—ˆëŠ”ë° ìŠ¬í”„ê²Œë„ ëŒ€ë‹µì„ ëª»í–ˆê³ , ë˜í•œ ì‚¬ìš©í•´ë³´ì§€ ì•Šì€ Hook ì´ì—ˆê¸° ë•Œë¬¸ì— ì´ì°¸ì— ë” ì•Œì•„ë³´ê¸°ë¡œ í–ˆì–´ìš”. ì´ [ë¸”ë¡œê·¸](https://pubudu2013101.medium.com/what-is-the-real-difference-between-react-useeffect-and-uselayouteffect-51723096dc19)ì—ì„œ ë§ì€ ë„ì›€ì„ ë°›ì•˜ì–´ìš”.\\r\\n \\r\\në‘ ë¦¬ì•¡íŠ¸ í›…ì˜ ê²°ì •ì  ì°¨ì´ëŠ” ë°”ë¡œ **ì‹œì **ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆì–´ìš”. \\r\\n#### useEffect\\r\\nuseEffect ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì´ **render ì™€ paint** ëœ í›„ ì‹¤í–‰ë¼ìš”. ì¦‰ ë¹„ë™ê¸°ì (asynchronous) ìœ¼ë¡œ ì‹¤í–‰ë˜ê³ , paintëœ í›„ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— useEffect ë‚´ë¶€ì— DOMì— ì˜í–¥ì„ ì£¼ëŠ” ì½”ë“œê°€ ìˆì„ ê²½ìš° ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” í™”ë©´ì˜ flicker í˜„ìƒì„ ë³¼ ìˆ˜ ìˆì–´ìš”. \\r\\n\\r\\n#### useLayoutEffect\\r\\nuseLayoutEffect ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì´ **render ëœ í›„ ì‹¤í–‰ë˜ë©°**, ê·¸ ì´í›„ì— paint ë˜ìš”. ì´ ì‘ì—…ì€ ë™ê¸°ì (synchronous) ìœ¼ë¡œ ì‹¤í–‰ë˜ë©° paint ê°€ ë˜ê¸°ì „ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— DOMì„ ì¡°ì‘í•˜ëŠ” ì½”ë“œê°€ ì¡´ì¬í•˜ë”ë¼ë„ ì‚¬ìš©ìëŠ” ê¹œë¹¡ì„ì„ ê²½í—˜í•˜ì§€ ì•Šì•„ìš”.\\r\\n\\r\\n\\r\\n```tsx\\r\\n// trigger theme change refer localStorage's key-value\\r\\n  useEffect(() => {\\r\\n    if (userTheme === 'dark') {\\r\\n      document.body.classList.remove('light')\\r\\n      document.body.classList.add('dark')\\r\\n      setIsDark(true)\\r\\n    } else {\\r\\n      document.body.classList.remove('dark')\\r\\n      document.body.classList.add('light')\\r\\n      setIsDark(false)\\r\\n    }\\r\\n  }, [userTheme])\\r\\n```\\r\\nê¸°ì¡´ ì½”ë“œë¥¼  ë³´ë©´, `document` ê°ì²´ì— ì ‘ê·¼í•˜ì£ ? ê·¸ë¦¬ê³  `useEffect`ë¡œ ì´ë¥¼ Triggerí•˜ê³  ìˆê¸° ë•Œë¬¸ì— í˜„ì¬ stateê°€ flickerë˜ëŠ” í˜„ìƒì„ ë³¼ ìˆ˜ ìˆì—ˆë˜ê±°ì˜ˆìš”. \\r\\n\\r\\nì´ë•Œ ì£¼ì˜í•  ì ì€ `useLayoutEffect`ëŠ” paintë˜ê¸° ì „ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— **React Hydration Issue** ë¥¼ ë§Œë‚  ìˆ˜ ìˆëŠ”ë° (í´ë¼ì´ì–¸íŠ¸í™”ë©´ !== ì„œë²„í™”ë©´) ì´ëŠ” ìƒë‹¨ì— ì œê°€ ì–¸ê¸‰í•œ Minified errorì™€ ë§ë¬¼ë¦¬ê¸° ë•Œë¬¸ì— í•´ë‹¹ validationì„ ìµœìƒë‹¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°ì•„ì£¼ë©´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì–´ìš”. \\r\\n\\r\\n### gatsby-plugin-offline í™œìš©í•˜ê¸°\\r\\nê·¸ë¦¬ê³  ì¶”ê°€ì ìœ¼ë¡œ `gatsby-plugin-offline` ì„¤ì¹˜ë¥¼ í•˜ê²Œ ë˜ë©´ ê¹œë¹¡ì„ í˜„ìƒì„ ë”ìš± ìµœì†Œí™” í•  ìˆ˜ ìˆì–´ìš”. `gatsby-plugin-offline`ì€ **Service Worker**ë¥¼ í™œìš©í•´ì„œ ì‘ë™í•©ë‹ˆë‹¤. ê·¸ëŸ¼ ì„œë¹„ìŠ¤ì›Œì»¤ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?\\r\\n> ì„œë¹„ìŠ¤ ì›Œì»¤ëŠ” ì›¹ ì‘ìš© í”„ë¡œê·¸ë¨, ë¸Œë¼ìš°ì €, ê·¸ë¦¬ê³  (ì‚¬ìš© ê°€ëŠ¥í•œ ê²½ìš°) ë„¤íŠ¸ì›Œí¬ ì‚¬ì´ì˜ í”„ë¡ì‹œ ì„œë²„ ì—­í• ì„ í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì›Œì»¤ì˜ ê°œë°œ ì˜ë„ëŠ” ì—¬ëŸ¬ê°€ì§€ê°€ ìˆì§€ë§Œ, ê·¸ ì¤‘ì—ì„œë„ íš¨ê³¼ì ì¸ ì˜¤í”„ë¼ì¸ ê²½í—˜ì„ ìƒì„±í•˜ê³ , ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ë„¤íŠ¸ì›Œí¬ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ì— ë”°ë¼ ì ì ˆí•œ í–‰ë™ì„ ì·¨í•˜ê³ , ì„œë²„ì˜ ìì‚°ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í‘¸ì‹œ ì•Œë¦¼ê³¼ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” APIë¡œì˜ ì ‘ê·¼ë„ ì œê³µí•©ë‹ˆë‹¤. (ì¶œì²˜: [MDN](https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API))\\r\\n\\r\\n![gatsby-service-worker](https://github.com/dobyming/dobyming.github.io/assets/90133704/9ab3f2eb-f665-4c5c-aeec-9f83ee2264da)\\r\\n\\r\\ní˜ì´ì§€ë¥¼ ìµœì´ˆ ìš”ì²­í• ë•Œ staticí•œ assetë“¤(SVG Icon)ì„ ë‚´ë ¤ ë°›ê³ , CacheStorageì— ì €ì¥ì„ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ìœ ì €ê°€ í–¥í›„ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì¬ë°©ë¬¸í• ë•Œ ìœ ì €ì˜ Cache Storageì— ì €ì¥ëœ assetsë“¤ì„ ì°¸ê³ í•˜ì—¬, ë¹ ë¥´ê²Œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê¹œë¹¡ì„ í˜„ìƒì„ ìµœì†Œí™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nì´ë•Œ config optionsë¥¼ í†µí•´ì„œ ì–´ëŠ í˜ì´ì§€ ë˜ëŠ” ì–´ë–¤ í´ë”ì— ëŒ€í•´ì„œë§Œ Cacheì— ë‹´ì„ ì§€ ë¶€ì—¬í•  ìˆ˜ ìˆì–´ìš”. ì´ Optionì´ í•„ìš”í•œ ì´ìœ ëŠ” ì—­ì‹œ ì‚¬ìš©ì ê²½í—˜ê³¼ ë°€ì ‘í•œ ì—°ê´€ì„ ë§ºê³  ìˆì–´ìš”. ë§Œì•½ ìµœì´ˆë¡œ ë°©ë¬¸í•˜ëŠ” ìœ ì €ì¼ ê²½ìš°ì—ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ë“¤ì„ Cacheì— ë‹´ëŠ” ì‘ì—…ì´ ìˆ˜í–‰ëœë‹¤ë©´, ì‚¬ìš©ìë³„ë¡œ Cache ì‚¬ì´ì¦ˆë„ ìƒì´í•˜ê³  ê·¸ë¦¬ê³  Band-widthë„ ìƒì´í•˜ê¸° ë•Œë¬¸ì— ì–´ë–¤ í™˜ê²½ì—ì„œëŠ” ë¹ ë¥¼ì§€ ëª°ë¼ë„, ë˜ ë‹¤ë¥¸ ìœ ì €ëŠ” ëŠë¦¬ê²Œ ëŠê»´ì§ˆ ìˆ˜ë„ ìˆì–´ìš”. \\r\\n\\r\\në”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì´ ë‚´ê°€ ì–´ë–¤ ìƒí™©ì—ì„œë§Œ cacheì‘ì—…ì„ í•˜ê² ë‹¤ëŠ” ê²ƒì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n```js\\r\\n{\\r\\n    resolve: `gatsby-plugin-offline`,\\r\\n    options: {\\r\\n        precachePages: [`/blog/*`],\\r\\n    },\\r\\n}\\r\\n```\\r\\n\\r\\n### ê²°ê³¼ë¬¼\\r\\nìœ„ ê³¼ì •ë“¤ì„ ê±°ì¹˜ê³  ë‚˜ë©´..!\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/c03d5350-d60b-44e2-a565-04f092e6f3b2/image.gif)\\r\\n\\r\\në”ì´ìƒì€ í•´ë¡œ ì ê¹ ë³´ì˜€ë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” í˜„ìƒì€ ë³¼ ìˆ˜ ì—†ê²Œ ë˜ìš”ğŸ˜™\\r\\n\\r\\n## Ongoing..\\r\\nGatsbyë¡œ ì´ê²ƒì €ê²ƒ ì ‘ëª©í•´ì„œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ë©´ì„œ ê°€ì¥ ë§ì´ ì ‘í•œ ê°œë…ì€ ë¸Œë¼ìš°ì €ì˜ ì‘ë™ë°©ì‹ì´ì—ˆì–´ìš”. ì‹¤ì œë¡œ ê°œë°œì„ ì§„í–‰í•˜ë©´ì„œ CSR, SSR, SSGì™€ ê°™ì´ ë Œë”ë§ì— ëŒ€í•œ ê°œë…ì„ ê¸°ì¡´ë³´ë‹¤ ë” ë”¥í•˜ê²Œ ì²´ê°í•˜ë©° ê°œë…ì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì„ ìˆ˜ ìˆì—ˆë˜ ì¢‹ì€ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ ê²½í—˜í–ˆë‹¤ê³  ìƒê°í•´ìš”. \\r\\n\\r\\n### +) 23.05.29 LightHouse ì ìˆ˜ ğŸ’¯\\r\\n![](https://velog.velcdn.com/images/damin1025/post/89bfd0af-9bac-4670-b46e-c27acc9d1d00/image.PNG)\\r\\n\\r\\nPerformanceì—ì„œ 2ì ì´ ë¶€ì¡±í•œë°.. 400ì ì„ ë°›ëŠ” ê·¸ë‚ ê¹Œì§€ ê³„ì†í•´ì„œ ì„±ëŠ¥ íŠœë‹ì„ ì§„í–‰í•  ì˜ˆì •ì…ë‹ˆë‹·..!ğŸ‘Š\\r\\n\\r\\n### ğŸ™‡ğŸ¼â€â™€ï¸ì°¸ê³ \\r\\n**React Hydration Issue**\\r\\n\\r\\nhttps://www.codeandweb.com/tutorials/gatsby-lazy-loading-with-react-lazy\\r\\n\\r\\nhttps://egghead.io/lessons/react-avoiding-state-flickers-in-gatsby-applications\\r\\n\\r\\nhttps://vaihe.com/blog/fixing-gatsby-hydration-flicker-issue/\\r\\n\\r\\n**Gastby SSR Issue(í•¨ê»˜ ì½ìœ¼ë©´ ì¢‹ìŒ)**\\r\\n\\r\\nhttps://stackoverflow.com/questions/64371186/gatsby-window-not-available-during-server-side-rendering-build-error\\r\\n\\r\\nhttps://www.gatsbyjs.com/docs/debugging-html-builds/#how-to-check-if-window-is-defined\",\"n\":0.032}}},{\"i\":4,\"$\":{\"0\":{\"v\":\"Gatsby ë¸”ë¡œê·¸ - TOC ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°\",\"n\":0.408},\"1\":{\"v\":\"\\r\\nğŸ¤  ê¸€ì´ ê½¤ ê¹ë‹ˆë‹¤! \\r\\n## ğŸ’­ ë™ê¸° \\r\\n\\r\\ní¬ìŠ¤íŒ…ì„ ì½ë‹¤ ë³´ë©´, ë‹¤ì‹œ ì½ê³  ì‹¶ì€ ë¶€ë¶„ìœ¼ë¡œ ëŒì•„ê°€ê³  ì‹¶ì—ˆë˜ ê²½í—˜ì´ ìˆì„ ê²ë‹ˆë‹¤. ì´ë•Œ ì¼ì¼ì´ ìŠ¤í¬ë¡¤ í•´ì„œ ë‚´ê°€ ì›í•˜ëŠ” ì½˜í…ì¸ ë¥¼ ì½ëŠ” ê²ƒì€ ì‚¬ìš©ì ê²½í—˜ì´ êµ‰ì¥íˆ ë–¨ì–´ì§€ëŠ” í–‰ìœ„ì…ë‹ˆë‹¤.\\r\\n\\r\\në”°ë¼ì„œ ë§ì€ ê°œë°œ ë¸”ë¡œê·¸ì—ëŠ” **TOC**, ì¦‰ Table Of Contentsë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì € ì—­ì‹œ ì œ ë¸”ë¡œê·¸ì— ë°©ë¬¸í•´ ì£¼ì‹œëŠ” ìœ ì €ë¶„ë“¤ê»˜ í¸ë¦¬í•¨ì„ ì œê³µí•˜ê³ ì TOC ê¸°ëŠ¥ì„ ì œì‘í•˜ê³  êµ¬í˜„ì— ì§„í–‰í–ˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nVelogë‚˜ ë‹¤ë¥¸ ê°œë°œ ë¸”ë¡œê·¸ë“¤ì—ì„œ ë´¤ì„ ë• ë³µì¡í•  ê±°ë¼ê³  ìƒê°ì€ ì•ˆ í–ˆëŠ”ë°, ì—­ì‹œ ë§Œë§Œí•œ ê±´ ì•„ë¬´ê²ƒë„ ì—†ì—ˆìŠµë‹ˆë‹¤ğŸ˜… \\r\\n\\r\\n## ê²°ê³¼ \\r\\n\\r\\në¨¼ì € êµ¬í˜„ ê²°ê³¼ë¶€í„° ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. \\r\\n\\r\\nìŠ¤í¬ë¡¤ ì‹œ, ì¼ì • ìœ„ì¹˜ì— headingì´ scope ì‹œ ì˜¤ë¥¸ìª½ì— ìˆëŠ” TOCì˜ ê°ê°ì˜ ìš”ì†Œë“¤ì— active ê°’ì´ í™œì„±í™”ë¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n![](https://velog.velcdn.com/images/damin1025/post/021cd97b-05b8-470c-8d95-1c82fe32e9e7/image.gif)\\r\\n\\r\\nê·¸ë¦¬ê³  ê° ì½˜í…ì¸ ë¥¼ í´ë¦­ ì‹œ, ì•Œë§ëŠ” headingìœ¼ë¡œ direct í•˜ê²Œ ì´ë™í•©ë‹ˆë‹¤.\\r\\n![](https://velog.velcdn.com/images/damin1025/post/ed65ab46-8384-4b63-8db1-f060334ae8a5/image.gif)\\r\\n\\r\\nê·¸ëŸ¼ ì œê°€ ì–´ë–¤ flowë¡œ TOC ê¸°ëŠ¥ì„ ê°œë°œí–ˆëŠ”ì§€ íšŒê³ í•˜ê³ ì í•©ë‹ˆë‹¤. \\r\\n\\r\\n## headerë¥¼ ì–´ë–»ê²Œ ê°–ê³  ì˜¬ê²ƒì¸ê°€?\\r\\nìš°ì„  TOC ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë° ìˆì–´, ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ í¬ìŠ¤íŒ…ì— ìˆëŠ” headerë¥¼ ì–´ë–»ê²Œ ê°–ê³  ì˜¬ ê²ƒì¸ê°€ì…ë‹ˆë‹¤. ë‹¹ì—°í•˜ê²Œë„ `gatsby-node.js`ì—ì„œ GraphQLë¡œ ìš”ì²­í•´ì•¼ í•˜ëŠ”ë°, ì´ë•Œ ì–´ë–¤ í•„ë“œë¥¼ ì°¸ì¡°í•  ê²ƒì¸ê°€ë¥¼ ìƒê°í•´ ë´ì•¼ í•©ë‹ˆë‹¤.\\r\\n\\r\\n1) `tableOfContents` í•„ë“œë¥¼ í™œìš©í•˜ê¸°\\r\\n`tableOfContents` í•„ë“œë¥¼ GraphQLë¡œ ìš”ì²­í•˜ì—¬ `dangerouslySetInnerHTML`ì— __html ìš”ì†Œë¡œ Propsë¥¼ ë³´ë‚´ì„œ ë Œë”ë§ í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\\r\\n![](https://velog.velcdn.com/images/damin1025/post/dde204d0-a5ed-41f9-808e-dc0ab46cfef6/image.PNG)\\r\\n\\r\\n\\r\\n2) `headings` í•„ë“œì˜ depthì™€ valueë¥¼ í™œìš©í•˜ê¸° \\r\\n![](https://velog.velcdn.com/images/damin1025/post/eacbf940-6312-4203-8750-93f29f440712/image.PNG)\\r\\n\\r\\nì—¬ê¸°ì„œ depthëŠ” h1, h2,...ì—ì„œ ìˆ«ìì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ê³ , valueëŠ” ì œëª©ì…ë‹ˆë‹¤. ì €ëŠ” ì§ì ‘ depthë¥¼ handle í•˜ì—¬ CSSë„ Styling í•  ê²ƒì´ê³ , ê·¸ë¦¬ê³  ë°°ì—´ì„ ëŒë©´ì„œ valueë¥¼ TOC ì»´í¬ë„ŒíŠ¸ì— ë Œë”ë§ í•˜ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì— 1ë²ˆë³´ë‹¨ 2ë²ˆ ë°©ë²•ì„ íƒí–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## Valueë¥¼ ì–´ë–»ê²Œ slugí™” í• ê²ƒì¸ê°€?\\r\\në³´í†µ `tableOfContents` í•„ë“œë¥¼ í™œìš©í•´ì„œ êµ¬í˜„í•œë‹¤ë©´ slugë¥¼ ìì²´ì ìœ¼ë¡œ ì•Œì•„ì„œ ë§Œë“¤ì–´ì„œ `href`ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê°’ì´ ë¶€ì—¬ë˜ëŠ”ë°, ì €ê°™ì€ ê²½ìš°ëŠ” `headings`ë¥¼ í™œìš©í•˜ê¸° ë•Œë¬¸ì— **ì œëª©ì„ ì–´ë–»ê²Œ slug í™”í•  ê²ƒì¸ê°€**ë¥¼ ê³ ë¯¼í•´ ë´¤ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nì •ë§ npmì€ ì—†ëŠ”ê²Œ ì—†êµ°ìš”.. [github-slugger](https://www.npmjs.com/package/github-slugger) ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ í†µí•´ì„œ slugì— ëŒ€í•œ ê³ ë¯¼ì„ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ npmìœ¼ë¡œ ì„¤ì¹˜í•˜ê³ , `slug(value)` ë©”ì„œë“œë§Œ ì„ ì–¸í•˜ë©´ ì•Œì•„ì„œ value(ì œëª©)ë¥¼ slugí™” í•´ì£¼ëŠ” ì•„ì£¼ ì¹œì ˆí•œ íŒ¨í‚¤ì§€ë¥¼ í™œìš©í•˜ì—¬ í•´ë‹¹ ê³ ë¯¼ì„ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.  \\r\\n\\r\\n## Data íë¦„ì€? \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/6f0fe709-8358-4507-aba0-ca1bc62cb64a/image.PNG)\\r\\n\\r\\në°ì´í„° íë¦„ì€ ìœ„ì™€ ê°™ì´ `post_template.tsx` (í¬ìŠ¤íŒ… í…œí”Œë¦¿)ì—ì„œ GraphQLë¡œ ìš”ì²­í•œ headings(depth,value)ë¥¼ `PostTOC.tsx` ì— ì „ë‹¬í•˜ëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„í•˜ê³  êµ¬í˜„ì— ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## TOC ì»´í¬ë„ŒíŠ¸ Styling \\r\\n\\r\\nì ê·¸ëŸ¼ GraphQLë¡œ ìš”ì²­í•œ headingsë“¤ì„ ì´ì˜ê²Œ Renderí•˜ê¸° ìœ„í•´  Styling ì‘ì—…ì„ í•´ì•¼ í•©ë‹ˆë‹¤. \\r\\n\\r\\nì‚¬ì‹¤ TOC ê¸°ëŠ¥ì„ ë§Œë“¤ë©´ì„œ ê½¤ ì‹œê°„ì„ ë§ì´ ë“¤ì˜€ë˜ ë¶€ë¶„ì´ ë°”ë¡œ ì´ Styling ë¶€ë¶„ì´ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. CSSì ìœ¼ë¡œ deepí•˜ê²Œ MockUp í–ˆê³ .. ë”°ë¼ì„œ ì´ê±´ ë³¸ì¸ì´ ìŠ¤ìŠ¤ë¡œ ê³ ë¯¼í•˜ë©´ì„œ ë§Œë“œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ì œ ì½”ë“œë¥¼ ë´ë„ ë³¸ì¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë˜ ì ìš©ì´ ì•ˆë ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤ ã…   \\r\\n\\r\\nì´ê±´ ì œê°€ Schemeí•œ ë¶€ë¶„ì…ë‹ˆë‹¤. \\r\\n![](https://velog.velcdn.com/images/damin1025/post/dd2ad444-f17c-4215-9d85-52ff52623c6d/image.jpg)\\r\\nì´ëŸ°ì‹ìœ¼ë¡œ ë³¸ì¸ì´ ìŠ¤ìŠ¤ë¡œ í•œë²ˆ êµ¬ìƒí•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤ ğŸ£ ê·¸ë¦¬ê³  í¬ìŠ¤íŒ…ì„ ì½ì„ë•Œ, TOC ì»´í¬ë„ŒíŠ¸ê°€ **ì¼ì • ìœ„ì¹˜ì— ê³ ì •**ë˜ë„ë¡ êµ¬í˜„í•˜ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì— `Sticky` ì†ì„±ì„ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\në˜í•œ ë‹¤í¬ëª¨ë“œë¡œ ì „í™˜ ì‹œ, ì½˜í…ì¸ ë“¤ì˜ ê¸€ììƒ‰ë“¤ì´ ë°”ë€Œì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— bodyì˜ classListê°€ 'dark'ë©´ ë°”ë€” ìˆ˜ ìˆë„ë¡ ê°’ì„ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n```css\\r\\na {\\r\\n\\tcolor: ${\\r\\n    isBrowser() && window.document.body.classList.contains('dark')\\r\\n\\t};\\r\\n    text-decoration: none;\\r\\n}\\r\\n```\\r\\n\\r\\n## Scrollì‹œ ê° headerì— ë§ê²Œ Active ê¸°ëŠ¥ ë¶€ì—¬í•˜ê¸°\\r\\n\\r\\nScrollì‹œ ê° Headerì— ë§ê²Œ Activeí•˜ëŠ” ê¸°ëŠ¥ì„ ì–´ë–»ê²Œ êµ¬í˜„í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ê³ ë¯¼í•´ë´¤ì„ë•Œ, ì €ëŠ” Scrollê°’ê³¼ offsetTopê°’ì„ í™œìš©í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ê²ƒìœ¼ë¡œ êµ¬ìƒí–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n`InterSectionObserver` APIë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ë¬¼ë¡  í¼í¬ë¨¼ìŠ¤ì ìœ¼ë¡œ ì¢‹ë‹¤ëŠ” ì§€í‘œë„ ìˆì§€ë§Œ, ìš°ì„  ì•„ì§ ì €ì˜ ë¬´ì§€í•¨ìœ¼ë¡œ ì¸í•´.. êµ¬ìƒë¶€í„° ì˜ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤ğŸ™.. Learning Curveê°€ ìˆê¸°ì— ì¢€ ë” ìµìˆ™í•´ì§€ë©´ í•´ë‹¹ ë°©ë²•ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê³ ë ¤í•  ìˆ˜ ìˆì„ê²ƒ ê°™ìŠµë‹ˆë‹¤.  \\r\\n\\r\\në”°ë¼ì„œ ì œê°€ ìƒê°í•œ ë°©ë²•ì€ Scrollê°’ì— ë”°ë¼ headings ë°°ì—´ì„ ëŒë©´ì„œ ì¼ì • offsetTop ê°’ì— ë„ë‹¬í•˜ë©´ Index ê°’ì„ ì°¸ì¡°í•˜ì—¬ active í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì–´ë–¨ê¹Œ? ë¡œ êµ¬ìƒí–ˆê³  ì´ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„ì— ì§„í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\n// PostTOC.tsx\\r\\nconst calcActive = useCallback(() => {\\r\\n    if (!isBrowser) {\\r\\n      return 0\\r\\n    }\\r\\n    const offsets: number[] = []\\r\\n\\r\\n    // bring each headings offsetTop\\r\\n    for (const { slug } of headers) {\\r\\n      const element = document.getElementById(slug)\\r\\n      if (!element) {\\r\\n        return\\r\\n      }\\r\\n      offsets.push(element.offsetTop - 10)\\r\\n    }\\r\\n\\r\\n    const maxIndex = offsets.length - 1\\r\\n    const { scrollY } = window\\r\\n    let index = 0\\r\\n\\r\\n    // Scroll Active Trigger (looping the offset)\\r\\n    if (scrollY === 0 || scrollY <= offsets[0]) {\\r\\n      index = 0\\r\\n    } else if (\\r\\n      window.innerHeight + scrollY >= document.body.scrollHeight ||\\r\\n      scrollY >= offsets[maxIndex]\\r\\n    ) {\\r\\n      index = maxIndex\\r\\n    } else {\\r\\n      index = findIndex(offsets, offset => offset >= scrollY) - 1\\r\\n    }\\r\\n    return index\\r\\n  }, [headers])\\r\\n```\\r\\n\\r\\n`headers` ë°°ì—´ì„ ì°¸ì¡°í•˜ì—¬ valueë¥¼ slugí™” í•œ ê°ê°ì˜ íƒœê·¸ë¥¼ `element`ë¡œ ë¶ˆëŸ¬ì˜¤ê³ , ê°ê°ì˜ offsetTop ê°’ì„ `offsets` ë°°ì—´ì— ë‹´ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•˜ë©´ `offsets` ë°°ì—´ì€ document ê¸°ì¤€ì˜ ê° headerë“¤ì˜ ìœ„ì¹˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. \\r\\n\\r\\nê·¸ë¦¬ê³  ìŠ¤í¬ë¡¤ í• ë•Œë§ˆë‹¤ Yì¶•ì˜ ê°’ì„ ë°˜í™˜í•˜ëŠ” `scrollY` ë¥¼ í†µí•´ì„œ, 3ê°€ì§€ ìƒí™©ìœ¼ë¡œ ì¡°ê±´ë¬¸ì„ ë¶„ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì‚¬ì‹¤ ê¸€ë³´ë‹¨ ì½”ë“œê°€ ë” ì´í•´ê°€ ì˜ ë ê²ƒ ê°™ê¸´ í•©ë‹ˆë‹¤ğŸ˜…)\\r\\n\\r\\n1. ë§Œì•½ `scrollY` ê°’ì´ 0(ë§¨ìœ„) ë˜ëŠ” `offsets[0]`(ê°€ì¥ ì²«ë²ˆì§¸ header ë¬¸êµ¬) ë³´ë‹¤ ì‘ê±°ë‚˜(ë‹¿ê¸°ì§ì „) í•´ë‹¹ ìœ„ì¹˜ì— ë„ë‹¬ í–ˆë‹¤ë©´? : **index = 0ìœ¼ë¡œ ë¶€ì—¬** \\r\\n\\r\\n2. `scrollY` ê°’ì´ `offset[maxIndex]`ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ë•Œ(ë§ˆì§€ë§‰ headerë¬¸êµ¬ ìœ„ì¹˜ì™€ ê°™ê±°ë‚˜ ì§€ë‚˜ì³¤ì„ë•Œ) ë˜ëŠ” windowì˜ innerHeightì™€ `scrollY` ë¥¼ í•©ì¹œ ê°’ì´ document ê¸°ì¤€ì˜ scrollHeightë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ë•Œ(ë§ˆì§€ë§‰ headerë¬¸êµ¬ë¥¼ ì§€ë‚˜ì¹œê±´ ì•„ë‹ˆì§€ë§Œ, ScrollHeight(ìŠ¤í¬ë¡¤í•˜ì§€ ì•Šì•˜ì„ë•Œ ì „ì²´ ë†’ì´)ë¥¼ ë„˜ê²¼ì„ë•Œ) : **index = maxIndexë¡œ ë¶€ì—¬** \\r\\n\\r\\n3. 1,2ì— í•´ë‹¹í•˜ì§€ ì•Šì„ë•Œ \\r\\n\\r\\nê·¸ë˜ì„œ ì´ `index`ë¥¼ í™œìš©í•´ì„œ eventë¥¼ triggerí•©ë‹ˆë‹¤. \\r\\n```tsx\\r\\n// PostTOC.tsx\\r\\nconst [currentIndex, setCurrentIndex] = useState<number | undefined>(0)\\r\\n\\r\\n  useEffect(() => {\\r\\n    setCurrentIndex(calcActive())\\r\\n    const onScrollForActive = throttle(() => setCurrentIndex(calcActive()), 300)\\r\\n    window.addEventListener('scroll', onScrollForActive)\\r\\n\\r\\n    return () => {\\r\\n      onScrollForActive.cancel()\\r\\n      window.removeEventListener('scroll', onScrollForActive)\\r\\n    }\\r\\n  }, [calcActive])\\r\\n```\\r\\n`useEffect()` Hookì„ í™œìš©í•˜ì—¬ `calcActive`ì— ë”°ë¼ eventê°€ Triggerë  ìˆ˜ ìˆë„ë¡ dependency Arrayì— í• ë‹¹í•©ë‹ˆë‹¤. \\r\\n\\r\\nì´ë•Œ Scrollì‹œ, ë§¤ë²ˆ offsetTop ê°’ê³¼ ScrollYê°’ì„ ì—°ì‚°í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€ ìŠ¤ë ˆë“œì— ì¡°ê¸ˆì´ë¼ë„ ìµœì í™” í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ Scrollì‹œ, ë§¤ë²ˆ ì—°ì‚°í•˜ê¸° ë•Œë¬¸ì— consoleì„ ì°ì–´ë³´ë©´ ê°’ë“¤ì´ ë¬´ìˆ˜íˆ ì°íˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\\r\\n\\r\\në”°ë¼ì„œ ì €ëŠ” [lodash-es](https://www.npmjs.com/package/@types/lodash-es)ì—ì„œ ì œê³µí•˜ëŠ” `throttle()` ë©”ì†Œë“œë¥¼ í™œìš©í•˜ì—¬ Scroll Eventë¥¼ ìµœì í™” í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” Scrollì‹œ ë§¤ë²ˆ ìš”ì²­ë˜ëŠ” callì„ `SetTimeOut()` ì—°ì‚°ê³¼ ê°™ì€ êµ¬ì¡°ë¡œ, 300msë¥¼ ê¸°ë‹¤ë ¸ë‹¤ê°€ `onScrollForActive`ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\n// PostTOC.tsx\\r\\n<ol>\\r\\n{headers.map(({ value, depth }, idx) => (\\r\\n\\t<li\\r\\n    key={idx}\\r\\n    style={{ paddingLeft: `${depth * 11}px` }}\\r\\n    className={currentIndex === idx ? 'active' : ''}\\r\\n    >\\r\\n\\t\\t// ...\\r\\n\\t</li>\\r\\n    ))}\\r\\n</ol>\\r\\n```\\r\\n`calcActive()` í•¨ìˆ˜ì˜ ë¦¬í„´ indexê°€ `useState` Hookì˜ í˜„ì¬ stateë¡œ ë‹´ê¸°ëŠ” `currentIndex`ì— ë‹´ê¸°ë©´ì„œ, ì‹¤ì œ ol íƒœê·¸ë‚´ì—ì„œ headers ë°°ì—´(`PostTOC` ì»´í¬ë„ŒíŠ¸ ìƒë‹¨ì—ì„œ `useMemo()`ë¥¼ í†µí•´ ì—°ì‚°í•œ ê°’ì„ ì¬ì‚¬ìš© í–ˆìŠµë‹ˆë‹¤.) ì„ ë„ëŠ” idx ê°’ê³¼ ë¹„êµí•˜ê²Œ ë˜ë©´ì„œ `currentIndex`ì™€ ì¼ì¹˜í•˜ëŠ” idxì— ëŒ€í•´ì„œë§Œ active í™œì„±í™”ë¥¼ ë¶€ì—¬í•˜ê²Œ ë˜ë©´, Scrollì‹œ boldì²´ë¡œ í™œì„±í™” ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n(*`li`íƒœê·¸ ì—ì„œ styleì€ indentationì„ ì£¼ê¸° ìœ„í•´ì„œ depthë¥¼ í™œìš©í•œ ê²ƒì…ë‹ˆë‹¤.)\\r\\n\\r\\n## headerì— ë§ëŠ” hrefë¡œ ì´ë™í•˜ê¸° \\r\\nê·¸ë¦¬ê³  `a` íƒœê·¸ì— href ê°’ìœ¼ë¡œ `slug(value)`ë¥¼ í• ë‹¹í•˜ê²Œ ë˜ë©´ í—¤ë”ì— ë§ëŠ” ìœ„ì¹˜ë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\n// PostTOC.tsx\\r\\n//...\\r\\n<a data-idx={idx} href={`#${slug(value)}`}>\\r\\n\\t{value}\\r\\n</a>\\r\\n//...\\r\\n```\\r\\n\\r\\n### ğŸª“ Issue Handle  \\r\\n![2023-05-16 11;09;11](https://github.com/dobyming/dobyming.github.io/assets/90133704/d9c2b8db-6934-4e50-9e93-bc0d5eb196f3)\\r\\n\\r\\nTestingì„ í•˜ë˜ ì¤‘, consoleì— ì´ëŸ° error logê°€ ì°í˜”ìŠµë‹ˆë‹¤. ê³µí†µì ì„ ë³´ë‹ˆ, ìˆ«ìë¡œ ì‹œì‘í•˜ëŠ” í—¤ë”ë¥¼ `querySelector`ê°€ parsingì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤ëŠ” ë¥˜ì˜ ì—ëŸ¬ì˜€ìŠµë‹ˆë‹¤. (TOC ì»¨í…Œì´ë„ˆì— í•´ë‹¹í•˜ëŠ” í—¤ë”ê°’ì„ í´ë¦­ ì‹œ, í•´ë‹¹í•˜ëŠ” í—¤ë”ë¡œ ì´ë™í•˜ì§€ë„ ì•Šì•˜ìŠµë‹ˆë‹¤.) \\r\\n\\r\\n```tsx\\r\\nconst heading = document.querySelector<HTMLHeadingElement>(href)\\r\\nif (!heading) {\\r\\n\\treturn\\r\\n}\\r\\n\\r\\nwindow.scrollTo({\\r\\n\\ttop: heading.offsetTop,\\r\\n  behavior: 'smooth',\\r\\n })\\r\\n```\\r\\n\\r\\në¬¸ì œê°€ ë°œìƒí•œ ì½”ë“œì˜€ê³  [StackOverflow](https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document)ì—ì„œ ë³´ë‹ˆ, `querySelctor`ëŠ” ìˆ«ìë¡œ ì‹œì‘í•˜ëŠ” headingì€ ì¸ì‹í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìœ„ì˜ ì½”ë“œëŠ” ê³¼ê°íˆ ì œê±°í•˜ê³ , `a` íƒœê·¸ì˜ `href`ì— slugí™” í•œ valueë¥¼ í• ë‹¹í•˜ì—¬ ìˆ«ìë¡œ ì‹œì‘í•˜ëŠ” slugë„ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## ğŸ”® í›„ê¸° \\r\\nì¼ì£¼ì¼ ê°€ê¹Œì´? ì‹œê°„ì„ ìŸê³  ë‚˜ë¦„ ê³ ìƒí•˜ë©´ì„œ ë§Œë“¤ì—ˆë„¤ìš”.. ê¸°ëŠ¥ ê°œë°œì—ì„œ ë§ì€ ê³ ë¯¼ê³¼ ì‹œê°„ì„ íˆ¬ìí•´ì„œ ê·¸ëŸ°ì§€ ë” ì†Œì¤‘í•˜ê²Œ ë‹¤ê°€ì˜µë‹ˆë‹¤. ì˜ì™¸ë¡œ CSS ìŠ¤íƒ€ì¼ë§ë„ ë‚´ê°€ ì•„ëŠ”ê²Œ ë‹¤ ì•„ë‹ˆì—ˆêµ¬ë‚˜ë¥¼ ë˜ ê¹¨ë‹¬ìœ¼ë©° ì—­ì‹œ ê³„ì† ë°°ì›Œì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ë˜ feature ê°œë°œì´ì—ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nì„±ëŠ¥ìƒ ìµœì í™”í•´ì•¼ í•  ë¶€ë¶„ì´ ë‚¨ì€ ìˆ™ì œê² ë„¤ìš”! ê·¸ë˜ë„ ìŠ¤ìŠ¤ë¡œ TOC ê¸°ëŠ¥ì„ ë§Œë“ ê±´ ê½¤ë‚˜ ë¿Œë“¯í•©ë‹ˆë‹¤.ğŸ˜Š\",\"n\":0.031}}},{\"i\":5,\"$\":{\"0\":{\"v\":\"Gatsbyì—ì„œ í˜ì´ì§€ ë¼ìš°íŒ… í•˜ëŠ”ë²•\",\"n\":0.5},\"1\":{\"v\":\"\\r\\n## Gatsbyì—ì„œ í˜ì´ì§€ ë¼ìš°íŒ…í•˜ê¸° \\r\\n\\r\\nGatsbyì—ì„œ í˜ì´ì§€ê°„ ë¼ìš°íŒ… í•˜ëŠ” ë°©ì‹ì€ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nì²«ë²ˆì§¸ëŠ” `a` íƒœê·¸ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. pages í´ë” ë‚´ì— ì„ ì–¸ëœ íŒŒì¼ë“¤ì€ '/íŒŒì¼ëª…'ìœ¼ë¡œ í˜ì´ì§€ ê°„ ì´ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. \\r\\ní•˜ì§€ë§Œ React ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ëœ í”„ë ˆì„ì›Œí¬ì¸ Gatsbyë¥¼ ê°íˆ ë§¤ë²ˆ í˜ì´ì§€ ì´ë™ ì‹œ, refresh ë˜ê²Œ êµ¬í˜„í•˜ë©´... ì´ê±¸ë¡œ ì™œ ê°œë°œ í•˜ëƒêµ¬ìš” (UXë„ ë§¤ìš° ì €í•˜ë˜êµ¬ìš”) \\r\\n\\r\\n\\r\\n## Gatsby Link API í™œìš©í•˜ê¸° \\r\\n\\r\\nGatsbyì—ì„œ ì œê³µí•˜ëŠ” í˜ì´ì§€ ì´ë™ APIì¸  <span style=\\\"color:red\\\">Gatsby Link API</span>ì„ í™œìš©í•˜ì—¬ í˜ì´ì§€ ê°„ ë¼ìš°íŒ…ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ APIë¥¼ í†µí•´ í˜ì´ì§€ ì´ë™ì„ êµ¬í˜„í•˜ë©´ ë³´ë‹¤ ë” ë†’ì€ ì„±ëŠ¥ì˜ ì •ì  ì‚¬ì´íŠ¸ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n### Usage\\r\\n```tsx\\r\\nimport { Link } from 'gatsby'\\r\\n<Link to=\\\"/info/\\\">To Info</Link>\\r\\n```\\r\\nê¸°ë³¸ì ì¸ ì‚¬ìš©ë°©ë²•ì€ ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤. `Link`ë¥¼ import í›„, Link íƒœê·¸ì˜ toì˜ propsë¡œ ì´ë™í•  í˜ì´ì§€ëª…ì„ ì ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. \\r\\n\\r\\ní•´ë‹¹ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ ì‹œ, a íƒœê·¸ë¥¼ ì‚¬ìš©í–ˆì„ë•Œë³´ë‹¤ Linkíƒœê·¸ë¥¼ í™œìš©í•˜ì—¬ í˜ì´ì§€ ê°„ ë¼ìš°íŒ… ë°©ì‹ì´ í›¨ì”¬ ë” ë§¤ë„ëŸ½ê³  ì†ë„ë„ í–¥ìƒë¨ì„ ì²´ê°í•  ìˆ˜ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤. \\r\\n\\r\\nê·¸ëŸ¬ë©´ ìš°ë¦¬ëŠ” ì™œ ì´ëŸ´ ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ê·¼ê±°ê¹Œì§€ ì•Œì•„ë´ì•¼ê² ì£ \\r\\n\\r\\n### Gatsby Link APIì˜ ì„±ëŠ¥ìƒ ì´ì \\r\\nê¶ê·¹ì ì¸ ê·¼ê±°ëŠ” GatsbyëŠ” **Prefetch**ë¥¼ í†µí•´ì„œ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ë¦¬ì†ŒìŠ¤ì˜ ë¡œë”© ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nì¦‰ PrefetchëŠ” ì´ì™€ ê°™ì€ ê°œë…ì…ë‹ˆë‹¤. \\r\\n\\r\\n1. í˜ì´ì§€ê°€ ë¡œë“œê°€ ëŒ -> í˜„ì¬ ë¡œë“œëœ í˜ì´ì§€ ë‚´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ë§í¬ ì°¾ì€ í›„ -> ê° ë§í¬ì˜ í˜ì´ì§€ë¥¼ <span style=\\\"color:red\\\">ë¯¸ë¦¬</span> ë¡œë“œ \\r\\n2. ì¦‰ ì˜ˆë¥¼ ë“¤ë©´, `index.tsx` í˜ì´ì§€ ë¡œë“œê°€ ë¨ -> ë™ì‹œì— `Link` íƒœê·¸ë¥¼ ì°¾ìŒ(`/info`) -> ì´ í˜ì´ì§€(`info`)ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•´ë‘  \\r\\n\\r\\n\",\"n\":0.071}}},{\"i\":6,\"$\":{\"0\":{\"v\":\"Gatsby - GraphQLë¡œ query ìš”ì²­í•˜ê¸°\",\"n\":0.447},\"1\":{\"v\":\"\\r\\n## GraphQLì´ë€?\\r\\nGraphQLì€ í˜ì´ìŠ¤ë¶ì—ì„œ ê°œë°œí•œ **ì¿¼ë¦¬ ì–¸ì–´**ì…ë‹ˆë‹¤.\\r\\nê°ê°ì˜ ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ê³ ì •ëœ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” Rest APIì™€ëŠ” ë‹¤ë¥´ê²Œ GraphQLì€ <span style=\\\"color:red\\\">**ë‹¨ì¼ ì—”ë“œí¬ì¸íŠ¸**</span>ì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë§Œì„ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nì •ì  ì›¹ì‚¬ì´íŠ¸ì˜ ì½˜í…ì¸  ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ìˆì–´ GraphQLë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## Gatsbyì—ì„œ GraphQLì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•\\r\\n\\r\\nê·¸ëŸ¼ Gatsbyì—ì„œ GraphQLë¡œ queryë¡œ ìš”ì²­í•´ì„œ ì›¹ì‚¬ì´íŠ¸ë¡œ ê°’ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. \\r\\n\\r\\nìš°ì„  `pages` í´ë” ë‚´ì— `info.tsx`ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\nimport React, { FunctionComponent } from 'react'\\r\\nimport { graphql } from 'gatsby'\\r\\nimport Text from 'components/Text'\\r\\n\\r\\ntype InfoPageProps = {}\\r\\n\\r\\nconst InfoPage: FunctionComponent<InfoPageProps> = function () {\\r\\n  return (\\r\\n    <div>\\r\\n      <Text text=\\\"Hello\\\" />\\r\\n    </div>\\r\\n  )\\r\\n}\\r\\n\\r\\nexport default InfoPage\\r\\n```\\r\\nì¼ë°˜ì ì¸ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë³€ìˆ˜ë¡œì„œ ì •ì˜ê°€ ë¶ˆê°€ëŠ¥í•˜ê³ , **StaticQuery**ë¼ëŠ” ê¸°ëŠ¥ì„ í†µí•´ ì •ì˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. pages í´ë” ë‚´ë¶€ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ Queryë¥¼ ì •ì˜í•˜ê³  ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n```tsx\\r\\nimport React, { FunctionComponent } from 'react'\\r\\nimport { graphql } from 'gatsby'\\r\\nimport Text from 'components/Text'\\r\\n\\r\\ntype InfoPageProps = {}\\r\\n\\r\\nconst InfoPage: FunctionComponent<InfoPageProps> = function () {\\r\\n  return (\\r\\n    <div>\\r\\n      <Text text=\\\"Hello\\\" />\\r\\n    </div>\\r\\n  )\\r\\n}\\r\\n\\r\\nexport default InfoPage\\r\\n\\r\\n// query ìš”ì²­ ë¶€ \\r\\nexport const metadataQuery = graphql`\\r\\n  {\\r\\n    site {\\r\\n      siteMetadata {\\r\\n        title\\r\\n        description\\r\\n        author\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n`\\r\\n```\\r\\n\\r\\n`metadataQuery` ë³€ìˆ˜ì— ìš”ì²­í•œ Queryë¥¼ ìš”ì²­ ì‹œ, ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ê°’ì€ `InfoPage` ì»´í¬ë„ŒíŠ¸ì˜ Propsë¡œ ì „ë‹¬í•´ì¤ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ `InfoPage` ì»´í¬ë„ŒíŠ¸ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ê°’ì„ ë¶ˆëŸ¬ì˜¤ë©´ì„œ Gatsbyì—ì„œ GraphQLì„ í†µí•œ Query ìš”ì²­ ì‘ì—…ì´ ë§ˆë¬´ë¦¬ ë©ë‹ˆë‹¤. \\r\\n```tsx\\r\\nimport React, { FunctionComponent } from 'react'\\r\\nimport { graphql } from 'gatsby'\\r\\nimport Text from 'components/Text'\\r\\n\\r\\n// ìš”ì²­í•œ Queryì˜ ë°ì´í„° êµ¬ì¡°ì— ë”°ë¼ typeì„ ì§€ì • \\r\\ntype InfoPageProps = {\\r\\n  data: {\\r\\n    site: {\\r\\n      siteMetadata: {\\r\\n        title: string\\r\\n        description: string\\r\\n        author: string\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n// ë§¤ê°œë³€ìˆ˜ë¡œ ìš”ì²­í•œ Queryë¥¼ Propsë¡œ ì „ë‹¬ \\r\\nconst InfoPage: FunctionComponent<InfoPageProps> = function ({\\r\\n  data: {\\r\\n    site: {\\r\\n      siteMetadata: { title, description, author },\\r\\n    },\\r\\n  },\\r\\n}) {\\r\\n  return (\\r\\n    <div>\\r\\n      <Text text={title} />\\r\\n      <Text text={description} />\\r\\n      <Text text={author} />\\r\\n    </div>\\r\\n  )\\r\\n}\\r\\n\\r\\nexport default InfoPage\\r\\n\\r\\nexport const metadataQuery = graphql`\\r\\n  {\\r\\n    site {\\r\\n      siteMetadata {\\r\\n        title\\r\\n        description\\r\\n        author\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n`;\\r\\n```\\r\\n\\r\\nì´ì™€ ê°™ì´ Gatsbyì—ì„œ GraphQLì„ í†µí•´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µë°›ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \",\"n\":0.058}}},{\"i\":7,\"$\":{\"0\":{\"v\":\"Gatsby ë¸”ë¡œê·¸ - ë‹¤í¬ëª¨ë“œ êµ¬í˜„ê¸°ğŸŒ—\",\"n\":0.447},\"1\":{\"v\":\"\\r\\nìš°ì„  ê¸€ì„ ì‹œì‘í•˜ê¸° ì „ì—.. 5ì›” 24ì¼ ë¶€ë¡œ ë¸”ë¡œê·¸ ê°œë°œì„ ì‹œì‘í•œì§€ 1ë‹¬ ë„˜ì€ ì‹œì ì—ì„œ 100ê°œì˜ commitì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤..ğŸ¥³\\r\\n\\r\\n<div style=\\\"text-align:center\\\"><img src=\\\"https://velog.velcdn.com/images/damin1025/post/0e0117f4-e670-4a3c-a849-c5eadf34c786/image.PNG\\\" /></div>\\r\\n\\r\\n\\r\\nì €ì—ê²Œ ì´ `ê°œë°œ ë¸”ë¡œê·¸` í”„ë¡œì íŠ¸ëŠ” **í”„ë¡ íŠ¸ì—”ë“œê°€ ë­”ì§€ ì œëŒ€ë¡œ ë³´ì—¬ì¤€** í”„ë¡œì íŠ¸ë‚˜ ë‹¤ë¦„ ì—†ì–´ì„œ ë°°ìš´ê²Œ ì •ë§ ë§ì€ ê³ ë§ˆìš´ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. ë§Œì•½ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ë‚´ ì»¤ë¦¬ì–´íŒ¨ìŠ¤ë¡œ ë°Ÿê³  ì‹¶ë‹¤ê³  í•œë‹¤ë©´ ìì‹ ë§Œì˜ ë¸”ë¡œê·¸ ë§Œë“œëŠ” ê²ƒì„ ì ê·¹ ì¶”ì²œí•  ì •ë„ë¡œ ë°°ìš¸ê²Œ ì •ë§ ë§ê³  ì¢‹ì€ í”„ë¡œì íŠ¸ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. \\r\\n\\r\\nì‚¬ì¡±ì€ ì—¬ê¸°ì„œ ë§ˆë¬´ë¦¬ ì§“ê³ .. ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í•˜ë©´ì„œ ê²ªì€ ì œ ì‚½ì§ˆê¸°ë¥¼ ë‚˜ì—´í•´ë³´ê² ìŠµë‹ˆë‹¤ ğŸ¤ª...\\r\\n\\r\\n\\r\\n## ë™ê¸° \\r\\nì´ í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒ êµ¬ìƒí•˜ê³  ê·¸ë¦¬ê³  ê¸°ëŠ¥ë“¤ì„ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ë‚˜ê°ˆë•Œ ì„¸ìš´ ëª©í‘œ ì¤‘ í•˜ë‚˜ê°€ ë‹¤í¬ëª¨ë“œëŠ” ê¼­ ë§Œë“¤ì–´ì•¼ì§€..! ìƒê°í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì´ì œ ì—†ìœ¼ë©´ í—ˆì „í•  ì •ë„ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ” **ë‹¤í¬ëª¨ë“œğŸŒ—** ê¸°ëŠ¥ì„ Gatsbyì™€ ì–´ëŠì •ë„ ì¹œí•´ì§€ë©´ ì œëŒ€ë¡œ íŒŒì•¼ê² ë‹¤ ìƒê°í–ˆê³  ë•Œê°€ ì˜¨ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nì¼ì „ì— Reactë¥¼ ë°°ìš°ê¸° ìœ„í•´ì„œ [Emotionary](https://github.com/dobyming/Emotionary) í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰ ì¤‘, `Provider` ê°œë…ì„ í™œìš©í•˜ì—¬ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ `theme` propsë¥¼ ì „ë‹¬í•˜ì—¬ ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í–ˆë˜ ê²½í—˜ì´ ìˆì—ˆê³ , Gatsbyì—ì„œë„ ì´ëŸ° ê°œë…ì„ í™œìš©í•˜ë©´ ë˜ë ¤ë‚˜? ìƒê°ìœ¼ë¡œë¶€í„° ì‹œì‘í•˜ë©° êµ¬í˜„ì— Dive í–ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n## Themeì„ ì–´ë–»ê²Œ ì „ë‹¬í•  ê²ƒì¸ê°€ : ThemeProvider VS CSS Variable\\r\\nëŒ€ëµì ì¸ Mock Upì€ ì´ë ‡ê²Œ êµ¬ìƒí–ˆì—ˆìŠµë‹ˆë‹¤.\\r\\n>í† ê¸€ ë²„íŠ¼ì´ ìˆìŒ(component) -> í´ë¦­ ê°’(state)ì— ë”°ë¼ ì–´ë–¤ themeì„ ë³´ì—¬ì¤„ì§€ ê²°ì •í•  ê²ƒ. (boolean ì†ì„±ìœ¼ë¡œ trueë©´ dark, falseë©´ light) \\r\\n\\r\\nê·¸ë¦¬ê³  ì´ë•Œ `theme`ì„ ì–´ë–»ê²Œ ì „ë‹¬í•  ê²ƒì¸ê°€? ì´ê²Œ ê´€ê±´ì´ì—ˆìŠµë‹ˆë‹¤.  \\r\\n\\r\\n### ğŸ¤” emotionì˜ ThemeProviderë¡œ ì‚½ì§ˆ \\r\\n~~ì˜¤ë˜ì „ì— ìˆ˜í–‰í•œ ì‚½ì§ˆì´ë¼ ê¸°ì–µì´ ì•½ê°„ ê°€ë¬¼í•˜ë„¤ìš”...ã… ~~\\r\\n\\r\\nê¸°ì¡´ì— `Provider`ë¥¼ í™œìš©í•˜ì—¬ êµ¬í˜„í•´ ë³¸ ê²½í—˜ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— ë§ˆì¹¨ `emotion`ì—ì„œ `ThemeProvider` Theme packageë¥¼ ì§€ì›í•˜ê³  ìˆì—ˆê³  ì € ì—­ì‹œ ì´ê±¸ë¡œ êµ¬í˜„í•´ì•¼ê² ë‹¤ ìƒê°í•˜ë©° ì½”ë“œ êµ¬í˜„ì— ì§„í–‰í–ˆì§€ë§Œ, ... buildëŠ” ì»¤ë…• develop ë‹¨ê³„ì—ì„œë¶€í„° errorë¥¼ ë§Œë‚˜ê²Œ ë˜ì–´ ë¨¸ë¦¬ë¥¼ ì‹¸ë§¸ìŠµë‹ˆë‹¤.\\r\\n\\r\\n### ğŸ¥° CSS Variableë¡œ ê´‘ëª…ì„ ì°¾ë‹¤ \\r\\n'í† ê¸€ ë²„íŠ¼ì˜ í´ë¦­ ê°’ì— ë”°ë¼ ì–´ë–¤ themeì„ ë³´ì—¬ì¤„ ì§€..' ì´ ë¬¸ì¥ì—ì„œ CSS Variableê³¼ ì—®ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n```tsx\\r\\n// trigger theme change refer localStorage's key-value\\r\\n useLayoutEffect(() => {\\r\\n\\tif (userTheme === 'dark') {\\r\\n    document.body.classList.remove('light')\\r\\n    document.body.classList.add('dark')\\r\\n    setIsDark(true)\\r\\n\\t} else {\\r\\n    document.body.classList.remove('dark')\\r\\n    document.body.classList.add('light')\\r\\n    setIsDark(false)\\r\\n    }\\r\\n }, [userTheme])\\r\\n```\\r\\nì—¬ê¸°ì„œ `userTheme`ì´ í˜„ì¬ stateì´ê³ , ê·¸ stateê°€ `dark`ë¼ë©´ `body` íƒœê·¸ì˜ classNameì„ `dark`ë¼ê³  ì§€ì •í•˜ê³ , ê·¸ ë°˜ëŒ€ë©´ `light`ë¡œ ì§€ì •í•©ë‹ˆë‹¤. \\r\\n\\r\\nê·¸ëŸ¬ë©´ ì´ `body` íƒœê·¸ì˜ classNameì— ë”°ë¼ì„œ CSS Variableë¡œ ì§€ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.   \\r\\n```css\\r\\n/*theme.css*/\\r\\n\\r\\n.light {\\r\\n    --color-background:#f6f6f6;\\r\\n}\\r\\n\\r\\n.dark {\\r\\n    --color-background: #25262c;\\r\\n    --color-text: #f6f6f6;\\r\\n}\\r\\n\\r\\nbody {\\r\\n    background-color: var(--color-background);\\r\\n    transition: 0.2s;\\r\\n}\\r\\n\\r\\nh1,\\r\\nh2,\\r\\nh3,\\r\\nh4,\\r\\nh5,\\r\\nhr,\\r\\na,\\r\\np,\\r\\nli,\\r\\ntd,\\r\\ntr,\\r\\nfooter,\\r\\nspan {\\r\\n  color: var(--color-text);\\r\\n}\\r\\n```\\r\\n`theme.css` íŒŒì¼ì— ìœ„ì™€ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒë‹¨ì—ëŠ” bodyì˜ classNameì— ë”°ë¼ì„œ ì–´ë–¤ css ì†ì„± ê°’ì„ ë¶€ì—¬í•  ì§€ rgb ê°’ì„ ì •ì˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  **ì›í•˜ëŠ” íƒœê·¸ì— ì›í•˜ëŠ” CSS Variable**ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ë¡œì§ìœ¼ë¡œ ìˆ˜í–‰í•˜ë©´ ì „ì²´ì ìœ¼ë¡œ ê°œë°œ ë¸”ë¡œê·¸ì— ë‹¤í¬ëª¨ë“œê°€ ì ìš©ë¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nê·¸ë¦¬ê³  ì‹¤ì œë¡œ Providerë¥¼ í™œìš©í•´ ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¨, CSS Variableì„ í™œìš©í•˜ì—¬ êµ¬í˜„í•œ ê²ƒì´ **ì„±ëŠ¥ì ì¸** ì¸¡ë©´ì—ì„œë„ ë” ì¢‹ì€ ì§€í‘œë¥¼ ë³´ì—¬ì¤¬ìŠµë‹ˆë‹¤. \\r\\n[Dark Mode Theme PR](https://github.com/dobyming/dobyming.github.io/pull/11) í•´ë‹¹ ë§í¬ë¡œ ê°€ì‹œë©´ ì œê°€ ì™œ CSS Variableì„ ì„ íƒí•˜ì—¬ êµ¬í˜„ì— ì§„í–‰í–ˆëŠ”ì§€ ìì„¸í•œ ì§€í‘œì™€ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n>+) ì¶”ê°€ë¡œ SVG Iconì— ë‹¤í¬ëª¨ë“œë¥¼ ì–´ë–»ê²Œ ì ìš©í•´ì•¼ í•  ì§€ ë§‰ë§‰í•œ ë¶„ë“¤ê»˜ ê°„ëµí•œ ì½”ë“œë¥¼ ë³´ì—¬ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤. (ì‚¬ì‹¤ ë‚´ê°€ ë°”ë³´ì—¬ì„œ í—·ê°ˆë ¤í–ˆìŒ..)\\r\\n\\r\\nìš°ì„  SVG ê°™ì€ ê²½ìš°ì—ëŠ” ìƒ‰ìƒì´ ë‹´ê¸¸ ìˆ˜ ìˆë„ë¡ `fill`ê³¼ `stroke` ì†ì„±ì„ ì§€ì • í•´ì•¼í•©ë‹ˆë‹¤. `fill`ì€ ì±„ì›Œì§€ëŠ” ìƒ‰ì´ê³  `stroke`ëŠ” í…Œë‘ë¦¬ìƒ‰ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `.svg` íŒŒì¼ì—ì„œ **`path` íƒœê·¸ ë‚´ì— fillê³¼ stroke ì†ì„±ì„ current**ë¡œ ì§€ì •í•©ë‹ˆë‹¤.\\r\\n\\r\\n```svg\\r\\n// ì˜ˆì‹œ svg\\r\\n<svg width=\\\"30px\\\" height=\\\"30px\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path fill=\\\"current\\\" stroke=\\\"current\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z\\\" fill=\\\"#000000\\\"/>\\r\\n</svg>\\r\\n```\\r\\n\\r\\nê·¸ëŸ¼ ìƒ‰ìƒì„ ì§€ì •í•˜ê³ ì í•˜ëŠ” SVG Iconì— classNameì„ ë¶€ì—¬í•œ í›„, ìì‹ ì´ ì •ì˜í•œ theme css íŒŒì¼ì— ë§ˆì°¬ê°€ì§€ë¡œ CSS Variableë¡œ ì§€ì •í•˜ë©´ ëì…ë‹ˆë‹¤! \\r\\n```css\\r\\n.githubIcon path {\\r\\n    fill: var(--color-text);\\r\\n}\\r\\n```\\r\\n\\r\\n## Flicker Issue ì—ëŸ¬ í•´ê²°í•˜ê¸°\\r\\në‹¤í¬ ëª¨ë“œ êµ¬í˜„ì— ëŒ€í•œ í‹€ì„ ì¡ì•˜ë‹¤ëŠ” ê¸°ì¨ë„ ì ì‹œ, í˜ì´ì§€ë¥¼ reload ì‹œ  ë¶„ëª… ì´ëŸ° ê¹œë¹¡ì„ í˜„ìƒì„ ê²ªì„ ê²ƒì…ë‹ˆë‹¤...\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/58ff2ef6-95a9-4fea-b04d-3520fb34a879/image.gif)\\r\\n\\r\\nëª»ë´¤ë‹¤êµ¬ìš”? ì €ë„ ê·¸ëƒ¥ ì ì‹œ ì¼ì‹œì ìœ¼ë¡œ ì•„ì£¼ ì ê¹ ì´ëŸ¬ëŠ”ê±° ì•„ë‹ê¹Œ..? ã…ã… í–ˆëŠ”ë° ì•„ë‹ˆë”ë¼êµ¬ìš” ğŸ˜£ ì•„ì£¼ ìœ ëª…í•œ <span style=\\\"color:red\\\">**Flicker Issue**</span> ì˜€ìŠµë‹ˆë‹¤. \\r\\n\\r\\n>The problem is that the HTML is generated long before it reaches the user's device, so there's no way to know which color theme the user prefers. [ì°¸ê³ ](https://www.joshwcomeau.com/css/css-variables-for-react-devs/#dark-mode-flash-fix)\\r\\n\\r\\ní•´ë‹¹ Issueê°€ ë°œìƒí•œ ì›ì¸ìœ¼ë¡œëŠ”, Gatsbyê°€ HTML íŒŒì¼ì„ ë¹Œë“œí•˜ëŠ” `Pre-Render` íŠ¹ì„±ê³¼ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤. ë¹„ë¡ localStorageë¡œ ì‚¬ìš©ìê°€ ì„¤ì •í•œ themeì„ ì €ì¥í•œë‹¤ê³  í•´ë„, **reload ì‹œ localStorageë¥¼ ì°¸ì¡°í•˜ëŠ”ê±´ Pre-Render ì‹œì ì´ ì•„ë‹Œ ê·¸ ì´í›„ ì‹œì ì— ì°¸ì¡°**í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ° í˜„ìƒì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. \\r\\n\\r\\nì¦‰ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”, localStorageë¥¼ ì°¸ì¡°í•˜ëŠ” ì‹œì ì„ DOM íŠ¸ë¦¬ê°€ êµ¬ì¶•ë˜ê¸° ì´ì „ì— Script íŒŒì¼ì„ ê°•ì œë¡œ Injectioní•˜ëŠ” ë¶€ë¶„ì˜ ì½”ë“œ ì‘ì—…ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  Gatsbyì—ì„œëŠ” **`html.js` íŒŒì¼ì„ í†µí•´ Script íŒŒì¼ì„ inject í•  ìˆ˜ ìˆë„ë¡ customize**ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤. \\r\\n\\r\\n>ğŸ’– [Gatsby html.js customize](https://www.gatsbyjs.com/docs/custom-html/) docsì— `html.js` íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ ìì„¸í•œ ì„¤ëª…ì´ ìˆìœ¼ë¯€ë¡œ ê¼­ docsë¥¼ ì½ìœ¼ì‹œê³  ì§„í–‰í•˜ì‹œê¸¸!!\\r\\n\\r\\nê·¸ëŸ¼ `html.js` íŒŒì¼ì´ ìƒì„±ëê³ , ì €ëŠ” ì•„ë˜ì™€ ê°™ì´ customizeë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \\r\\n```js\\r\\n// html.js\\r\\nimport React from 'react'\\r\\nimport PropTypes from 'prop-types'\\r\\n\\r\\nexport default class HTML extends React.Component {\\r\\n  render() {\\r\\n    return (\\r\\n      <html {...this.props.htmlAttributes}>\\r\\n        <head>\\r\\n          <meta charSet=\\\"utf-8\\\" />\\r\\n          <meta httpEquiv=\\\"x-ua-compatible\\\" content=\\\"ie=edge\\\" />\\r\\n          <meta\\r\\n            name=\\\"viewport\\\"\\r\\n            content=\\\"width=device-width, initial-scale=1, shrink-to-fit=no\\\"\\r\\n          />\\r\\n          {this.props.headComponents}\\r\\n        </head>\\r\\n        <body {...this.props.bodyAttributes} className=\\\"light\\\">\\r\\n          <script\\r\\n            dangerouslySetInnerHTML={{\\r\\n              __html: `\\r\\n\\t\\t\\t// Customize í•  ë¶€ë¶„\\r\\n              (function () {\\r\\n                try {\\r\\n                  var mode = localStorage.getItem('color-theme');\\r\\n                  if (!mode) return;\\r\\n                  document.body.classList.add(mode);\\r\\n                } catch (e) {}\\r\\n              })();\\r\\n            `,\\r\\n            }}\\r\\n          />\\r\\n          {this.props.preBodyComponents}\\r\\n          <div\\r\\n            key={`body`}\\r\\n            id=\\\"___gatsby\\\"\\r\\n            dangerouslySetInnerHTML={{ __html: this.props.body }}\\r\\n          />\\r\\n          {this.props.postBodyComponents}\\r\\n        </body>\\r\\n      </html>\\r\\n    )\\r\\n  }\\r\\n}\\r\\n\\r\\nHTML.propTypes = {\\r\\n  htmlAttributes: PropTypes.object,\\r\\n  headComponents: PropTypes.array,\\r\\n  bodyAttributes: PropTypes.object,\\r\\n  preBodyComponents: PropTypes.array,\\r\\n  body: PropTypes.string,\\r\\n  postBodyComponents: PropTypes.array,\\r\\n}\\r\\n```\\r\\nDOM íŠ¸ë¦¬ê°€ êµ¬ì¶•ë˜ê¸° ì§ì „ì— localStorageë¥¼ ì°¸ì¡°í•˜ì—¬ ë¯¸ë¦¬ Themeì´ setting ë  ìˆ˜ ìˆë„ë¡ Scriptë¥¼ ì£¼ì…í–ˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ í•´ë‹¹ Dark mode flicker issueë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/9818ade3-3dbd-4eca-a24f-0eaf7c0f70a1/image.gif)\\r\\n\\r\\nì‹¤ì œ deployëœ element ì½”ë“œë¥¼ ë³´ë©´ script injectionì´ ì˜ ëìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/c6c1144e-5caa-490d-b842-7ee175488c7c/image.PNG)\\r\\n\\r\\n## ğŸ”® Utteranceì— ë‹¤í¬ëª¨ë“œ ì ìš©í•˜ê¸° \\r\\nì œ ê°œë°œ ë¸”ë¡œê·¸ì—ëŠ” ëŒ“ê¸€ ê¸°ëŠ¥ìœ¼ë¡œ `Utterance` ì˜¤í”ˆ ì†ŒìŠ¤ë¥¼ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\nì´ë•Œ UtteranceëŠ” ë‹¤ë¥¸ ìš”ì†Œë“¤ê³¼ëŠ” ë‹¬ë¦¬, `Div` elementë¥¼ ì§ì ‘ ìƒì„±í•˜ê³  ê·¸ë¦¬ê³  `attributes`ì— repo ë“±ë“± ì†ì„±ì„ ì§€ì •í•˜ê³  ê·¸ë¦¬ê³  ê·¸ ì§€ì •í•œ ê°’ì— ëŒ€í•´ì„œ DOM íŠ¸ë¦¬ì— appendChild í•˜ì—¬ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ë‹¤í¬ëª¨ë“œ êµ¬í˜„ì— ëŒ€í•´ CSS Variableë¡œ ì–´ë–»ê²Œ ì§€ì •í•´ì•¼ ë˜ëŠ”ì§€ êµ¬ìƒì´ ì˜ ë– ì˜¤ë¥´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\r\\n\\r\\nUtterance ìš”ì†ŒëŠ” `Div`ë¡œ ìƒì„±ë˜ì§€ ì•Šê³  `iframe`ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. \\r\\në”°ë¼ì„œ `iframe` íƒœê·¸ì— ì ‘ê·¼í•˜ì—¬ themeì„ ë°”ê¾¸ëŠ” ë¶€ë¶„ì„ `window.postMessage()`ë¡œ ì „ë‹¬í•˜ì—¬ ì ‘ê·¼í–ˆì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n> `window.postMessage()` ë©”ì†Œë“œëŠ” Window ì˜¤ë¸Œì íŠ¸ ì‚¬ì´ì—ì„œ ì•ˆì „í•˜ê²Œ cross-origin í†µì‹ ì„ í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì˜ˆì‹œë¡œ, í˜ì´ì§€ì™€ ìƒì„±ëœ íŒì—… ê°„ì˜ í†µì‹ ì´ë‚˜, í˜ì´ì§€ì™€ í˜ì´ì§€ ì•ˆì˜ iframe ê°„ì˜ í†µì‹ ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì¶œì²˜: [MDN](https://developer.mozilla.org/ko/docs/Web/API/Window))\\r\\n\\r\\nì œ í”„ë¡œì íŠ¸ì—ì„œ **ë‹¤í¬ëª¨ë“œì˜ ì „í™˜ ìœ ë¬´ì˜ í¬ì¸íŠ¸ëŠ” bodyì˜ className**ì…ë‹ˆë‹¤. lightëƒ darkëƒì— ë”°ë¼ì„œ DOM íŠ¸ë¦¬ê°€ êµ¬ì¶•ë ë•Œ, bodyì˜ classNameì— ë”°ë¼ ìœ ë™ì ìœ¼ë¡œ ë³€í™”í•  ìˆ˜ ìˆëŠ” ideaê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤. êµ¬ê¸€ë§ ê²°ê³¼, `MutationObserver` ë¼ëŠ” Constructorê°€ ì´ ê°œë…ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤. [ì°¸ê³ ](https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)\\r\\n\\r\\n```tsx\\r\\nuseEffect(() => {\\r\\n    const mutationObserver: MutationObserver = new MutationObserver(\\r\\n      mutationsList => {\\r\\n        mutationsList.forEach(mutation => {\\r\\n          if (mutation.attributeName === 'class') {\\r\\n            if (window.document.querySelector('.utterances-frame')) {\\r\\n              const theme = mutation.target.classList.contains('dark')\\r\\n                ? 'photon-dark'\\r\\n                : 'github-light'\\r\\n              const message = {\\r\\n                type: 'set-theme',\\r\\n                theme: theme,\\r\\n              }\\r\\n              const iframe =\\r\\n                window.document.querySelector('.utterances-frame')\\r\\n              iframe.contentWindow.postMessage(message, src)\\r\\n            }\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n    )\\r\\n    mutationObserver.observe(document.body, { attributes: true })\\r\\n  }, [])\\r\\n```\\r\\nê°ì§€ëœ bodyì˜ classNameì— ë”°ë¼ ì‚¼í•­ì—°ì‚°ìë¡œ themeì„ í• ë‹¹ í›„, iframeì— postMessage()ë¡œ messageë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  `attributes`ì˜ ìƒíƒœê°’ì„ trueë¡œ ì§€ì •í•˜ì—¬, bodyì˜ classì˜ ë³€í™”ë¥¼ ê°ì§€í•  ìˆ˜ ìˆë„ë¡ ìˆ˜í–‰í•©ë‹ˆë‹¤. \\r\\në˜í•œ ì´ ì´ë²¤íŠ¸ë¥¼ mount ì‹œì ì— trigger ë  ìˆ˜ ìˆë„ë¡ `useEffect()` Hookë‚´ì— ì„ ì–¸í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” index(í™ˆ í™”ë©´)ì—ì„œ ë‹¤í¬ ëª¨ë“œë¡œ í† ê¸€ í›„, í¬ìŠ¤íŠ¸ë¥¼ í´ë¦­í•˜ì—¬ utterance themeì´ ë°”ë¡œ ì ìš©ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. \\r\\n\\r\\n### ê²°ê³¼ë¬¼\\r\\n![](https://velog.velcdn.com/images/damin1025/post/c7799ac4-2bbe-466e-95ca-d1c33a3a491e/image.gif)\\r\\n\\r\\níœ´ .. ê°œì¸ì ìœ¼ë¡œ ì–´ë ¤ì› ë˜ ë¶€ë¶„ ì¤‘ í•˜ë‚˜ì˜€ëŠ”ë° ì˜ ì‘ë™í•´ì„œ ì–´ì°Œë‚˜ í–‰ë³µí•˜ë˜ì§€ğŸ’™\\r\\n\\r\\n\\r\\n## ë§ˆë¬´ë¦¬ \\r\\nì‚¬ì‹¤ ì´ ê¸€ì„ ì“°ë©´ì„œ ì—¥ ì´ê²ƒë°–ì— ì•ˆëœë‹¤ê³ ? ìƒê°ì´ ë“¤ ì •ë„ë¡œ, ë‹¤í¬ëª¨ë“œ êµ¬í˜„ì€ ê½¤ë‚˜ ë³µì¡í•˜ê³  ê·¸ë¦¬ê³  ê¼¼ê¼¼í•¨ì„ ê¸°ìš¸ì´ëŠ” ì‘ì—…ì´ì—ˆìŠµë‹ˆë‹¤. ì•„ë¬´ë˜ë„ ì‚¬ìš©ì ê²½í—˜ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìš”ì†Œì´ê¸° ë•Œë¬¸ì— ë”ìš±ì´ ì‹ ê²½ì„ ì“¸ ìˆ˜ ë°–ì— ì—†ì—ˆë˜ ì‘ì—…ì´ì—ˆìŠµë‹ˆë‹¤.  \\r\\n\\r\\nì–´ë–¤ ê¸°ìˆ ì„ ì„ íƒí•´ì•¼ í• ì§€, ê·¸ë¦¬ê³  ì–´ë–¤ íƒœê·¸ì— ìƒ‰ìƒ ë³€í™”ê°€ í•„ìš”í•œì§€, ë˜í•œ ë Œë”ë§ ì´ìŠˆë„ handling í–ˆì–´ì•¼ í–ˆê³  ì •ë§.. ì˜¤ëœ ì‘ì—… ëì— ì–´ëŠì •ë„ êµ¬ìƒ‰ì„ ê°–ì¶˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.. (4ì›”ë§ë¶€í„° ì‹œì‘í–ˆìœ¼ë‹ˆ..) \\r\\n\\r\\nì €ë„ ì²˜ìŒìœ¼ë¡œ ì œëŒ€ë¡œ ê°ì¡ê³  ë§Œë“  ë‹¤í¬ëª¨ë“œë¼ ë¶€ì¡±í•œ ì ì´ ìˆì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ğŸ˜‚ í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤! \\r\\n\\r\\n### ğŸ™‡ğŸ¼â€â™€ï¸ ì°¸ê³  \\r\\n**-ë‹¤í¬ëª¨ë“œ CSS Variable ë° flicker Issue-**\\r\\n\\r\\nhttps://blog.maximeheckel.com/posts/switching-off-the-lights-part-2-fixing-dark-mode-flashing-on-servered-rendered-website/\\r\\n\\r\\nhttps://blog.rhostem.com/posts/2020-06-25-dark-mode-for-gatsby-website\\r\\n\\r\\nhttps://github.com/gaearon/overreacted.io/blob/master/src/html.js\\r\\n\\r\\n**-Utterance dark mode-**\\r\\n\\r\\nhttps://www.sungikchoi.com/blog/gatsby-dark-mode/\\r\\n\\r\\n**-MutationObserver-**\\r\\n\\r\\nhttps://mong-blog.tistory.com/entry/JS-DOM%EC%9D%84-%EA%B0%90%EC%8B%9C%ED%95%98%EB%8A%94-MutationObserver\\r\\n\\r\\nhttps://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\\r\\n\\r\\nhttps://developer.chrome.com/blog/detect-dom-changes-with-mutation-observers/\\r\\n\\r\\nhttps://stackoverflow.com/questions/31659567/performance-of-mutationobserver-to-detect-nodes-in-entire-dom\\r\\n\",\"n\":0.03}}},{\"i\":8,\"$\":{\"0\":{\"v\":\"JavaScript - ë™ê¸°ì™€ ë¹„ë™ê¸° ì²˜ë¦¬\",\"n\":0.447},\"1\":{\"v\":\"\\r\\n## ë™ê¸°ì™€ ë¹„ë™ê¸° (Synchronus , Asynchronus)\\r\\nì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„  ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ 2ê°€ì§€ ë™ì‘ ë°©ì‹ì¸ ë™ê¸°ì™€ ë¹„ë™ê¸°ì²˜ë¦¬ì— ëŒ€í•´ì„œ ë‹¤ë¤„\\r\\në³´ê² ìŠµë‹ˆë‹¤.\\r\\n\\r\\ní•¨ìˆ˜ 3ê°œë¥¼ í˜¸ì¶œí–ˆì„ë•Œë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\\r\\n\\r\\n```jsx\\r\\nfunction taskA() {\\r\\n  console.log('Task A');\\r\\n}\\r\\nfunction taskB() {\\r\\n  console.log('Task B');\\r\\n}\\r\\nfunction taskC() {\\r\\n  console.log('Task C');\\r\\n}\\r\\n\\r\\n//í•¨ìˆ˜ í˜¸ì¶œ \\r\\ntaskA();\\r\\ntaskB();\\r\\ntaskC();\\r\\n```\\r\\n\\r\\ní•¨ìˆ˜ 3ê°œë¥¼ í˜¸ì¶œ ì‹œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì—…ì„ í• ë‹¹í•©ë‹ˆë‹¤. ìˆœì„œëŒ€ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©° í•œê°œì˜ taskê°€ ëë‚ ë•Œê¹Œì§€ ë‹¤ìŒ taskëŠ” ë¼ì–´ë“¤ ìˆ˜ ì—†ëŠ” ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ë™ê¸°ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/a5298539-fe91-4a59-bd30-0f69822ad327/image.PNG)\\r\\n\\r\\n## ë™ê¸° ì²˜ë¦¬ì˜ ë¬¸ì œì  \\r\\n![](https://velog.velcdn.com/images/damin1025/post/fb33ffa5-fbc4-42e0-8d4a-966a84597e2c/image.PNG)\\r\\n\\r\\nğŸ¤” ì‘ì—… ì‹œê°„ì´ ê¸´ taskë¥¼ ì²˜ë¦¬í• ë•Œ ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.í”„ë¡ íŠ¸ëŠ” ì†ë„ê°€ ìƒëª…ì´ì§€ ì•Šë‚˜â€¦? \\r\\n\\r\\n**ë©€í‹° ìŠ¤ë ˆë“œ**ë¡œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ ë˜ì§€ ì•Šë‚˜ìš”?\\r\\nâ‡’ OS ìƒ ìƒê°ì€ ok. í•˜ì§€ë§Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” **Single Thread**ë¡œ ë™ì‘í•©ë‹ˆë‹¤. \\r\\n\\r\\nê·¸ë˜ì„œ ë™ê¸°ì²˜ë¦¬ ëŒ€ì‹  **ë¹„ë™ê¸° ì²˜ë¦¬** ê°œë…ì´ í•„ìš”í•´ì§€ê²Œ ë©ë‹ˆë‹¤.\\r\\n\\r\\n## ë¹„ë™ê¸° ì²˜ë¦¬\\r\\n![](https://velog.velcdn.com/images/damin1025/post/57548644-48a6-4b56-8277-cb53ddac1f69/image.PNG)\\r\\n\\r\\nğŸ¤” ë…¼ ë¸”ë¡œí‚¹ ë°©ì‹ì´ë©´ ì‘ì—…ì´ ì–´ë–»ê²Œ ëë‚˜ê³  ì²˜ë¦¬ë˜ëŠ”ì§€.. ì¤‘êµ¬ë‚œë°© ì•„ë‹ê¹Œìš”?\\r\\nâ†’ **ì½œë°± í•¨ìˆ˜**ë¥¼ í™œìš©í•©ë‹ˆë‹¤. \\r\\n\\r\\nëŒ€í‘œì ì¸ ì½œë°± í•¨ìˆ˜ëŠ” `setTimeout()` ìœ¼ë¡œ, ì½”ë“œë¥¼ ë°”ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ëª‡ì´ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‹¤ìŒ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆœì„œê°€ ì¤‘êµ¬ë‚œë°©ì¼ì§€ ì—¼ë ¤ë˜ëŠ” ë¶€ë¶„ì„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nfunction taskA() {\\r\\n\\tsetTimeout(() => {\\r\\n\\t\\tconsole.log('A Task End');\\r\\n\\t}, 2000); // ë‹¤ìŒ í•¨ìˆ˜ ì‹¤í–‰ê¹Œì§€ 2ì´ˆ ê¸°ë‹¤ë ¤ì¤Œ \\r\\n}\\r\\n\\r\\ntaskA();\\r\\nconsole.log('ì½”ë“œ ë');\\r\\n```\\r\\n---\\r\\n\\r\\nì‹¤í–‰ ê²°ê³¼\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/bd013054-c63e-45d6-aea2-2a94361d7326/image.gif)\\r\\n\\r\\n## JS Engine\\r\\nJS Engine ê¸°ë³¸ êµ¬ì„±\\r\\n<br/>\\r\\n-Heap : ë©”ëª¨ë¦¬ í• ë‹¹<br/>\\r\\n-**Call Stack** : ì½”ë“œ ì‹¤í–‰\\r\\n\\r\\n### Call Stack ë™ê¸° ì‘ë™ë°©ì‹\\r\\n\\r\\ní•­ìƒ Main contextê°€ ë¨¼ì € stackì— push ëŒ. ê·¸ë¦¬ê³  ì„ ì–¸í•œ í•¨ìˆ˜ ìˆœì„œëŒ€ë¡œ Call Stackì— pushë˜ê³ , ì‘ì—…ì´ ëë‚˜ë©´ popì´ ì´ë£¨ì–´ì§.\\r\\n\\r\\n### ë¹„ë™ê¸° ì‘ë™ ë°©ì‹\\r\\nì—¬ê¸°ì„œ `setTimeout()` ì€ ëŒ€í‘œì ì¸ **ë¹„ë™ê¸° í•¨ìˆ˜**ì¸ë°, ë§Œì•½ ë™ê¸°ì²˜ë¦¬ ë°©ì‹ ê·¸ëŒ€ë¡œ ì ìš©í•œë‹¤ë©´ call stackì— 3ì´ˆ ë¨¸ë¬¼ë €ë‹¤ê°€ ì½œë°±í•¨ìˆ˜ `cb`ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ëŠ”ë° ì´ì™€ ê°™ì´ ìˆ˜í–‰í•œë‹¤ë©´ ë™ê¸° ì²˜ë¦¬ ë°©ì‹ê³¼ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ì˜ ì°¨ì´ì ì´ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/359c37e2-d6df-4195-af7d-3cf8d7011385/image.PNG)\\r\\n\\r\\në”°ë¼ì„œ í•´ë‹¹ ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´, Web APIsì— 3ì´ˆë™ì•ˆ ê¸°ë‹¤ë¦¬ë©´ì„œ `asyncAdd()` í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ì„œ popë˜ë©´ì„œ ì¢…ë£Œë˜ê³ \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/18c5b0e0-04d0-4a46-8beb-b5106cdac240/image.PNG)\\r\\n\\r\\n\\r\\n3ì´ˆ ê¸°ë‹¤ë¦° `setTimeout()`ì€ ì œê±°ê°€ ë˜ë©´ì„œ ì½œë°±í•¨ìˆ˜ `cb`ë¥¼ ì½œë°± íì— pushí•©ë‹ˆë‹¤.\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/81ed6192-8b10-4789-ace7-ec3b9fc7b30e/image.PNG)\\r\\n\\r\\nEvent Loopì„ í†µí•´ cbí•¨ìˆ˜ëŠ” call stackë¡œ pushë©ë‹ˆë‹¤. \\r\\n\\r\\nì´ë•Œ Event LoopëŠ” Main Contextë¥¼ ì œì™¸í•œ ë‹¤ë¥¸ ì‹¤í–‰í•  í•¨ìˆ˜ë“¤ì´ Call stackì— ì¡´ì¬í•˜ëŠ”ì§€ ê³„ì†í•´ì„œ checkí•©ë‹ˆë‹¤. ë§Œì•½ ìˆ˜í–‰í•  í•¨ìˆ˜ê°€ ì½œë°±í•¨ìˆ˜ë°–ì— ì—†ë‹¤ë©´, ê·¸ì œì„œì•¼ ì½œë°±í•¨ìˆ˜ë¥¼ Call Stackì— pushí•˜ëŠ” ë°©ì‹ì¸ê±°ì£ . \\r\\n\\r\\nê·¸ë ‡ê²Œ ì½œë°±í•¨ìˆ˜ë¥¼ ìˆ˜í–‰í•˜ê³  pop í›„, Main Contextë„ ì œê±°ë˜ë©´ì„œ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œê°€ ë©ë‹ˆë‹¤. \\r\\n\\r\\n### ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ì˜ ë¬¸ì œì \\r\\n\\r\\nâ‡’ ë§Œì•½ ë¶ˆëŸ¬ì•¼ í•  ì½œë°±í•¨ìˆ˜ë¥¼ ë©”ì†Œë“œ ë‚´ì—ì„œ ê³„ì† ì„ ì–¸í•˜ê²Œ ëœë‹¤ë©´ **ì½œë°±ì§€ì˜¥**ì„ ì•¼ê¸°í•©ë‹ˆë‹¤. ì´ëŠ” ì´ì œ ES6+ ë¬¸ë²• ì¤‘ `Promise` ê°ì²´ ì™€ `async()-await()` ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\"n\":0.057}}},{\"i\":9,\"$\":{\"0\":{\"v\":\"Redux Toolkitìœ¼ë¡œ React Native Todoì•± êµ¬ì¡° ì¡ì•„ë³´ê¸°\",\"n\":0.378},\"1\":{\"v\":\"## ğŸ” ë™ê¸°\\r\\në¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ê°€ì¥ ì±Œë¦°ì§€ í–ˆë˜ ë¶€ë¶„ì€ **stateê´€ë¦¬**ì˜€ìŠµë‹ˆë‹¤. \\r\\n\\r\\nê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” stateë¥¼ ê´€ë¦¬í•˜ê³  ìˆì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ íŒŒì¼ì´ ë°©ëŒ€í•´ì§€ê³  propsë¡œ ì „ë‹¬í•´ì•¼ ë˜ëŠ” ë¶€ë¶„ì´ ë§ì•„ì§€ê²Œ ë˜ë©´ state ê´€ë¦¬ê°€ ë³µì¡í•´ì ¸ì„œ êµ‰ì¥íˆ ì„¤ê³„ì— ì–´ë ¤ì›€ì„ ê²ªì—ˆë˜ ê²½í—˜ì´ ìˆì—ˆìŠµë‹ˆë‹¤.. ğŸ˜¥ \\r\\n\\r\\ní•˜ì§€ë§Œ ReduxëŠ” ì´ëŸ¬í•œ ë¶€ë¶„ì„ ì™„í™”ì‹œì¼œì¤„ ìˆ˜ ìˆëŠ” toolë¡œ, storeë¡œ ëª¨ë“  stateë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ React Nativeë¡œ ì§„í–‰í•˜ê³  ìˆëŠ” Todo Appì˜ data stateì˜ ê´€ë¦¬ë¥¼ `Redux Toolkit` ì„ í†µí•´ ë¡œì§ì„ êµ¬í˜„í•˜ê³ ì í•©ë‹ˆë‹¤.  \\r\\n\\r\\n## ğŸ›’ ìˆœì„œ\\r\\nì „ì²´ì ì¸ êµ¬ì¡°ëŠ” ì–´ë– í•œ ì´ë²¤íŠ¸ê°€ ë°œìƒ ì‹œ, í•´ë‹¹ Actionì„ Dispatcherì— ì „ë‹¬í•˜ì—¬ Reducer í•¨ìˆ˜ë“¤ì„ í†µí•´ í•´ë‹¹í•˜ëŠ” Actionì˜ stateë¥¼ raiseí•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  store ë‚´ë¶€ stateê°€ update ë˜ë©´ ê·¸ stateë¥¼ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ì—¬ ë¦¬ë Œë”ë§ì´ ì§„í–‰ë©ë‹ˆë‹¤. \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/441bb55f-8efc-4bb3-a07a-6040a8a059a7/image.png)\\r\\n\\r\\n\\r\\në‹¤ìŒ CLI ëª…ë ¹ì–´ë¡œ `Redux Toolkit`ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n```bash\\r\\nnpm install @reduxjs/toolkit react-redux\\r\\n```\\r\\n\\r\\n### 1. configureStoreë¥¼ ì‚¬ìš©í•˜ì—¬ Redux Store ìƒì„±\\r\\n```jsx\\r\\nimport { configureStore } from \\\"@reduxjs/toolkit\\\";\\r\\nimport todoReducer from './slices/todoSlice';\\r\\n\\r\\nexport const store = configureStore({\\r\\n    reducer:{\\r\\n        todo: todoReducer //ìƒì„±í•œ reducerë¥¼ Storeì— ë“±ë¡\\r\\n    }\\r\\n});\\r\\n```\\r\\n\\r\\n### 2. React ì»´í¬ë„ŒíŠ¸ì— Redux Store ì œê³µ ìˆœì„œ\\r\\nì œ í”„ë¡œì íŠ¸ì˜ `App` ì»´í¬ë„ŒíŠ¸ ì•„ë˜ ì»´í¬ë„ŒíŠ¸ì¸ `MainScreen` ì»´í¬ë„ŒíŠ¸ì— data ë° stateë¥¼ ê³µê¸‰í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ `Provider` ì»´í¬ë„ŒíŠ¸ì— `store`ë¥¼ propsë¡œ ì „ë‹¬í•´ì•¼í•©ë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nimport { Provider } from 'react-redux';\\r\\nimport {store} from './redux/store';\\r\\nimport MainScreen from './screens/MainScreen';\\r\\n\\r\\nexport default function App() {\\r\\n  return (\\r\\n    <Provider store={store}>\\r\\n      <MainScreen/>\\r\\n    </Provider>\\r\\n  );\\r\\n}\\r\\n```\\r\\n\\r\\nâš  ì´ë•Œ ìƒì„±í•œ storeëŠ” **ë‚´ì¥ ëª¨ë“ˆì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì—** `{ }` ë¡œ ê°ì‹¸ì„œ ëª¨ë“ˆì„ import í•˜ëŠ”ê²ƒì— ì£¼ì˜í•©ë‹ˆë‹¤.\\r\\n  \\r\\n\\r\\n### 3. createSliceë¡œ Redux slice reducer ìƒì„±\\r\\n`createSlice`ë¥¼ í™œìš©í•˜ì—¬ ìƒíƒœê´€ë¦¬ í•¨ìˆ˜ ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤. \\r\\nì œ í”„ë¡œì íŠ¸ì—ëŠ” add,update,deleteì— ê´€í•œ ìƒíƒœê´€ë¦¬í•¨ìˆ˜ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— `reducer`ë¡œ ì •ì˜í•©ë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nconst todoSlice = createSlice({\\r\\n  name: \\\"todo\\\", \\r\\n  initialState: {\\r\\n        currentId: 4,\\r\\n        todos: [],\\r\\n    }, //ì´ˆê¸° state ì •ì˜\\r\\n  reducers: {\\r\\n    //state functions(add,delete,update ë¡œì§ êµ¬í˜„ ë¶€)\\r\\n  },\\r\\n});\\r\\nexport default todoSlice.reducer; \\r\\n```\\r\\n\\r\\n### 4. useSelector, useDispatchë¡œ ë°ì´í„° ì½ê³  state raiseí•˜ê¸°\\r\\n\\r\\n`useSelector`ë¡œ `store`ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì¤ë‹ˆë‹¤.\\r\\n`useDispatch`ë¡œ dispatchí•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¤ê³  í•„ìš”ì— ë”°ë¼ actionì„ dispatchí•©ë‹ˆë‹¤. (actionì„ dispatchí•œë‹¤ = eventë¥¼ triggerí•œë‹¤.)\\r\\n\\r\\ní•´ë‹¹ ë¶€ë¶„ì€ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\\r\\n\\r\\n## ğŸŒŒ ë¦¬ë“€ì„œ í•¨ìˆ˜ êµ¬ì²´í™”í•˜ê¸°\\r\\n`createSlice`ë¡œ Redux slice Reducerë¥¼ ìƒì„±í–ˆë‹¤ë©´ ê°ê°ì˜ ìƒíƒœê´€ë¦¬í•¨ìˆ˜ (add,update,delete)ì— ëŒ€í•´ì„œ êµ¬í˜„ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤. \\r\\n\\r\\n### 1. addTodo()\\r\\n![](https://velog.velcdn.com/images/damin1025/post/cfab0e3f-ee60-49c1-983f-a88b9cbec230/image.PNG)\\r\\n\\r\\ní˜„ì¬ stateì˜ í• ì¼ ë°°ì—´ê°’ì„ ë°›ì„ `todos`ì— ê°’ì„ pushí•´ì£¼ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n### 2. updateTodo()\\r\\n![](https://velog.velcdn.com/images/damin1025/post/8aa630c4-94c4-4ca9-a5e0-4fb4b7f5cc05/image.PNG)\\r\\n\\r\\nupdate(í• ì¼ ì¢…ë£Œ)í–ˆë‹¤ëŠ” indexë¥¼ ë”°ê¸° ìœ„í•´ì„œ `item` ë³€ìˆ˜ì— `findIndex()`ë¡œ ìƒíƒœê°€ ë³€í™”í•œ indexë¥¼ ë‹´ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‚¼í•­ì—°ì‚°ìë¥¼ í†µí•´ todo -> done ìœ¼ë¡œ stateë¥¼ ë°”ê¿”ì£¼ê³ , `todos` ë°°ì—´ì—ì„œ ì œê±°í•œ ê°’ì„ ë°°ì—´ì— pushí•©ë‹ˆë‹¤. \\r\\n\\r\\n\\r\\n### 3. deleteTodo()\\r\\n![](https://velog.velcdn.com/images/damin1025/post/0bc7ec31-156b-4bff-9360-865913c271e7/image.PNG)\\r\\n\\r\\n`x` ë²„íŠ¼ì„ ì‚­ì œí•˜ëŠ” ë¡œì§ì…ë‹ˆë‹¤. ì „ì²´ì ì¸ íë¦„ì€ `updateTodo()` ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\r\\n\\r\\n\\r\\n### reducer í•¨ìˆ˜ export í•˜ê¸° \\r\\në§ˆì§€ë§‰ìœ¼ë¡œ í•´ë‹¹ reducerí•¨ìˆ˜ë“¤ì„ ì™¸ë¶€ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ exportí•˜ëŠ” ì‘ì—…ìœ¼ë¡œ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.\\r\\n```jsx\\r\\nexport const { addTodo, updateTodo, deleteTodo } = todoSlice.actions;\\r\\n```\\r\\n\",\"n\":0.052}}},{\"i\":10,\"$\":{\"0\":{\"v\":\"JavaScript - í•¨ìˆ˜\",\"n\":0.577},\"1\":{\"v\":\"### í•¨ìˆ˜\\r\\n\\r\\n-**í•¨ìˆ˜ ì„ ì–¸ì‹ vs í•¨ìˆ˜ í‘œí˜„ì‹ ì°¨ì´**\\r\\n\\r\\n```jsx\\r\\nconsole.log(helloDelcare()); // 'ì•ˆë…•í•˜ì„¸ìš” í•¨ìˆ˜ ì„ ì–¸ì‹ì…ë‹ˆë‹¤'\\r\\nconsole.log(hello); // error : 'hello is not a function'\\r\\n\\r\\nfunction helloDelcare() {\\r\\n\\treturn 'ì•ˆë…•í•˜ì„¸ìš” í•¨ìˆ˜ ì„ ì–¸ì‹ì…ë‹ˆë‹¤'\\r\\n}\\r\\n\\r\\nlet hello = function helloRepresent() {\\r\\n\\treturn 'ì•ˆë…•í•˜ì„¸ìš” í•¨ìˆ˜ í‘œí˜„ì‹ ì…ë‹ˆë‹¤.'\\r\\n}\\r\\n```\\r\\n\\r\\n1) í•¨ìˆ˜ ì„ ì–¸ì‹: **Hoisting**(ì‰½ê²Œ ë§í•˜ë©´ ë°‘ì—ì„œ ì„ ì–¸í•œ í•¨ìˆ˜ë¥¼ ì½”ë“œì˜ ìƒë‹¨ì—ì„œ í˜¸ì¶œí•´ë„ ì¶œë ¥ì´ ì´ë£¨ì–´ì§)ì´ ì¼ì–´ë‚˜ëŠ” ë°©ì‹ \\r\\n\\r\\n2) í•¨ìˆ˜ í‘œí˜„ì‹: **Hoisting**ì˜ ëŒ€ìƒì´ ë˜ì§€ ì•ŠìŒ â‡’ ì¦‰ `hello` ë³€ìˆ˜ë¥¼ í‘œí˜„í•˜ë©´ì„œ ë¶€í„° í•¨ìˆ˜ê°€ ìƒì„±ë˜ê¸° ë•Œë¬¸ì—, ìƒë‹¨ì—ì„œ helloë¥¼ logë¡œ ì°ìœ¼ë ¤ê³  í•˜ë©´ **ì—ëŸ¬**ê°€ ë°œìƒ.\\r\\nâ†’ ë”°ë¼ì„œ í•¨ìˆ˜ë¥¼ ë¨¼ì € ì„ ì–¸ í›„, í‘œí˜„ì‹ì— ì„ ì–¸ëœ ë³€ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ ì •ìƒì ìœ¼ë¡œ ê°’ì„ ì°ì„ ìˆ˜ ìˆë‹¤. \\r\\n\\r\\n**-arrow function (í•¨ìˆ˜ í‘œí˜„ì‹ì„ ê°„ë‹¨íˆ í‘œí˜„í•˜ëŠ” ë°©ë²•)**\\r\\n\\r\\n```jsx\\r\\nlet hello = () => {\\r\\n\\treturn 'ì•ˆë…•í•˜ì„¸ìš”'\\r\\n}\\r\\n// '() =>' í‘œí˜„ê³¼ ë™ì¼í•œ ì˜ˆì•½ì–´ê°€ 'function í•¨ìˆ˜ëª…()' ì´ë¼ê³  ìƒê°í•˜ë©´ ëŒ \\r\\n```\\r\\n\\r\\ní™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ì‰½ê²Œ ìƒê°í•˜ë©´ í•¨ìˆ˜ í‘œí˜„ì‹ì—ì„œ keyword `function` **ë§Œ ì‚­ì œ**í•œ ë¬¸ë²•ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. (ì—­ì‹œ Hoistingì˜ ëŒ€ìƒì´ ì•„ë‹˜)\\r\\n\\r\\n>-ì½œë°±í•¨ìˆ˜\\r\\n```jsx\\r\\nfunction checkMood(mood) {\\r\\n\\tif (mood === \\\"good\\\") {\\r\\n\\t\\t// ...\\r\\n\\t\\tsing()\\r\\n\\t} else {\\r\\n\\t\\t// ...\\r\\n\\t\\tcry()\\r\\n\\t}\\r\\n}\\r\\n\\r\\nfunction cry() {\\r\\n\\tconsole.log('Action : CRY');\\r\\n}\\r\\n\\r\\nfunction sing() {\\r\\n\\tconsole.log('Action : SING');\\r\\n}\\r\\n\\r\\nfunction dance() {\\r\\n\\tconsole.log('Action: DANCE');\\r\\n}\\r\\n\\r\\ncheckMood(\\\"good\\\"); \\r\\n```\\r\\n\\r\\nê¸°ì¡´ ë™ì‘ ë°©ì‹\\r\\n\\r\\n1. `checkMood` í•¨ìˆ˜ê°€ goodì´ë¼ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬ ë°›ëŠ”ë‹¤.\\r\\n2. goodì´ë©´ `sing` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ console ë¡œê·¸ê°€ ì°íŒë‹¤.\\r\\n\\r\\n>**ì½œë°±í•¨ìˆ˜ì˜ ë“±ì¥ ë°°ê²½** \\r\\në§Œì•½ ì–´ë–¤ í•¨ìˆ˜ì—ì„œ íŠ¹ì • ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³  ì‹¶ì€ë°, ì¼ì¼ì´ bodyì•ˆì— ë©”ì†Œë“œë¥¼ ì„ ì–¸í•´ì¤˜ì•¼ í•œë‹¤ë©´.. ì½”ë“œ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë§¤ìš° ë–¨ì–´ì§„ë‹¤.  \\r\\në”°ë¼ì„œ ë§Œì•½ í•¨ìˆ˜(`checkMood`) íŒŒë¼ë¯¸í„°ì— í•¨ìˆ˜(`sing` , `cry` , `dance`)ë¥¼ ë„˜ê²¨ì£¼ë©´ ë§¤ê°œë³€ìˆ˜ë¡œëŠ” **í•¨ìˆ˜ì˜ í‘œí˜„ì‹** ì²˜ëŸ¼ ì‘ë™í•˜ê²Œ ë©ë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nfunction checkMood(mood,goodCallback,badCallback) {\\r\\n\\tif (mood === \\\"good\\\") {\\r\\n\\t\\t// ...\\r\\n\\t\\tgoodCallback()\\r\\n\\t} else {\\r\\n\\t\\t// ...\\r\\n\\t\\tbadCallback()\\r\\n\\t}\\r\\n}\\r\\n\\r\\nfunction cry() {\\r\\n\\tconsole.log('Action : CRY');\\r\\n}\\r\\n\\r\\nfunction sing() {\\r\\n\\tconsole.log('Action : SING');\\r\\n}\\r\\n\\r\\nfunction dance() {\\r\\n\\tconsole.log('Action: DANCE');\\r\\n}\\r\\n\\r\\ncheckMood(\\\"good\\\",sing,cry); \\r\\n```\\r\\n\\r\\në‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•œ ì½”ë“œë¥¼ ì½œë°±í•¨ìˆ˜ë¼ê³  í•©ë‹ˆë‹¤. ì½œë°±í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°í•¨ìˆ˜ì—ì„œ ì¤‘ìš”í•œ ê°œë…ìœ¼ë¡œ ì“°ì…ë‹ˆë‹¤. \",\"n\":0.066}}},{\"i\":11,\"$\":{\"0\":{\"v\":\"CORSì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì\",\"n\":0.577},\"1\":{\"v\":\"### Origin ì´ë€?\\r\\n\\r\\nì•„ë˜ì™€ ê°™ì´ ì‚¬ì´íŠ¸ë“¤ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. \\r\\n\\r\\n```bash\\r\\nhttp://localhost:8000\\r\\nhttps://api.alazierplace.com:3000/api/\\r\\nhttps://alazierplace.com/2019/05/data-driven-testing-how-we-went-from-150-test-cases-to-1/\\r\\n```\\r\\n\\r\\nscheme(http,https) + IP ì£¼ì†Œ ë˜ëŠ” ë„ë©”ì¸ + :í¬íŠ¸ë„˜ë²„ â‡’ í•´ë‹¹ êµ¬ì„±ì„ Origin ì´ë¼ê³  ì¹­í•©ë‹ˆë‹¤. \\r\\n\\r\\nJSì˜ Script íŒŒì¼ì´ HTTPì— API ìš”ì²­ì„ í• ë•Œ, ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— Origin ì •ë³´ë¥¼ í—¤ë”ì— ì €ì¥í•©ë‹ˆë‹¤. \\r\\n\\r\\n### CORS ì´ìŠˆê°€ ì¤‘ìš”í•œ ì´ìœ \\r\\n\\r\\nOriginì´ ë‹¤ë¥¸ í—¤ë”ê°’ì„ ê³„ì†í•´ì„œ ìš”ì²­í•˜ê²Œ ë˜ë©´, ì•…ì˜ì ì¸ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¸í•´ ë³´ì•ˆì„±ì´ ì·¨ì•½í•´ì§€ê³ , ìœ ì €ì™€ ì‚¬ì´íŠ¸ì— í•´ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\níŠ¹íˆ `same-orign policy` ëŠ” í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ë” ì¤‘ìš”í•˜ê²Œ ë‹¤ë¤„ì§€ëŠ” ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— ë”ìš±ì´ CORSë¥¼ ë”°ì ¸ì¤˜ì•¼ í•©ë‹ˆë‹¤. (*`same-origin-policy` : ì—†ëŠ” ë„ë©”ì¸ ê°’ ë˜ëŠ” í¬íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” í–‰ìœ„) \\r\\n\\r\\n### CORSë€?\\r\\n\\r\\nCross-Origin Resource Sharingì˜ ì•½ìë¡œ, W3Cê°€ ì œì•ˆí•œ ì›¹ í‘œì¤€ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ originê°’ì„ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê°€ëŠ¥ì¼€ í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤.\\r\\n\\r\\n![Request/Response cycle for a CORS Request](https://i0.wp.com/alazierplace.com/wp-content/uploads/2019/06/CORS-flow.png?resize=833%2C406&ssl=1)\\r\\n\\r\\nRequest/Response cycle for a CORS Request\\r\\n\\r\\n**<ì‹¤í–‰ ìˆœì„œ>**\\r\\n\\r\\n- JS í´ë¼ì´ì–¸íŠ¸ê°€ AJAX callì„ ì‹œì‘í•¨\\r\\n- ë¸Œë¼ìš°ì €ê°€ (ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê¸°ì „ì—) requestë¥¼ interceptí•˜ì—¬ `pre-flight` ìš”ì²­ì„ ë³´ëƒ„\\r\\n- ì„œë²„ëŠ” `pre-flight` ì— ëŒ€í•œ responseì— CORS configurationì„ ë‹´ì€ HTTP í—¤ë”ë¥¼ ë¸Œë¼ìš°ì €ì— ë³´ëƒ„\\r\\n- CORSê°€ verifyë˜ë©´ ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ê°€ requestí•œ ê°’ì„ ì„œë²„ì— ë³´ë‚´ê²Œ ëŒ\\r\\n- ì„œë²„ëŠ” ìš”ì²­í•œ responseê°’ì„ JS Clientì— ë³´ë‚´ì¤Œ\\r\\n\\r\\n******************pre-flight request?****************** \\r\\n\\r\\n- HTML ì˜µì…˜ì„ request í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì´ì— ëŒ€í•œ responseë¡œëŠ” CORS configuration(êµ¬ì„± íŒŒì¼)ì„ ëª…ì‹œí•˜ëŠ” HTTP í—¤ë”\\r\\n- í•œë²ˆë§Œ ë³´ë‚´ì§€ê³ , ë¸Œë¼ìš°ì €ì— ì˜í•œ ìºì‹±ì´ ì²˜ë¦¬ëœë‹¤.\\r\\n- ë§¤ë²ˆ CORS requestê°€ ë³´ë‚´ì§€ëŠ”ê±´ ì•„ë‹ˆê³  ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì— ë¶€í•©í• ë•Œ ë³´ë‚´ì§„ë‹¤.\\r\\n    - `HEAD`, `POST`, `GET` ì´ì™¸ì˜ HTTP ë©”ì†Œë“œë¥¼ request í• ë•Œ\\r\\n    - Content-type requestì— application/x-www-form-urlencoded, multipart/form-data ë° text/plain ì´ì™¸ì˜ ê°’ì´ ìˆì„ë•Œ\\r\\n    - ìš”ì²­ì´ Accept, Accept-Language ë° Content-Language ì´ì™¸ì˜ í—¤ë”ë¥¼ ì„¤ì •í• ë•Œ\\r\\n\\r\\n### ê·¸ë˜ì„œ ì™œ ì´ë ‡ê²Œê¹Œì§€ CORSë¥¼ ë”°ì ¸ì•¼ í• ê¹Œ?\\r\\n\\r\\nJavaScriptëŠ” ëŒì•„ê°ˆ ìˆ˜ ìˆëŠ” ì‹¤í–‰í™˜ê²½ì´ ë‹¤ì–‘í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. \\r\\n\\r\\níŠ¹íˆ JavaScript ê°™ì€ ê²½ìš°ëŠ”, ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë¸Œë¼ìš°ì €ì˜ í˜•íƒœë¡œ ì‚¬ìš©ìì—ê²Œ ì œê³µë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì›¹ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë°”ì¼ ì›¹ì—ì„œë„ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì‹¤í–‰í™˜ê²½ ì—­ì‹œ ë‹¤ì–‘í•´ì§‘ë‹ˆë‹¤. \\r\\n\\r\\në¸Œë¼ìš°ì €ëŠ” ë¡œê·¸ì¸ ì •ë³´, ì¿ í‚¤, ì„¸ì…˜ë“± ë¯¼ê°í•œ ì •ë³´ë“¤ì„ ë‹´ê³  ìˆê³  ì´ì— ëŒ€í•œ ì² ì €í•œ ê·œì œê°€ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤. \\r\\n\\r\\në¹„ìœ í•´ì„œ ë§í•˜ë©´.. ì´ìƒí•œ ì‚¬ëŒì´ ë§›ìˆëŠ”ê±° ì‚¬ì¤€ë‹¤ê³  í•´ë„ ì«“ì•„ê°€ë©´ ì•ˆëœë‹¤ ë¥¼ í‘œí˜„í•œ ê°œë…ì´ CORSë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. JavaScript í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ì— ëŒ€í•œ ë¹¡ì„¼ ê·œì •ì´ í•„ìš”í•˜ì£ .\",\"n\":0.059}}},{\"i\":12,\"$\":{\"0\":{\"v\":\"Gatsbyë€?\",\"n\":1},\"1\":{\"v\":\"### Gatsbyì— ëŒ€í•´ ì„¤ëª…í•˜ê¸° ì „ì—..\\r\\n[Gatsby](https://www.gatsbyjs.com/)ëŠ” React ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ëœ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ì´ë•Œ Gatsbyë¥¼ ì•Œê¸°ì „ì— **JAM Stack**ì´ë¼ëŠ” ìš©ì–´ì— ëŒ€í•´ì„œ ì•Œì•„ì•¼ í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\në¸”ë¡œê·¸ë‚˜ í¬íŠ¸í´ë¦¬ì˜¤ì™€ ê°™ì´ **ì •ì  í˜ì´ì§€**ë¥¼ ê°œë°œí•´ì•¼ í•  ë•Œì— í™œìš©ë©ë‹ˆë‹¤. ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ê¸°ì¸ Gatsbyë¥¼ ì‹œì‘í•˜ê¸° ì „ì— <span style=\\\"color:red\\\">JAM Stack</span>ì— ëŒ€í•´ ë¨¼ì € ì•Œì•„ë´…ì‹œë‹¤. \\r\\n\\r\\n\\r\\n### JAM Stackì´ë€?\\r\\n\\r\\nJAM Stackì€ ë” ë¹ ë¥´ê³ , ì•ˆì „í•˜ë©°, ìŠ¤ì¼€ì¼ë§í•˜ê¸° ì‰¬ìš´ ì›¹ì„ ë§Œë“¤ê¸° ìœ„í•´ ë””ìì¸ëœ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤. \\r\\n\\r\\nì¦‰ JAM Stackì€ JavaScript, API, MarkUp Stackì˜ ì•½ìë¡œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ API, HTMLì´ë‚˜ CSS ë“±ì„ ì¹­í•˜ëŠ” MarkUpìœ¼ë¡œ ì´ë£¨ì–´ì§„ ì›¹ êµ¬ì„± ë°©ë²•ì…ë‹ˆë‹¤.\\r\\n\\r\\nì´ë¦„ì— ìˆëŠ” ê·¸ëŒ€ë¡œ ì € 3ê°€ì§€ì˜ ê¸°ìˆ ì„ í†µí•´ í™ˆí˜ì´ì§€ë¥¼ ë§Œë“ ë‹¤ëŠ” ê²ƒì¸ë°, ê·¸ëŸ¼ ê¸°ì¡´ ì›¹ ì‚¬ì´íŠ¸ì™€ëŠ” ì–´ë–¤ ì°¨ì´ì ì´ ìˆì„ê¹Œìš”?\\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/0b81fb8f-ec23-40fc-bc72-93a1a3a4af89/image.png)\\r\\n\\r\\n\\r\\nê¸°ì¡´ ì›¹ ì‚¬ì´íŠ¸ì˜ ë°©ì‹ì€ ëŒ€ë¶€ë¶„ ì„œë²„ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” CMS(Content Management System)ë¡œë¶€í„° ì¶”ì¶œí•œ ë°ì´í„°ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì— ë¿Œë ¤ì£¼ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ëŠ” í´ë¼ì´ì–¸íŠ¸ì— ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ì„œ ë§ì€ ì ˆì°¨ë¥¼ ê±°ì³ì•¼ë§Œ í•˜ê¸° ë•Œë¬¸ì— êµ¬ì¡°ê°€ ë³µì¡í•©ë‹ˆë‹¤.\\r\\n\\r\\ní•˜ì§€ë§Œ JAM Stackì„ ì‚¬ìš©í•œ ë°©ì‹ì€ ê¸°ì¡´ ì›¹ì‚¬ì´íŠ¸ì˜ ë°©ì‹ê³¼ ë‹¤ë¥´ê²Œ ì ˆì°¨ê°€ ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤.\\r\\n\\r\\nê°ì¢… ë§ˆí¬ì—… ìš”ì†Œì™€ ë‹¤ì–‘í•œ APIë¥¼ í†µí•´ ë§Œë“  ì •ì  ì›¹ì‚¬ì´íŠ¸ë¥¼ **Pre-Render**í•œ ê²ƒì„ CDN(Content Delivery Network)ì„ í†µí•´ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê¸°ì¡´ ë°©ì‹ì— ë¹„í•´ **ë” ë¹ ë¥´ê²Œ** ì›¹ ì‚¬ì´íŠ¸ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê±°ì£ . \\r\\n\\r\\n#### 1. ê¸°ì¡´ ë°©ì‹ì— ë¹„í•´ ë” ë¹ ë¥´ê²Œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\nêµ¬ì²´ì ìœ¼ë¡œëŠ” JAM Stackì€ ë Œë”ë§í•  í™”ë©´ë“¤ì„ ëª¨ë‘ Pre-Renderí•˜ì—¬ ì œê³µë˜ì–´ ê·¸ë§Œí¼ ì‚¬ìš©ìì—ê²Œ í™”ë©´ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì¤€ë¹„í•˜ëŠ” ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nì´ì— ë”ë¶ˆì–´ì„œ ë¸Œë¼ìš°ì €ì—ì„œ ì²« ì‘ë‹µì„ ë°›ê¸°ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ì¸ TTFB(Time to First Byte)ë¥¼ ìµœì†Œí™”í•˜ëŠ” ë°ì—ëŠ” ë¯¸ë¦¬ ë¹Œë“œ ëœ íŒŒì¼ì„ CDNì„ í†µí•´ ì œê³µí•˜ëŠ” ê²ƒë³´ë‹¤ ë‚˜ì€ ë°©ë²•ì´ ì—†ë‹¤ê³  í•©ë‹ˆë‹¤.\\r\\n\\r\\n#### 2. ì•ˆì „í•œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nJAM Stackì€ APIë¥¼ í†µí•´ ì •ì  ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\r\\n\\r\\nì—¬ê¸°ì„œ ì‚¬ìš©ë˜ëŠ” APIëŠ” JAM Stackì„ í™œìš©í•œ ê° í”„ë ˆì„ì›Œí¬ì—ì„œì˜ **ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤**ë¡œì„œ, ì‚¬ì´íŠ¸ ìƒì„±ì„ ìœ„í•œ í”„ë¡œì„¸ìŠ¤ê°€ ì¶”ìƒí™”ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê·¸ë§Œí¼ ê³µê²© ë…¸ì¶œ ë²”ìœ„ê°€ ê°ì†Œí•˜ê²Œ ë©ë‹ˆë‹¤.\\r\\n\\r\\në”°ë¼ì„œ ê°œë°œìëŠ” ì›¹ ê°œë°œ ì¤‘ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì·¨ì•½ì ì— ëŒ€í•´ ë³´ë‹¤ ëœ ì‹ ê²½ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n#### 3. ìŠ¤ì¼€ì¼ë§í•˜ê¸° ì‰¬ìš´ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nì •ì  ì›¹ì‚¬ì´íŠ¸ì—ì„œì˜ ìŠ¤ì¼€ì¼ë§ì´ë€, ë” ë§ì€ ì§€ì—­ì—ì„œ í™ˆí˜ì´ì§€ë¥¼ ì œê³µí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ë¯¸ë¦¬ ë¹Œë“œ ëœ íŒŒì¼ ì œê³µì„ ë‹´ë‹¹í•˜ëŠ” CDNì´ ê·¸ ì—­í• ì„ ì¶©ë¶„íˆ ìˆ˜í–‰í•´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\n\\r\\n### Gatsby VS Next.js\\r\\n\\r\\nGatsbyì™€ í•¨ê»˜ í•­ìƒ ì–¸ê¸‰ë˜ëŠ” JAM Stack ê¸°ë°˜ í”„ë ˆì„ì›Œí¬ì¸ Next.jsì™€ ë¹„êµë¥¼ ë˜ ë¹¼ë†“ì„ ìˆ˜ê°€ ì—†ì£ . ë‘˜ ëª¨ë‘ React ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\\r\\n\\r\\nê·¸ëŸ¼ ì´ì¯¤ì—ì„œ í•œë²ˆì¯¤ì€ ëª¨ë‘ ê³ ë¯¼ì„ í•  ê²ƒì…ë‹ˆë‹¤. \\r\\n\\r\\n>ğŸ¤·ğŸ¼â€â™€ï¸ Next.jsê°€ ëŒ€ì„¸ë¼ëŠ”ë°? í˜„ì¬ 1ë“±ì„ ë‹¬ë¦¬ê³  ìˆëŠ” í”„ë ˆì„ì›Œí¬ë¼ëŠ”ë°.. \\r\\n\\r\\ní•­ìƒ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ìˆ˜í–‰í•˜ë©´ì„œ ë”œë ˆë§ˆì¸ ë¶€ë¶„ì¸ê²ƒ ê°™ìŠµë‹ˆë‹¤. íŠ¸ë Œë“œë¥¼ ì«“ëŠ”ë‹¤ëŠ”ê²ƒ..í•˜ì§€ë§Œ ê° í”„ë ˆì„ì›Œí¬ë§ˆë‹¤ ëª¨ë‘ ì¥ë‹¨ì ì´ ìˆê³ , ëª©ì ì— ë§ê²Œ ì˜ í™œìš©í•˜ëŠ”ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.\\r\\n\\r\\nGatsbyì™€ Next.js ì—­ì‹œ ë‘ í”„ë ˆì„ì›Œí¬ì˜ ì‚¬ìš© ìš©ë„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.\\r\\n\\r\\n`Next.js`ëŠ” ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ì˜ ê¸°ëŠ¥ë„ ìˆì§€ë§Œ ì£¼ë¡œ **SSR**ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ `Gatsby`ëŠ” **ì„œë²„ ì—†ì´**, ì˜¤ë¡œì§€ ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\\r\\n\\r\\nê·¸ë˜ì„œ `Next.js`ëŠ” ì£¼ë¡œ ê¸°ì—…ë‹¨ìœ„ì˜ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— í™œìš©ì´ ë˜ê³ , `Gatsby`ëŠ” ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ë‚˜ ê¸°ìˆ  ë¸”ë¡œê·¸ ê°œë°œì— í™œìš©ì´ ë©ë‹ˆë‹¤. (ì €ëŠ” ì €ë§Œì˜ ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ ì˜ˆì •ì´ê¸°ì— `Gatsby`ë¥¼ í™œìš©í• ê²ƒì…ë‹ˆë‹¤.)\\r\\n\\r\\n\",\"n\":0.05}}},{\"i\":13,\"$\":{\"0\":{\"v\":\"Redux Toolkit - useDispatchë¡œ state rasieí•˜ê¸°\",\"n\":0.408},\"1\":{\"v\":\"## stateë¥¼ useDispatchë¡œ ë³´ë‚´ê¸° \\r\\n\\r\\nì´ì „ í¬ìŠ¤íŒ…ì—ì„œ Redux toolkitìœ¼ë¡œ storeë¥¼ ì…‹íŒ…ì„ í–ˆë‹¤ë©´, ì‹¤ì œë¡œ ì´ì œ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ìˆ˜í–‰í•  ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ importí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. \\r\\n\\r\\n\\r\\n## ìˆœì„œ\\r\\n**1. ì»´í¬ë„ŒíŠ¸ì— ì•Œë§ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ importí•˜ê¸°**\\r\\n\\r\\ní•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œ todoList Appì˜ í•µì‹¬ì ì¸ ê¸°ëŠ¥ì¸ **í• ì¼ì„ ì¶”ê°€** í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— ì•Œë§ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ import í•´ë³´ê² ìŠµë‹ˆë‹¤. \\r\\n\\r\\nreducer slice ì— `addTodo()` ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ êµ¬í˜„í–ˆìœ¼ë¯€ë¡œ, í•´ë‹¹ í•¨ìˆ˜ë¥¼ import í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nimport { addTodo } from '../redux/slices/todoSlice';\\r\\n```\\r\\n\\r\\n`slices` ì— ë¦¬ë“€ì„œ í•¨ìˆ˜ë“¤ì„ exportí–ˆê¸° ë•Œë¬¸ì— importê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\\r\\n\\r\\n#### **2. stateë¥¼ raiseí•˜ê¸° í•˜ê¸°** \\r\\n\\r\\në¶€ëª¨ ì»´í¬ë„ŒíŠ¸ storeì—ì„œ ëª¨ë“  stateë¥¼ ë°”ê¾¸ê¸° ë•Œë¬¸ì— stateë¥¼ ë°”ê¾¼ë‹¤ëŠ” ì „ë‹¬í•˜ëŠ” ë§¤ê°œì²´ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´ ë§¤ê°œì²´ëŠ” `useDispatch()` í›…ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nimport { useDispatch } from 'react-redux';\\r\\n\\r\\n// ì»´í¬ë„ŒíŠ¸ ë‚´ì— ì‘ì„±í•©ë‹ˆë‹¤. \\r\\nconst dispatch = useDispatch(); \\r\\n```\\r\\n`useDispatch()` ë¥¼ importí•©ë‹ˆë‹¤. \\r\\n\\r\\n![](https://velog.velcdn.com/images/damin1025/post/a1626d25-39a9-448f-a5fb-6a20d073bf99/image.PNG)\\r\\n\\r\\nê·¸ë¦¬ê³  `dispatch` í•¨ìˆ˜ ë‚´ë¶€ì— ìœ„ì—ì„œ importí•œ ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ triggerí•©ë‹ˆë‹¤. ì´ì™€ ê°™ì€ processë¡œ ë¦¬ë“€ì„œ í•¨ìˆ˜ë¡œ stateë¥¼ raiseí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \",\"n\":0.088}}},{\"i\":14,\"$\":{\"0\":{\"v\":\"Promise ê°ì²´, async-await í•¨ìˆ˜ë¥¼ í™œìš©í•œ ë¹„ë™ê¸° ì²˜ë¦¬\",\"n\":0.378},\"1\":{\"v\":\"## Promise ê°ì²´\\r\\n\\r\\në™ê¸°: ì½œë°± ì§€ì˜¥ì—ì„œ íƒˆì¶œí•˜ê¸°\\r\\n\\r\\n**ë¹„ë™ê¸° ì‘ì—…ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” 3ê°€ì§€ ìƒíƒœ**\\r\\n\\r\\n![https://joshua1988.github.io/images/posts/web/javascript/promise.svg](https://joshua1988.github.io/images/posts/web/javascript/promise.svg)\\r\\n- Pending: ëŒ€ê¸°ìƒíƒœ (ì„±ê³µ or ì‹¤íŒ¨)\\r\\n- Fulfilled: ì„±ê³µ (Pending ìƒíƒœì—ì„œ resolve ëë‹¤)\\r\\n- Rejected: ì‹¤íŒ¨ (Pending ìƒíƒœì—ì„œ rejecet ëë‹¤)\\r\\n\\r\\n\\r\\n#### Promise ê°ì²´ë¥¼ í™œìš©í•œ ë¹„ë™ê¸° êµ¬ë¬¸\\r\\n```jsx\\r\\n// ê¸°ì¡´ ë¹„ë™ê¸° ì²˜ë¦¬ \\r\\nfunction isPositive(number,resolve,reject) {\\r\\n\\tsetTimeout(()=> {\\r\\n\\t\\tif(typeof number === 'number') {\\r\\n\\t\\t\\t//resolve\\r\\n\\t\\t\\tresolve(number >=0 ? \\\"ì–‘ìˆ˜\\\" : \\\"ìŒìˆ˜\\\");\\r\\n\\t\\t} else {\\r\\n\\t\\t\\treject(\\\"ì£¼ì–´ì§„ ê°’ì´ ìˆ«ìí˜•ì´ ì•„ë‹™ë‹ˆë‹¤\\\");\\r\\n\\t\\t},2000);\\r\\n}\\r\\n\\r\\n// Promise ê°ì²´ë¥¼ ë°˜í™˜í•˜ì—¬ êµ¬í˜„í•œ ë¹„ë™ê¸° ì½”ë“œ\\r\\nfunction isPositiveP(number) {\\r\\n\\t//ì‹¤í–‰ì \\r\\n\\treturn new Promise(resolve,reject) => {\\r\\n\\t\\tsetTimeout(()=> {\\r\\n\\t\\t\\tif(typeof number === 'number') {\\r\\n\\t\\t\\t\\tresolve(number >=0 ? \\\"ì–‘ìˆ˜\\\" : \\\"ìŒìˆ˜\\\");\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\treject(\\\"ì£¼ì–´ì§„ ê°’ì´ ìˆ«ìí˜•ì´ ì•„ë‹™ë‹ˆë‹¤\\\");\\r\\n\\t\\t\\t},2000);\\r\\n\\t};\\r\\n}\\r\\n\\r\\nconst res = isPostiveP(101); //101\\r\\n\\r\\nres\\r\\n\\t.then((res) => { \\r\\n\\t\\tconsole.log(\\\"ì‘ì—… ì„±ê³µ: \\\",res);\\r\\n\\t}).catch((err)=>{\\r\\n\\t\\t\\tconsole.log(\\\"ì‘ì—…ì—ëŸ¬\\\")\\r\\n\\t}); \\r\\n```\\r\\n\\r\\n`then` ê³¼ `catch` êµ¬ë¬¸ì„ í™œìš©í•˜ì—¬ Fulfilled ìƒíƒœì¸ì§€ Rejected ìƒíƒœì¸ì§€ ì²˜ë¦¬ ê²°ê³¼ê°’ì„ ë°˜í™˜ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n\\r\\n\\r\\n\\r\\n## ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ ì—°ê²°í•˜ê¸° (Promise Chaining)\\r\\n\\r\\ní”„ë¡œë¯¸ìŠ¤ì˜ ë˜ ë‹¤ë¥¸ íŠ¹ì§•ì€ **ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì—°ê²°**í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì• ì˜ˆì œì—ì„œÂ `then()`Â ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  ë‚˜ë©´ ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ê°€ ë°˜í™˜ë©ë‹ˆë‹¤. \\r\\n\\r\\n```jsx\\r\\nfunction getData() {\\r\\n  return new Promise({\\r\\n    // ...\\r\\n  });\\r\\n}\\r\\n\\r\\n// then() ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì—°ê²°í•œ í˜•ì‹\\r\\ngetData()\\r\\n  .then(function(data) {\\r\\n    // ...\\r\\n  })\\r\\n  .then(function() {\\r\\n    // ...\\r\\n  })\\r\\n  .then(function() {\\r\\n    // ...\\r\\n  });\\r\\n```\\r\\n\\r\\n## async- await : ì§ê´€ì ì¸ ë¹„ë™ê¸° ì²˜ë¦¬ ì½”ë“œ ì‘ì„±\\r\\n```jsx\\r\\n// async ì˜ˆì œ\\r\\nasync function helloAsync() {\\r\\n\\treturn 'hello async';\\r\\n} \\r\\n```\\r\\n\\r\\n`helloAsync()` í•¨ìˆ˜ ì½˜ì†”ì„ ì°ìœ¼ë©´ **Promise ê°ì²´**ë¥¼ ë°˜í™˜í•˜ëŠ”ë° ì´ëŠ” `async` í•¨ìˆ˜ì˜ íŠ¹ì§• ì¤‘, Promise ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” íŠ¹ì§• ë•Œë¬¸ì…ë‹ˆë‹¤.\\r\\n\\r\\nì´ë•Œ ë‹¤ìŒ ì½”ë“œë¥¼ ì¶œë ¥í•´ë³´ë©´ â€˜hello asyncâ€™ê°€ ì •ìƒì ìœ¼ë¡œ ì½˜ì†”ì— ì¶œë ¥ë©ë‹ˆë‹¤. ì´ëŠ” `res` ì½œë°±í•¨ìˆ˜ê°€ `helloAsync`í•¨ìˆ˜ì˜ returnì„ ë°”ë¼ë´¤ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \\r\\n```jsx\\r\\nhelloAsync.then((res) => {\\r\\n\\tconsole.log(res);\\r\\n});\\r\\n```\\r\\n\\r\\n```jsx\\r\\n// await ì˜ˆì œ\\r\\nfunction delay(ms) {\\r\\n\\treturn new Promise(resolve) => {\\r\\n\\t\\tsetTimeout((resolve,ms);\\r\\n\\t});\\r\\n}\\r\\n\\r\\nasync function helloAsync() {\\r\\n\\treturn delay(3000).then(()=> {\\r\\n\\t\\treturn 'hello async';\\r\\n\\t});\\r\\n} \\r\\n```\\r\\n\\r\\nìœ„ í•¨ìˆ˜ë¥¼ **async-await êµ¬ë¬¸**ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\\r\\n```jsx\\r\\nasync function helloAsync() {\\r\\n\\tawait delay(3000);\\r\\n\\treturn 'hello async';\\r\\n} \\r\\n\\r\\nasync function main() {\\r\\n\\tconst res = await helloAsync();\\r\\n\\tconsole.log(res);\\r\\n} \\r\\nmain(); // 3ì´ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ 'hello async' ë°˜í™˜\\r\\n```\\r\\n\\r\\nì´ë•Œ `await` í•¨ìˆ˜ëŠ” ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì—, awaitì— ì„ ì–¸ëœ êµ¬ë¬¸ì„ ë¨¼ì € ìˆ˜í–‰ì„ í•´ì•¼ returní•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì´ë‹¤. \\r\\n\\r\\n#### async-await êµ¬ë¬¸ ì •ë¦¬\\r\\n```jsx\\r\\nasync function í•¨ìˆ˜ëª…() {\\r\\n  await ë¹„ë™ê¸°_ì²˜ë¦¬_ë©”ì„œë“œ_ëª…();\\r\\n}\\r\\n```\\r\\n\\r\\n## API í˜¸ì¶œ\\r\\nAPI : í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ (request and response)\\r\\n\\r\\n\\r\\n\\r\\n```jsx\\r\\n// <JSON placeholderë¥¼ í™œìš©í•œ API í˜¸ì¶œ ë©”ì†Œë“œ ì˜ˆì œ>\\r\\nlet response = fetch('Json Placeholder URL...').then((res) => \\r\\n\\tconsole.log(res)\\r\\n);\\r\\n```\\r\\n\\r\\nì´ë•Œ `fetch()` í•¨ìˆ˜ì— hoverì‹œ, `Promise<Response>` ë¡œ Promise ê°ì²´ë¥¼ ë°˜í™˜í•¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ `fetch()` í•¨ìˆ˜ëŠ” **ë¹„ë™ê¸° í•¨ìˆ˜** ì„ì„ ì˜ë¯¸í•˜ê³ , `then` í‚¤ì›Œë“œë„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\r\\n\\r\\nì´ë¥¼ ì´ì œ async-await í•¨ìˆ˜ë¥¼ í†µí•´ ë¦¬íŒ©í† ë§ ì‹œ, ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\\r\\n\\r\\n```jsx\\r\\nasync functiong getData() {\\r\\n\\tlet rawResponse = await fetch('Json URL');\\r\\n\\tlet jsonResponse = await rawResponse.json();\\r\\n\\tconsole.log(jsonResponse);\\r\\n}\\r\\ngetData(); // ê°ì²´ ë°°ì—´ ë°˜í™˜ \\r\\n```\",\"n\":0.053}}}]}","data":[{"id":"5ca741cd-55d3-5b76-82fd-a6b5ff84ea06","path":"/Develop/ChartJS-ê·¸ë˜í”„-ì´ˆê¸°í™”-destroy/","title":"chart.js ê·¸ë˜í”„ ì´ˆê¸°í™” - destroy()","body":"## Issue - \"Canvas is already in use\"\r\nì›¹íŒ© ë²ˆë“¤ë§ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ë‚˜ë‹ˆ, ë˜ ë‹¤ë¥¸ ì´ìŠˆê°€ ë°œìƒí–ˆì—ˆë‹¤. ~~ì‚° ë„˜ì–´ ì‚°~~\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/3ad00259-a0dc-4322-a127-1233bc165b1b/image.PNG)\r\n\r\nêµ¬ê¸€ë§ í•´ë³´ë‹ˆ, ê½¤ ìœ ëª…í•œ ì—ëŸ¬ ë¡œê·¸ì¸ê²ƒ ê°™ì•˜ë‹¤.\r\n\r\nì´ˆê¸°ì— ê·¸ë˜í”„ë¥¼ ë¡œë”©í•˜ê³  ê·¸ë¦¬ëŠ”ë°ì—ëŠ” ë¬¸ì œê°€ ì—†ì—ˆì§€ë§Œ, ë‹¤ë¥¸ ë‚˜ë¼ë¥¼ í´ë¦­í•˜ê³  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ë•Œ, ê¸°ì¡´ ê·¸ë˜í”„ê°€ **ì´ˆê¸°í™”** ë˜ì§ˆ ì•Šì•„ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì´ìŠˆê°€ ë°œìƒí–ˆë‹¤. 6ì¼ë™ì•ˆ ì‚½ì§ˆí•œ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ì´ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.\r\n\r\n### í•´ê²°\r\n[chart.js ê³µì‹ë¬¸ì„œ](https://www.chartjs.org/docs/latest/developers/api.html) ì—ì„œëŠ” ê¸°ì¡´ ì°¨íŠ¸ instanceë¥¼ ë‚ ë¦¬ê³  ì‹¶ìœ¼ë©´ `.destroy()` ë©”ì†Œë“œë¥¼ ì¨ë³´ë¼ê³  í•©ë‹ˆë‹¤. \r\n\r\n>This must be called before the canvas is reused for a new chart.\r\n\r\në„¤ consoleì— ì¡í˜”ë˜ ì—ëŸ¬ë‘ ë˜‘ê°™ì€ ë§ì„ í•´ì£¼ê³  ìˆì£ ,, ì´ê±¸ë¡œ ì‡¼ë¶€ë¥¼ ë´…ì‹œë‹¤.\r\n\r\n### ì½”ë“œ\r\n```tsx\r\nimport Chart from chart.js/auto\r\n\r\nfunction renderChart(data: number[], labels: string[]) {\r\n  const lineChart = $('#lineChart') as HTMLCanvasElement;\r\n  const ctx = lineChart.getContext('2d');\r\n  if (Chart.getChart(lineChart)) {\r\n    Chart.getChart(lineChart)?.destroy();\r\n  }\r\n\r\n  Chart.defaults.color = '#f5eaea';\r\n  Chart.defaults.font.family = 'Exo 2';\r\n  if (!ctx) {\r\n    return;\r\n  }\r\n  new Chart(ctx, {\r\n    type: 'line',\r\n    data: {\r\n      labels,\r\n      datasets: [\r\n        {\r\n          label: 'Confirmed for the last two weeks',\r\n          backgroundColor: '#feb72b',\r\n          borderColor: '#feb72b',\r\n          data,\r\n        },\r\n      ],\r\n    },\r\n    options: {\r\n      maintainAspectRatio: false, //ì°¨íŠ¸ ê·¸ë˜í”„ ì‚¬ì´ì¦ˆ ê³ ì •\r\n    },\r\n  });\r\n}\r\n```\r\ní•´ë‹¹ ì½”ë“œì—ì„œ 3ë²ˆì§¸ lineì˜ ifë¬¸ì„ ì£¼ëª©í•˜ì‹œë©´,\r\n1. `Chart.getChart(lineChart)`ê°€ ë§Œì•½ ê°’ì´ í• ë‹¹ë˜ì–´ ìˆë‹¤ë©´ (=ê·¸ë˜í”„ê°€ ê·¸ë ¤ì ¸ ìˆìŒ)\r\n2. ê·¸ ì°¨íŠ¸ê°’ì„ ë¶ˆëŸ¬ì˜¤ê³ , `destroy()` (=ê·¸ë˜í”„ ì´ˆê¸°í™”) \r\n\r\në¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ìˆ˜ì • ì‹œ, ê·¸ë˜í”„ê°€ ë™ì ìœ¼ë¡œ ë³€í•˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ í•´ê²°ë©ë‹ˆë‹¤. \r\n\r\n### +) íƒ€ì… ê°•í•˜ê²Œ ì¡ì•„ë‚´ê¸° : ì˜µì…”ë„ ì²´ì´ë‹(ì—°ì‚°ì : ?)\r\nì´ë•Œ `Chart.getChart(lineChart)?.destroy();` ì´ê²Œ ë­”ê°€ ì‹¶ìœ¼ì‹¤í…ë°ìš”\r\ní•´ë‹¹ ì—°ì‚°ìëŠ” **Optional Chaining** ì´ë¼ê³  ë‹¤ìŒ ì½”ë“œì™€ ë™ì¼í•œ ì˜ë¯¸ë¥¼ ê°–ìŠµë‹ˆë‹¤.  \r\n\r\n```js\r\nif (Chart.getChart(lineChart) === null \r\n    || Chart.getChart(lineChart) === undefined) { \r\n  return; \r\n}\r\nelse { \r\n  Chart.getChart(lineChart).destroy(); \r\n}\r\n```\r\n`Chart.getChart(lineChart)` ê°€ `null` ë˜ëŠ” `undefined`ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´(=ê·¸ë˜í”„ê°€ ì´ë¯¸ ê·¸ë ¤ì ¸ ìˆëŠ” ìƒíƒœ) `destroy()` í•˜ë¼ëŠ”ê²ƒê³¼ ë™ì¼í•œ ì˜ë¯¸ë¥¼ ì§€ë‹™ë‹ˆë‹¤. "},{"id":"d12c5bee-3eb8-5140-bf4d-d21a9a77880c","path":"/Develop/Gastby-ì´ì „ê¸€-ë‹¤ìŒê¸€-êµ¬í˜„/","title":"Gatsby ë¸”ë¡œê·¸ - ì´ì „ê¸€/ë‹¤ìŒê¸€ ë²„íŠ¼ ë¡œì§ êµ¬í˜„í•˜ê¸° ","body":"## ë™ê¸° \r\nìš”ì¦˜ `Gatsby`ë¥¼ í™œìš©í•˜ì—¬ Tech Blogë¥¼ êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì–¼ì¶” í¬ìŠ¤íŒ… í…œí”Œë¦¿ë„ êµ¬í˜„ì´ ëœ ìƒíƒœì—ì„œ, ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ë§Œë“  ë¸”ë¡œê·¸ì™€ íŠ¹íˆ ê°œë°œ ë¸”ë¡œê·¸ë¡œ ìœ ëª…í•œ **velog**ì—ì„œ ì–´ë–¤ ìš”ì†Œë“¤ì„ ê°–ê³  ìˆëŠ”ì§€ ì²´í¬í•´ë³¸ ê²°ê³¼, \r\n\r\n- TOC (Table Of Contents) ê¸°ëŠ¥ \r\n- ì´ì „ê¸€/ë‹¤ìŒê¸€ ê¸°ëŠ¥ \r\n- ëŒ“ê¸€ ê¸°ëŠ¥ \r\n- ScrollToTop ë²„íŠ¼ ê¸°ëŠ¥ \r\n\r\nì´ ì •ë„ë¡œ ì¶”ë ¤ ë³¼ ìˆ˜ ìˆì„ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ë„ ìµœì†Œí•œ ì € ê¸°ëŠ¥ë“¤ì€ íƒ‘ì¬í•œ ë¸”ë¡œê·¸ë¥¼ ì œì‘í•´ì•¼ì§€ ìƒê°í–ˆìŠµë‹ˆë‹¤. ëŒ“ê¸€ ê¸°ëŠ¥(Utterance í™œìš©)ì´ë‚˜ ScrollToTop ê¸°ëŠ¥ì€ êµ¬ê¸€ë§í•˜ë©´ ì½”ë“œ ì˜ˆì œë„ ë§ì•„ì„œ ê¸ˆë°© êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \r\n\r\nì œê°€ ì´ ë¸”ë¡œê·¸ë¥¼ ì“°ëŠ” ì´ìœ ëŠ” **ì´ì „ê¸€/ë‹¤ìŒê¸€** ê¸°ëŠ¥ ì œì‘ê¸°ë¥¼ í•´ë‹¹ í¬ìŠ¤íŒ…ì„ í†µí•´ì„œ ë‚˜ì—´í•˜ê³ ì í•©ë‹ˆë‹¤.. (ì™œëƒí•˜ë©´ 3ì¼ë™ì•ˆ ì‚½ì§ˆí–ˆê¸°ì—)\r\nê·¸ë¦¬ê³  ê²°ì •ì ì¸ ë™ê¸°ëŠ” ë‹¨ìˆœíˆ ì‚¬ëŒë“¤ì´ ì´ ê¸°ëŠ¥ì„ ë§ì´ ê°œë°œí•´ì„œ ë‚˜ë„ í•´ì•¼ì§€ ë³´ë‹¨ ì œ ë¸”ë¡œê·¸ì˜ ì‘ë™ êµ¬ì¡°ì— ëŒ€í•´ì„œ ìƒê°í–ˆìŠµë‹ˆë‹¤.\r\n\r\n>ğŸ‘€ ì‹œë‚˜ë¦¬ì˜¤ \r\n>1. ë¸”ë¡œê·¸ë¥¼ ì½ëŠ”ë‹¤.\r\n>2. ì´ì „ê¸€ì´ë‚˜ ë‹¤ìŒê¸€ì„ ë³´ê³  ì‹¶ì€ë°?\r\n>3. ScrollToTop ë²„íŠ¼ì„ ëˆ„ë¥´ê³  `<-` ë²„íŠ¼ì„ ëˆŒëŸ¬ í™ˆí™”ë©´ìœ¼ë¡œ ëŒì•„ì˜¨ë‹¤\r\n\r\nì‚¬ìš©ì ê²½í—˜ì´ ë–¨ì–´ì§ˆê²ƒ ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ **ì´ì „ê¸€/ë‹¤ìŒê¸€** ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì„œ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ í¬ìŠ¤íŒ…ë„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ê² ë‹¤! ë¼ëŠ” ìƒê°ì—ì„œ ì‹œì‘í–ˆìŠµë‹ˆë‹¤. \r\n\r\n## ê²°ê³¼\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/577bc8c0-a684-4373-9bb8-700597f2a817/image.gif)\r\n\r\nìš°ì„  ê²°ê³¼ë¶€í„° ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë™ì‘ ë°©ì‹ì€ ìœ„ì™€ ê°™ê³ , ë§Œì•½ ê°€ì¥ ìµœì‹  í¬ìŠ¤íŠ¸ì´ê±°ë‚˜ ì•„ë‹ˆë©´ ê°€ì¥ ì˜¤ë˜ëœ í¬ìŠ¤íŠ¸ë¼ë©´ ë‹¤ìŒê¸€/ì´ì „ê¸€ ë²„íŠ¼ì´ ë¹„í™œì„±í™” ë  ìˆ˜ ìˆë„ë¡ ë¡œì§ì„ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤. \r\n\r\n## gatsby-node.js íŒŒì¼ ìˆ˜ì • \r\n\r\në§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ í˜ì´ì§€ë¡œ ë³€í™˜í•´ì£¼ëŠ” `createPages` ì—ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ queryë¥¼ ìš”ì²­í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤. í•´ë‹¹ ë¶€ë¶„ì—ì„œëŠ”, `contents` í´ë” (ì´ ë¶€ë¶„ì€ `gatsby-config.js`ì—ì„œ optionsì„ ì„¤ì •í•´ì¤¬ì„ê±°ë¼ê³  ìƒê°í•˜ê³  ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.) ì— ë‹´ê¸´ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ë“¤ì„ ëª¨ë‘ ìš”ì²­í•©ë‹ˆë‹¤. \r\n\r\n```jsx\r\nexports.createPages = async ({ actions, graphql, reporter }) => {\r\n  const { createPage } = actions;\r\n\r\n  // Get All Markdown File For create Pages\r\n  const queryAllMarkdownData = await graphql(\r\n    `\r\n      {\r\n        allMarkdownRemark(\r\n          sort: {\r\n            order: DESC\r\n            fields: [frontmatter___date, frontmatter___title]\r\n          }\r\n        ) {\r\n          edges {\r\n            node {\r\n              fields {\r\n                slug\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    `,\r\n  );\r\n  // ...\r\n}\r\n```\r\në°˜ë“œì‹œ `graphiql` ì—ì„œ í•´ë‹¹ ì¿¼ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. (slugê°€ ì•Œë§ê²Œ ë‚˜ì˜¤ëŠ”ì§€ê°€ ì¤‘ìš”) \r\n\r\n\r\n```jsx\r\n  // Import Post Template Component\r\n  const PostTemplateComponent = path.resolve(\r\n    __dirname,\r\n    'src/templates/post_template.tsx',\r\n  );\r\n\r\n  const posts = queryAllMarkdownData.data.allMarkdownRemark.edges\r\n  posts.forEach((\r\n    {\r\n      node: {\r\n        fields: { slug },\r\n      }\r\n    },\r\n    index\r\n  ) => {\r\n    // Logic of Prev/Next Button \r\n    const prev = index === 0 ? null : posts[index-1]\r\n    const next = index === posts.length -1 ? null: posts[index+1]\r\n    createPage({\r\n      path: slug,\r\n      component: PostTemplateComponent,\r\n      context: {\r\n        slug,\r\n        prev,\r\n        next,\r\n      }\r\n    })\r\n  })\r\n```\r\n`posts` ë°°ì—´ì„ ëŒë©´ì„œ, ì•„ê¹Œ ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë¡œì§ì„ `prev`, `next`ì— ì‘ì„±í•©ë‹ˆë‹¤. ë§Œì•½ ê°€ì¥ ìµœì‹ ê¸€ì´ê±°ë‚˜, ê°€ì¥ ì˜¤ë˜ëœ ê¸€ì´ë©´ slugëŠ” <span style=\"color:red\">null</span>ë¡œ ì„¸íŒ…ë ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³   `createPage`ì— contextì— `prev`, `next`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. \r\n\r\n\r\n## ì´ì „ê¸€/ë‹¤ìŒê¸€ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„í•˜ê¸° \r\nì´ì œ ì´ì „ê¸€/ë‹¤ìŒê¸€ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“­ì‹œë‹¤. ë­ ë””ìì¸ì ì¸ ë¶€ë¶„ì€ ë³¸ì¸ì´ ì›í•˜ëŠ”ëŒ€ë¡œ Stylingì— ì§„í–‰í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. \r\n\r\nê³µí†µì ì¸ ë¶€ë¶„ì´ë¼ë©´, `Props`ë¥¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸(`post_template`-ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… í…œí”Œë¦¿)ì—ì„œ ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„ì¼ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” slugë¥¼ í™œìš©í•´ì„œ ì ‘ê·¼í•  ê²ƒì´ê³ , slugëŠ” string íƒ€ì…ì…ë‹ˆë‹¤. ë”°ë¼ì„œ Propsë¡œëŠ” `ì´ì „ê¸€ slug`ì™€ `ë‹¤ìŒê¸€ slug`ë¥¼ ë°›ì•„ì˜¤ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. \r\n\r\n```tsx\r\nexport type PrevNextProps = {\r\n  previousPagePath: string | null\r\n  nextPagePath: string | null\r\n}\r\n\r\nconst PostPrevNextBtn: FunctionComponent<PrevNextProps> = function ({\r\n  previousPagePath,\r\n  nextPagePath,\r\n}) {\r\n  return (\r\n    <StyledPager>\r\n      <ul>\r\n        <li>\r\n          {previousPagePath !== null ? (\r\n            <Link to={previousPagePath}>\r\n              <Left /> ë‹¤ìŒê¸€\r\n            </Link>\r\n          ) : (\r\n            <span>\r\n              <Left /> ë‹¤ìŒê¸€\r\n            </span>\r\n          )}\r\n        </li>\r\n\r\n        <li>\r\n          {nextPagePath !== null ? (\r\n            <Link to={nextPagePath}>\r\n              ì´ì „ê¸€ <Right />\r\n            </Link>\r\n          ) : (\r\n            <span>\r\n              ì´ì „ê¸€ <Right />\r\n            </span>\r\n          )}\r\n        </li>\r\n      </ul>\r\n    </StyledPager>\r\n  )\r\n}\r\n\r\nexport default PostPrevNextBtn\r\n```\r\n\r\n## post_template ì—ì„œ slug ì¡°ì‘í•˜ê¸° \r\npost_templateì€ ì—„ë°€íˆ ë”°ì§€ë©´ ìœ„ì—ì„œ ì„¤ê³„í•œ ì»´í¬ë„ŒíŠ¸ì— Propsë¥¼ ë¿Œë ¤ì¤˜ì•¼í•  ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” í•´ë‹¹ í…œí”Œë¦¿ì—ì„œ `gatsby-node.js` ì—ì„œ queryë¡œ ìš”ì²­í•œ ê°’ë“¤ì„ ì´ì œ ë°›ì•„ì™€ì•¼ í•©ë‹ˆë‹¤. ìš°ì„  Propsë¡œ ê·¸ ë¶€ë¶„ì— ëŒ€í•œ íƒ€ì…ì„ ëª…ì‹œí•©ë‹ˆë‹¤. \r\n\r\n```tsx\r\ntype PostTemplateProps = {\r\n  // ...\r\n  pageContext: {\r\n    prev: {\r\n      node: {\r\n        fields: {\r\n          slug: string\r\n        }\r\n      }\r\n    }\r\n    next: {\r\n      node: {\r\n        fields: {\r\n          slug: string\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nê·¸ë¦¬ê³  pageContextê°€ ì˜ ë°›ì•„ì™€ì§€ëŠ”ì§€ `console.log(pageContext)`ë¥¼ ìˆ˜í–‰í•´ë³´ì„¸ìš”. `next,prev,slug`ê°€ objectí˜•íƒœë¡œ ì¶œë ¥ì´ ëœë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ queryìš”ì²­ê°’ì„ ë°›ì•„ì™”ìŠµë‹ˆë‹¤. \r\n\r\n```tsx\r\nconst PostTemplate: FunctionComponent<PostTemplateProps> = function ({\r\n  //...\r\n  pageContext: { prev, next },\r\n}) {\r\n  return (\r\n    //...\r\n      <PostPrevNextBtn\r\n        previousPagePath={prev ? prev.node.fields.slug : null}\r\n        nextPagePath={next ? next.node.fields.slug : null}\r\n      />\r\n    //...\r\n  )\r\n}\r\n```\r\nì˜ ë°›ì•„ì˜¨ `next`ì™€ `prev`ì˜ objectê°’ì„ parsingí•œ slugê°’ì„, `PostPrevNextBtn` ì»´í¬ë„ŒíŠ¸ì— Propsë¡œ ë„˜ê²¨ì¤ë‹ˆë‹¤. \r\n\r\nì´ë•Œ ê°€ì¥ ìµœì‹ ê¸€ì´ë‚˜,ê°€ì¥ ì˜¤ë˜ëœ ê¸€ì— ëŒ€í•´ì„œëŠ” pageContext consoleì„ ì°ì–´ë³´ë©´ `prev,next` objectì´ **keyê°’ìœ¼ë¡œë„ ë“±ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** ì´ì— ëŒ€í•œ validation checkê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì´ ì‚¼í•­ì—°ì‚°ìë¥¼ í†µí•´ ê±¸ëŸ¬ì¤ë‹ˆë‹¤. \r\n\r\n\r\n## ë§ºìŒë§\r\nì˜ ì‘ë™í•˜ë‚˜ìš”? ì €ë„ ì—¬ëŸ¬ë²ˆì˜ ì‚½ì§ˆì„ í†µí•´ì„œ êµ¬í˜„í•œê±°ë¼ ëª¨ë‘ì—ê²Œ ìƒìš©ë  ë°©ë²•ì€ ì•„ë‹ˆë¼ê³  ìƒê°í•©ë‹ˆë‹¤ ã…ã….. ì œê°€ êµ¬í˜„í•œ ë¡œì§ë„ ì—­ì‹œ ì°¸ê³ ìš©ìœ¼ë¡œ ë³¸ì¸ ì½”ë“œì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ë–¼ì–´ê°€ì„œ ì‚´ì„ ë¶™íˆì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.ğŸ¤— \r\n"},{"id":"25d7e1ed-5544-5429-bfea-818f06c9799d","path":"/Develop/Gatsby-Search/","title":"Gatsby ë¸”ë¡œê·¸ - ê²€ìƒ‰ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°ğŸ”","body":"## ë™ê¸°\r\në™ê¸°ë¼ê³  ê±°ì°½í•˜ê²Œ ì¨ë†¨ì§€ë§Œ ë³„ê±° ì—†ìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œ ì´ ë¸”ë¡œê·¸ë¥¼ í‰ìƒ ì“¸ ì˜ˆì •ì¸ë°.. ê·¸ëŸ¼ ì§€ê¸ˆë³´ë‹¤ í¬ìŠ¤íŒ… ìˆ˜ë„ ë” ë§ì•„ì§ˆê±°ê³ . ê·¸ëŸ¬ë©´ ë‚´ê°€ ì¼ì¼ì´ ë¬´í•œ ìŠ¤í¬ë¡¤ë¡œ ë‚´ë ¤ì„œ ê¸€ì„ ì°¾ëŠ” í–‰ìœ„ ìì²´ê°€ êµ‰ì¥íˆ ë¶ˆí¸í•œë°? \r\n\r\nì •ë§ ì´ ì‚¬ê³ ì˜ íë¦„ëŒ€ë¡œ ìƒê°í–ˆê³  ì´ ê³ ë¯¼ì— ëŒ€í•œ ê²°ë¡ ì€ \"ê·¸ë˜. ê²€ìƒ‰ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ë³´ì!\" ë¡œ ê·€ê²°ëìŠµë‹ˆë‹¤. \r\n\r\n\r\n## ê²°ê³¼ í™”ë©´\r\n![](https://velog.velcdn.com/images/damin1025/post/515c2fd7-c31e-4497-81c5-65f39ba31a30/image.gif)\r\nê²°ê³¼ í™”ë©´ì€ ìœ„ì™€ ê°™ì´ ê²€ìƒ‰ ì•„ì´ì½˜ì„ í´ë¦­ í›„ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ keywordë¥¼ ê²€ìƒ‰í•˜ë©´ ì•„ë˜ì— ê´€ë ¨ í¬ìŠ¤íŒ…ì´ ë‚˜ì—´ë˜ê³  ê·¸ë¦¬ê³  ì›í•˜ëŠ” í¬ìŠ¤íŒ…ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ì— ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \r\n\r\n\r\n## ì–´ë–¤ ê¸°ìˆ ì„ ì„ íƒí•  ê²ƒì¸ê°€\r\n[ê³µì‹ docs](https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-search/)ë¥¼ ë³´ë©´ gatsbyì— ê²€ìƒ‰ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ í¬ê²Œ 2ê°€ì§€ë¡œ ì†Œê°œí•˜ê³  ìˆìŠµë‹ˆë‹¤.\r\n\r\nì²« ë²ˆì§¸ ë°©ë²•ì€ **í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê²€ìƒ‰**ì…ë‹ˆë‹¤. ë¹Œë“œ ë˜ëŠ” ëŸ°íƒ€ì„ì— ë°ì´í„°ë¥¼ ì¸ë±ì‹±í•˜ê³  ì´ë¥¼ ì´ìš©í•´ ë¡œì»¬ì—ì„œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ê³µì‹ docsì—ì„œëŠ” `js-search`, `gatsby-plugin-elasticlunr-search`, `gatsby-plugin-local-search` ë¥¼ ì œì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.\r\n\r\në‘ ë²ˆì§¸ ë°©ë²•ì€ **APIê¸°ë°˜ ê²€ìƒ‰ì—”ì§„**ì„ í™œìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë¹Œë“œ ì‹œì ì— ê²€ìƒ‰ ëŒ€ìƒ ë°ì´í„°ë“¤ì„ ì¸ë±ì‹±í•´ ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ì˜¬ë ¤ë‘ê³  ëŸ°íƒ€ì„ì—ëŠ” APIë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.\r\n\r\ní•˜ì§€ë§Œ APIê¸°ë°˜ ê²€ìƒ‰ì—”ì§„ ì‚¬ìš© ì‹œ ë¸”ë¡œê·¸ì˜ ë¹Œë“œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ì— ì¸ë±ìŠ¤ë¥¼ ì „ì†¡í•´ì•¼í•˜ê³  ì‚¬ìš© ì‹œ ë¹„ìš©ì´ ë°œìƒí•˜ê±°ë‚˜ ê·¸ë¦¬ê³  ë¬´ë£Œì¸ ê²½ìš° íšŸìˆ˜ì— ì œì•½ì´ ìˆì–´ êµ³ì´ ì‚¬ìš©í•´ì•¼ í•  ì´ìœ ëŠ” ì°¾ì§€ ëª»í–ˆê³ , í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê²€ìƒ‰ ë°©ë²•ì´ ë¸”ë¡œê·¸ì— ë¶€ë‹´ì´ ëœ ê°ˆê²ƒ ê°™ì€ ë°©ì‹ì´ë¼ê³  ìƒê°í•˜ì—¬ ì €ëŠ” ì²«ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ ì•„ì´ë””ì–´ë¥¼ schemeí–ˆìŠµë‹ˆë‹¤.\r\n\r\n## ê²€ìƒ‰ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ \r\nì—¬ëŸ¬ Gatsby Starterì— êµ¬í˜„ëœ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì°¸ê³ í•´ë´¤ì„ë•Œ, GraphQLì—ì„œ ìš”ì²­í•œ edgesë¥¼ ëª¨ë‘ ëŒì•„ ê°’ì„ ë¶ˆëŸ¬ì˜¤ê³ , ê·¸ë¦¬ê³  ê·¸ ê°’ì„ ëŒë©´ì„œ searchí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ëœ ë°©ì‹ì´ ë§ì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ search ì‹œ, ëª¨ë“  ë°°ì—´ì˜ ì‚¬ì´ì¦ˆì— dependí•˜ê¸° ë•Œë¬¸ì— `O(N) time`ì´ ì†Œìš”ë˜ëŠ” ê²ƒì„ ìƒê°í•˜ë©´ ì¶”í›„ í¬ìŠ¤íŒ… ì–‘ì´ ë§ì•„ì§€ê²Œ ë ë•Œ ê²€ìƒ‰ ì†ë„ ì €í•˜ë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê²€ìƒ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì‹œê°„ ë³µì¡ë„ë©´ì—ì„œ ë‚˜ì„ê²ƒ ê°™ë‹¤ëŠ” íŒë‹¨ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. \r\n\r\nê²€ìƒ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ êµ¬í˜„ ì‹œ, ì•„ë˜ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. \r\n\r\n- ì¸ë±ì‹±ìœ¼ë¡œ ë¹ ë¥¸ ê²€ìƒ‰\r\n- ê²€ìƒ‰í•˜ë ¤ëŠ” ì½˜í…ì¸ (ì œëª© í˜¹ì€ ë³¸ë¬¸)ì— ë” ê°€ì¤‘ì¹˜ë¥¼ ë‘˜ ìˆ˜ ìˆë‹¤\r\n- ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ… ê¸°ëŠ¥\r\n- ê²€ìƒ‰ì— and, orê³¼ ê°™ì€ ë…¼ë¦¬ ì—°ì‚° ì ìš© ê°€ëŠ¥\r\n\r\nê·¸ëŸ¼ ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì´ë¥¼ ì‹¤í˜„í•  ìˆ˜ ìˆì„ê¹Œ ê³ ë¯¼ì„ í•˜ë˜ ì¤‘ì— [í•´ë‹¹ ë¸”ë¡œê·¸](https://velog.io/@seyoung8239/Gatsby-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EA%B2%80%EC%83%89%EA%B8%B0%EB%8A%A5-%EB%8F%84%EC%9E%85%ED%95%98%EA%B8%B0)ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ì–»ì–´ê°ˆ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\r\n\r\n`flexsearch` ë‚˜ `lunr` ê°™ì€ ê²½ìš°ëŠ” í•œê¸€ ê²€ìƒ‰ì–´ ì´ìŠˆê°€ ìˆê³ (ì˜ë¬¸ì— íŠ¹í™”) `js-search`ëŠ” ê·¸ ìƒíƒœê³„ê°€ ì•„ì§ ì¢ì•˜ê¸°ì— `fuse.js` ë°©ì‹ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤. \r\n\r\n## fuse.js ê²€ìƒ‰ \r\n[fuse.js](https://fusejs.io/)ëŠ” fuzzyí•˜ê²Œ searchí•œë‹¤ì—ì„œ ì°©ì•ˆëìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ fuzzyë€ **ëŒ€ëµì ìœ¼ë¡œ ê²€ìƒ‰**í•œë‹¤ì˜ ì˜ë¯¸ë¥¼ ì§€ë‹ˆê³  ìˆìŠµë‹ˆë‹¤. \r\n\r\nê°€ì¥ í° ì¥ì ì€ ë°±ì—”ë“œì˜ ì§€ì›ì´ í•„ìš” ì—†ê³ , ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— dependencyë¥¼ ê°–ê³  ìˆì§€ ì•Šìœ¼ë©° ê²°ì •ì ìœ¼ë¡œ **í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê²€ìƒ‰**ê¸°ë°˜ì´ë¼ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. \r\n\r\n### Gatsbyì—ì„œ fuse.js ì‚¬ìš©í•˜ê¸°\r\nGatsby ë¹Œë“œ ê³¼ì •ì—ì„œ ëª©ë¡ì„ ì¸ë±ì‹±í•˜ì—¬ ì–´ë”˜ê°€ ì €ì¥í•´ë‘ì–´ì•¼ í•˜ê³  ì´ë ‡ê²Œ ìƒì„±ëœ ë°ì´í„°ëŠ” ë¸”ë¡œê·¸ì˜ ëŸ°íƒ€ì„ì— fuse.js ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\r\n\r\nì´ë•Œ ë¹Œë“œ ê³¼ì •ì€ í”ŒëŸ¬ê·¸ì¸ì„ í™œìš©í•˜ë©´ ë˜ê³  ëŸ°íƒ€ì„ ê²€ìƒ‰ì€ hookì„ í™œìš©í•˜ë©´ ë©ë‹ˆë‹¤.\r\n\r\n### gatsby-plugin-fusejs\r\n[gatsby-plugin-fusejs](gatsby-plugin-fusejs) í•´ë‹¹ docsì˜ npm ëª…ë ¹ì–´ë¥¼ followí•˜ì—¬ ì„¤ì¹˜ë¥¼ ì§„í–‰ í›„, configë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. \r\n\r\n```js\r\n// gatsby-config.js\r\n\t{\r\n      resolve: `gatsby-plugin-fusejs`,\r\n      options: {\r\n        // ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ ì¿¼ë¦¬\r\n        query: `\r\n          {\r\n            allMarkdownRemark {\r\n              nodes {\r\n                id\r\n                rawMarkdownBody\r\n                fields {\r\n                  slug\r\n                }\r\n                frontmatter {\r\n                  title\r\n                }\r\n              }\r\n            }\r\n          }\r\n        `,\r\n        // ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ í”„ë¡œí¼í‹°\r\n        keys: ['title', 'body'],\r\n        // graphqlì˜ ê²°ê³¼ë¬¼ì„ ë‹¨ìˆœ ê°ì²´ ë°°ì—´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜\r\n        normalizer: ({ data }) =>\r\n          data.allMarkdownRemark.nodes.map((node) => ({\r\n            id: node.id,\r\n            path: node.fields.slug,\r\n            title: node.frontmatter.title,\r\n            body: node.rawMarkdownBody,\r\n          })),\r\n      },\r\n    },\r\n```\r\nì„¤ì¹˜ í›„ gatsby-config.jsì— ì¸ë±ìŠ¤ë¡œ ë§Œë“¤ì–´ì§€ê¸° ì›í•˜ëŠ” ë°ì´í„°ì˜ ì¿¼ë¦¬, ë°ì´í„° ì¤‘ì—ì„œë„ ê²€ìƒ‰ì´ ë˜ì—ˆìœ¼ë©´ í•˜ëŠ” í”„ë¡œí¼í‹°, GraphQL ê²°ê³¼ë¬¼ì„ ê°ì²´ ë°°ì—´ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ì˜µì…˜ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/4ad55151-b71b-474f-bb50-aea87c69e6d3/image.PNG)\r\n\r\nGraphQL ì‚¬ì´íŠ¸ì— ì ‘ì† ì‹œ, `allFusejs` í•„ë“œê°€ ì¶”ê°€ ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\n### react-use-fusejs\r\në‹¤ìŒìœ¼ë¡  ë§Œë“¤ì–´ì§„ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ ëŸ°íƒ€ì„ì— hookì„ í™œìš©í•˜ì—¬ ê²€ìƒ‰ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. \r\n\r\nì´ë•Œ ë§¤ë²ˆ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ ì‹œ, ì¸ë±ìŠ¤ë¥¼ parsing í›„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ ì¶”í›„ í¬ìŠ¤íŒ…ì˜ ì–‘ì´ ë§ì•„ì§ˆë•Œ ìì›ì´ ë‚­ë¹„ë©ë‹ˆë‹¤. (Props Drilling) \r\në”°ë¼ì„œ ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ index í˜ì´ì§€ë¥¼ ì²˜ìŒ Search í˜ì´ì§€ë¥¼ í´ë¦­ í–ˆì„ë•Œ ëª¨ë‘ ë‹¤ìš´ë°›ê³  ê·¸ë¦¬ê³  ê·¸ ë‹¤ìš´ë°›ì€ dataë“¤ì„ contextì— ë‹´ì•„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìœ ë„í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¼ê²ƒì…ë‹ˆë‹¤. \r\n\r\n```tsx\r\n/* Search.tsx */\r\n\r\n  // index.js(ìµœìƒìœ„)ë¡œë¶€í„° ë‹¤ìš´ í›„ íŒŒì‹±í•˜ì—¬ ê²€ìƒ‰ì„ ìˆ˜í–‰\r\n  const data = useStaticQuery<SearchProps>(graphql`\r\n    {\r\n      fusejs {\r\n        publicUrl\r\n      }\r\n    }\r\n  `)\r\n\r\n  /**\r\n   * 1. Get User Search Input value\r\n   * 2. Collect all Index data and store in context\r\n   * 3. Based on fuseData find query data with fuzzy search\r\n   * 4. Lazy Loading (when Post's amount is getting larger)\r\n   */\r\n  const [query, setQuery] = useState<string>('')\r\n  const { fuseData, setFuseData } = useContext(AppContext)\r\n  const result = useGatsbyPluginFusejs<SearchItem>(query, fuseData)\r\n  const [isFetching, setIsFetching] = useState(false)\r\n\r\n  const fetching = useRef(false)\r\n  useEffect(() => {\r\n    if (!fetching.current && !fuseData && query) {\r\n      fetching.current = true\r\n\r\n      fetch(data.fusejs.publicUrl)\r\n        .then(res => res.json())\r\n        .then(data => setFuseData(data))\r\n        .finally(() => setIsFetching(false))\r\n    }\r\n  }, [fuseData, query, setFuseData])\r\n```\r\n\r\nì¸ë±ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ contextì— ë‹´ì„ ê²ƒì´ê³ , ì´ëŠ” ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ êµ¬í˜„í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ `context` í´ë”ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ê³ , `app.tsx` íŒŒì¼ì„ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ì•„ë˜ì™€ ê°™ì´ contextë¥¼ App â¡ Searchë¡œ dataë¥¼ ìœ„ì„í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. \r\n\r\n```tsx\r\n/* app.tsx */\r\n\r\nimport React, {\r\n  createContext,\r\n  SetStateAction,\r\n  useState,\r\n  ReactNode,\r\n  FunctionComponent,\r\n} from 'react'\r\nimport { Dispatch } from 'react'\r\n\r\ninterface AppContext {\r\n  fuseData: any\r\n  setFuseData: Dispatch<SetStateAction<any>>\r\n}\r\n\r\nexport const AppContext = createContext<AppContext>({\r\n  fuseData: null,\r\n  setFuseData: () => {},\r\n})\r\n\r\ntype AppProps = {\r\n  children: ReactNode\r\n}\r\n\r\n// Provide Props to Search\r\nconst AppProvider: FunctionComponent<AppProps> = function ({ children }) {\r\n  const [fuseData, setFuseData] = useState(null)\r\n\r\n  return (\r\n    <AppContext.Provider value={{ fuseData, setFuseData }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  )\r\n}\r\n\r\nexport default AppProvider\r\n```\r\nì´ë•Œ Providerì— valueë¥¼ ë‹´ì„ë•Œ ê°ì²´ë¡œ í•œë²ˆ ë” ê°ì‹¸ì„œ ë³´ë‚´ì£¼ëŠ” ì´ìœ ëŠ” dataì˜(state) ê°’ì´ ë³€ê²½ë ë•Œ setFuseDataëŠ” ì¬ìƒì„±ë˜ì§€ ì•Šì§€ë§Œ, fuseDataê°€ ì¬ìƒì„±ë˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ ê°ì‹¸ì„œ ë³´ëƒ…ë‹ˆë‹¤. \r\n\r\n```js\r\n// gatsby-browser.js\r\nimport { AppProvider } from './src/context/app'\r\n \r\nexport const wrapRootElement = ({ element }) => {\r\n  return <AppProvider>{element}</AppProvider>\r\n}\r\n```\r\n\r\nìœ„ì™€ ê°™ì´ ì½”ë“œë¥¼ ëª¨ë‘ êµ¬ì„± ì‹œ, React-Developer-Toolsë¥¼ í™•ì¸í•˜ë©´ Contextì— post ì •ë³´ë“¤ì´ ë‹´ê²¨ìˆëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ ì‹œ, í•´ë‹¹ ê°’ë“¤ì€ ì´ë¯¸ ë‹´ê²¨ìˆì–´ ìì›ì˜ ë‚­ë¹„ë¥¼ ìµœì†Œí™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n![](https://velog.velcdn.com/images/damin1025/post/3258df66-245c-4b99-84aa-6f0d09f7371e/image.PNG)\r\n\r\n\r\n## ë°°í¬ í›„ ì„±ëŠ¥ check\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/56f43f3a-a80b-42e2-8091-35326e624444/image.PNG)\r\n\r\nê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€ í›„, lightHouse ì ìˆ˜ë¥¼ í™•ì¸í•´ë³¸ ê²°ê³¼ í¼í¬ì—ì„œ 1ì  ê¹ì¸ê²ƒ ë¹¼ê³¤ ëª¨ë‘ 100ì„ ìœ ì§€í–ˆë‹¤..!! \r\n"},{"id":"002719e2-0a56-5460-ac23-069cce2dd50e","path":"/Develop/Gatsby-Trouble-Shooting/","title":"Gatsby ë¸”ë¡œê·¸ - ê°œë°œí•˜ë©´ì„œ ë§Œë‚¬ë˜ Issue","body":"`Gastby` í”„ë ˆì„ì›Œí¬ë¥¼ í™œìš©í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ êµ¬í˜„í•˜ê³  ìš´ì˜í•œì§€ ì–´ëŠë§ 2ë‹¬ì´ ë‹¤ ë˜ê°€ê³  ìˆë„¤ìš”.. ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ë¸”ë¡œê·¸ì— í•˜ë‚˜ì”© ë§ë¶™í˜€ê°€ë©´ì„œ ë™ì‹œì— ì—ëŸ¬ë„ ê°™ì´ ëŠ˜ì–´ë‚¬ì—ˆëŠ”ë°ìš” ğŸ˜… \r\n\r\nì´ ê¸°ê°„ë™ì•ˆ ì œê°€ ì ‘í•œ Issueë“¤ê³¼ ì–´ë–»ê²Œ í•´ê²°í•˜ë ¤ê³  ë…¸ë ¥í–ˆëŠ”ì§€ë¥¼ ì—¬ëŸ¬ë¶„ê»˜ ê³µìœ í•˜ë ¤ê³  í•´ìš”. \r\n\r\n\r\n## #418 #423 Minified Error \r\nì–´ëŠì •ë„ ë¸”ë¡œê·¸ë¥¼ êµ¬í˜„í•˜ê³  ë°°í¬í•˜ë©´ì„œ lightHouseë¡œ Performance ì ìˆ˜ë¥¼ ì¸¡ì •í•˜ëŠ”ë° Best Practices ë¶€ë¬¸ì—ì„œ ìê¾¸ 92ì ì´ë¼ëŠ” Scoreê°€ ì°í˜€ìˆì—ˆê³ , í•´ë‹¹ ì›ì¸ìœ¼ë¡œëŠ” Console logì— ì—ëŸ¬ê°€ ì°íˆëŠ”ë°? ë¼ê³  ì•Œë ¤ì£¼ë”ë¼êµ¬ìš”. \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/f8871c18-0dc4-4b03-be52-0fcf92b7ab65/image.PNG)\r\n\r\nLightHouseì—ì„œ ë§í•œ ì´ìŠˆê°€ ì´ê±¸ ì˜ë¯¸í•˜ëŠ”ê±¸ê¹Œ ì‹¶ì—ˆê³  ë˜í•œ ì½˜ì†”ì— ë§ì€ ì—ëŸ¬ê°€ ì°í˜€ìˆëŠ”ê±´ ê°œë°œì ì…ì¥ì—ì„œë„ ë§¤ìš° ê±°ìŠ¬ë ¸ê¸° ë•Œë¬¸ì— ì´ë¥¼ ë³¸ê²©ì ìœ¼ë¡œ í•´ê²°í•˜ê³ ì í–ˆì–´ìš”.\r\n\r\n[í•´ë‹¹ ë¸”ë¡œê·¸](https://vaihe.com/blog/react-hydration-error-explained/)ì—ì„œ ê·¸ ì›ì¸ì„ ì°¾ì„ ìˆ˜ ìˆì—ˆì–´ìš”. ì´ ì—ëŸ¬ì˜ ì •í™•í•œ ëª…ì¹­ì€ **React Hydration** ì—ëŸ¬ì´ê³ , ì´ ì—ëŸ¬ëŠ” Client Renderì™€ Server Renderê°€ ì¼ì¹˜í•˜ì§€ ì•Šì„ë•Œ ë°œìƒí•œë‹¤ê³  í•´ìš”. \r\n\r\nGatsbyëŠ” Pre-Renderë˜ëŠ” ì†ì„±ì´ ìˆê¸° ë•Œë¬¸ì—, ì´ë•Œ ì´ Pre-Renderë˜ëŠ” HTML íŒŒì¼ê³¼ React(ëŒ€í‘œì  CSR ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ì Gatsbyì˜ ê·¼ê°„)ì—ì„œ Virtual Domìœ¼ë¡œ ìŒ“ì•„ì˜¬ë¦° HTML íŒŒì¼ê³¼ <span style=\"color:red\">ì¼ì¹˜í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ê±°ì˜ˆìš”.</span> ê·¸ë˜ì„œ Pre-Renderëœ HTML íŒŒì¼ì´ ë Œë”ë§ì´ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìì²´ì ìœ¼ë¡œ  Reactê°€ ìŒ“ì•„ì˜¬ë¦°ê±¸ë¡œ replace ë˜ë²„ë¦¬ëŠ” ê±°ì£ . \r\n\r\nì´ë ‡ê²Œ ë˜ë²„ë¦¬ë©´ ìš°ë¦¬ëŠ” Gatsbyì˜ ì¥ì ì„ ì‚´ë¦´ ìˆ˜ ì—†ì–´ìš” ğŸ˜±\r\n\r\n### í•´ê²°\r\nê²°êµ­ì—” ëª¨ë“  ë¬¸ì œëŠ” Serverì™€ì˜ ì—°ì‚°ì´ ìš”êµ¬ë˜ëŠ” ì½”ë“œì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ”ê±°ë¼ê³  íŒë‹¨í–ˆì–´ìš”. Pre-Render ì‹œì—ëŠ” Server ì—°ì‚°ì„ ì°¸ì¡°í•˜ì§€ ëª»í•˜ëŠ”ë°ìš”, ëŒ€í‘œì ìœ¼ë¡œ `window` ê°ì²´ë¼ëŠ”ê²Œ ë­”ì§€ë„ ëª¨ë¥´ëŠ” ìƒíƒœì—ì„œ ìš”ì²­í•˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ Validationí•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•´ìš”.\r\n\r\nì œ ë¸”ë¡œê·¸ì—ì„œ ì²« index pageë¥¼ load í• ë•Œ ê°€ì¥ ì˜ì‹¬ì´ ê°€ëŠ” ë¶€ë¶„ì€ ë°”ë¡œ ë‹¤í¬ëª¨ë“œë¥¼ handleí•  ìˆ˜ ìˆëŠ” `HeaderTheme` ì»´í¬ë„ŒíŠ¸ì˜€ì–´ìš”. ì™œëƒí•˜ë©´ localStorageë¥¼ ì°¸ì¡°í•˜ì—¬ darkì¸ì§€ lightì¸ì§€ë¥¼ ë‹´ëŠ” ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ì—ìš”. \r\n\r\nê·¸ë˜ì„œ `HeaderTheme`ì˜ í† ê¸€ ë²„íŠ¼ì´ ë¡œë”©ì„ **lazy loading**ìœ¼ë¡œ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆì–´ìš”. \r\n\r\n```tsx\r\n// ClientOnly.tsx\r\nimport React, { useState, useEffect, ReactNode, FunctionComponent } from 'react'\r\n\r\ntype ClientProps = {\r\n  children: ReactNode\r\n}\r\n\r\nconst ClientOnly: FunctionComponent<ClientProps> = function ({ children }) {\r\n  const [isMounted, setIsMounted] = useState<boolean>(false)\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true)\r\n  }, [])\r\n\r\n  if (!isMounted) {\r\n    return null\r\n  }\r\n\r\n  return <>{children}</>\r\n}\r\n\r\nexport default ClientOnly\r\n```\r\n`ClientOnly`ë¥¼ `HeaderTheme` ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒë‹¨ìœ¼ë¡œ ë°°ì¹˜í•´ì„œ HTML íŒŒì¼ì´ ëª¨ë‘ ì„±ê³µì ìœ¼ë¡œ loadí›„ í† ê¸€ë²„íŠ¼ì„ ë¦¬í„´í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆì–´ìš”.\r\n\r\nì´ê±´ ì‹¤ì œë¡œ ì œê°€ í•´ê²°í•œ [PR](https://github.com/dobyming/dobyming.github.io/pull/16#issue-1723164020) ì´ì—ìš”.\r\n\r\n## SVG Icon Flicker Issue \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/c555ab5e-d15c-482f-925e-ead9b3db00ab/image.gif)\r\n\r\nì´ê±´ GIFë¥¼ ë³´ë©´ì„œ ì„¤ëª…í•˜ë©´ ë” ì´í•´ê°€ ì˜ë ê²ƒ ê°™ì•„ìš”. \r\ní˜¹ì‹œ `<-` ì•„ì´ì½˜ì´ ê°‘ìê¸° Resizingì´ ì¼ì–´ë‚˜ê³  ê·¸ë¦¬ê³  Dark mode Toggle ë²„íŠ¼ì€ í•´->ë‹¬ë¡œ ì ê¹ ê¹œë¹¡ì´ëŠ”ê²ƒì„ ëª©ê²©í•˜ì…¨ë‚˜ìš”? \r\n\r\nê¸°ëŠ¥ì€ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ì€ ë˜ëŠ” ë²„íŠ¼ì´ë¼ë„, ì´ëŸ° ìì˜í•œ ì—ëŸ¬ë“¤ì€ UXë¥¼ ë–¨ì–´íŠ¸ë¦¬ëŠ” ìš”ì†Œë¼ê³  ìƒê°í–ˆì–´ìš”. \r\n\r\nìš°ì„  `<-` ë²„íŠ¼ ê°™ì€ ê²½ìš°ëŠ” `fontAwesome`ì—ì„œ iconì„ importí•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆì—ˆì–´ìš”. ê·¸ë¦¬ê³  ì´ Resizing ì—ëŸ¬ê°€ ë°œìƒí•œ ì›ì¸ì€ ë‹¤ìŒê³¼ ê°™ì•˜ì–´ìš”.\r\n\r\n> Instead, they are downloaded through a separate network request and then inserted into the document using Javascript. Itâ€™s essentially DOM manipulation, which is how React (which underlies Gatsby) works. Only this time, instead of manipulating UI elements like `<div>`, it is inserting a `<style>` element. Essentially, the styles are downloaded externally and inserted into the document through DOM manipulation. ([ì¶œì²˜](https://medium.com/@fabianterh/fixing-flashing-huge-font-awesome-icons-on-a-gatsby-static-site-787e1cfb3a18))\r\n\r\nìš”ì•½í•˜ë©´, í•´ë‹¹ iconì´ inlineí•˜ê²Œ HTMLì— insertë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ `style` íƒœê·¸ë¡œ ì‚½ì…ë˜ì–´ì„œ **ì™¸ë¶€ì **ìœ¼ë¡œ downloadê°€ ì´ë¤„ì§„ í›„ì— DOMì— ì‚½ì…ì´ ë˜ì–´ì„œ ì´ëŸ° ì´ìŠˆê°€ ë°œìƒí•˜ëŠ”ê±°ë¼ê³  í•´ìš”. ì¦‰ Gatsbyì—ì„  ì´ iconì´ CSSê°€ loadë˜ì–´ ì‚½ì…ë˜ê¸° ì „ì— ì´ë¯¸ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— Resizeë˜ëŠ” í˜„ìƒì„ ëª©ë„í•˜ê²Œ ë˜ëŠ”ê±°ì—ìš”. \r\n\r\në”°ë¼ì„œ ì´ ë¬¸ì œëŠ” iconì´ CSSì— Auto Add ë˜ëŠ”ê²ƒì„ ë§‰ìœ¼ë©´ í•´ê²°í•  ìˆ˜ ìˆì–´ìš”. ì¦‰ `inline`í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•˜ëŠ”ê±°ì£ . FontAwesomeì˜ Config settingì„ í†µí•´ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆì–´ìš”. ê·¸ëŸ¬ë©´ build timeì— í•´ë‹¹ iconì´ ë‚´ì¥í•˜ê²Œ ë˜ìš”. \r\n\r\n```js\r\n// gatsby-browser.js\r\nimport '@fortawesome/fontawesome-svg-core/styles.css'\r\nimport { config } from '@fortawesome/fontawesome-svg-core'\r\n\r\nconfig.autoAddCss = false;\r\n```\r\n<br/>\r\n\r\n### useEffectì™€ useLayoutEffect ì ì ˆíˆ ì‚¬ìš©í•˜ê¸°\r\në‹¤ìŒìœ¼ë¡  ë‹¤í¬ëª¨ë“œ í† ê¸€ë²„íŠ¼ì˜ ìƒíƒœê°’ì´ í•´->ë‹¬ë¡œ ì ê¹ ë³´ì˜€ë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” ì´ìŠˆë¥¼ í•´ê²°í•  ì°¨ë¡€ì˜ˆìš”. ìš°ì„  React Developer Toolë¡œ Stateì˜ ê°ì§€ë¥¼ ì‚´í´ë´¤ì„ë• booleanê°’ì´ ì ê¹ ë°”ë€ŒëŠ” í˜„ìƒì´ ì¼ì–´ë‚˜ì§„ ì•Šì•˜ì–´ìš”. \r\n\r\nê·¸ëŸ¼ ë­ê°€ ë¬¸ì œì¸ê±¸ê¹Œ ìƒê°í–ˆì„ë•Œ, ì´ë²¤íŠ¸ê°€ Triggerë˜ëŠ” ì‹œì ì— ëŒ€í•´ì„œ ìƒê°í•´ë³´ê²Œ ëì–´ìš”. ì €ëŠ” ë‹¤í¬ëª¨ë“œ í† ê¸€ì´ ì´ë¤„ì§€ëŠ” ì´ë²¤íŠ¸ Triggerë¥¼ `useEffect` ë¦¬ì•¡íŠ¸ í›…ì„ ì´ìš©í•˜ì—¬ Triggerí–ˆì—ˆëŠ”ë°, ì´ì— ëŒ€ì í•˜ëŠ” `useLayoutEffect` ë¦¬ì•¡íŠ¸ í›…ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê¸°ë¡œ í–ˆì–´ìš”. \r\n\r\nì‚¬ì‹¤ ê¸°ì—… ë©´ì ‘ì—ì„œ `useEffect` ì™€ `useLayoutEffect`ì˜ ì°¨ì´ì ì„ ì•„ì„¸ìš”? ë¼ëŠ” ì§ˆë¬¸ì„ ë°›ì•˜ë˜ ê²½í—˜ì´ ìˆì—ˆëŠ”ë° ìŠ¬í”„ê²Œë„ ëŒ€ë‹µì„ ëª»í–ˆê³ , ë˜í•œ ì‚¬ìš©í•´ë³´ì§€ ì•Šì€ Hook ì´ì—ˆê¸° ë•Œë¬¸ì— ì´ì°¸ì— ë” ì•Œì•„ë³´ê¸°ë¡œ í–ˆì–´ìš”. ì´ [ë¸”ë¡œê·¸](https://pubudu2013101.medium.com/what-is-the-real-difference-between-react-useeffect-and-uselayouteffect-51723096dc19)ì—ì„œ ë§ì€ ë„ì›€ì„ ë°›ì•˜ì–´ìš”.\r\n \r\në‘ ë¦¬ì•¡íŠ¸ í›…ì˜ ê²°ì •ì  ì°¨ì´ëŠ” ë°”ë¡œ **ì‹œì **ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆì–´ìš”. \r\n#### useEffect\r\nuseEffect ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì´ **render ì™€ paint** ëœ í›„ ì‹¤í–‰ë¼ìš”. ì¦‰ ë¹„ë™ê¸°ì (asynchronous) ìœ¼ë¡œ ì‹¤í–‰ë˜ê³ , paintëœ í›„ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— useEffect ë‚´ë¶€ì— DOMì— ì˜í–¥ì„ ì£¼ëŠ” ì½”ë“œê°€ ìˆì„ ê²½ìš° ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” í™”ë©´ì˜ flicker í˜„ìƒì„ ë³¼ ìˆ˜ ìˆì–´ìš”. \r\n\r\n#### useLayoutEffect\r\nuseLayoutEffect ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì´ **render ëœ í›„ ì‹¤í–‰ë˜ë©°**, ê·¸ ì´í›„ì— paint ë˜ìš”. ì´ ì‘ì—…ì€ ë™ê¸°ì (synchronous) ìœ¼ë¡œ ì‹¤í–‰ë˜ë©° paint ê°€ ë˜ê¸°ì „ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— DOMì„ ì¡°ì‘í•˜ëŠ” ì½”ë“œê°€ ì¡´ì¬í•˜ë”ë¼ë„ ì‚¬ìš©ìëŠ” ê¹œë¹¡ì„ì„ ê²½í—˜í•˜ì§€ ì•Šì•„ìš”.\r\n\r\n\r\n```tsx\r\n// trigger theme change refer localStorage's key-value\r\n  useEffect(() => {\r\n    if (userTheme === 'dark') {\r\n      document.body.classList.remove('light')\r\n      document.body.classList.add('dark')\r\n      setIsDark(true)\r\n    } else {\r\n      document.body.classList.remove('dark')\r\n      document.body.classList.add('light')\r\n      setIsDark(false)\r\n    }\r\n  }, [userTheme])\r\n```\r\nê¸°ì¡´ ì½”ë“œë¥¼  ë³´ë©´, `document` ê°ì²´ì— ì ‘ê·¼í•˜ì£ ? ê·¸ë¦¬ê³  `useEffect`ë¡œ ì´ë¥¼ Triggerí•˜ê³  ìˆê¸° ë•Œë¬¸ì— í˜„ì¬ stateê°€ flickerë˜ëŠ” í˜„ìƒì„ ë³¼ ìˆ˜ ìˆì—ˆë˜ê±°ì˜ˆìš”. \r\n\r\nì´ë•Œ ì£¼ì˜í•  ì ì€ `useLayoutEffect`ëŠ” paintë˜ê¸° ì „ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— **React Hydration Issue** ë¥¼ ë§Œë‚  ìˆ˜ ìˆëŠ”ë° (í´ë¼ì´ì–¸íŠ¸í™”ë©´ !== ì„œë²„í™”ë©´) ì´ëŠ” ìƒë‹¨ì— ì œê°€ ì–¸ê¸‰í•œ Minified errorì™€ ë§ë¬¼ë¦¬ê¸° ë•Œë¬¸ì— í•´ë‹¹ validationì„ ìµœìƒë‹¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°ì•„ì£¼ë©´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì–´ìš”. \r\n\r\n### gatsby-plugin-offline í™œìš©í•˜ê¸°\r\nê·¸ë¦¬ê³  ì¶”ê°€ì ìœ¼ë¡œ `gatsby-plugin-offline` ì„¤ì¹˜ë¥¼ í•˜ê²Œ ë˜ë©´ ê¹œë¹¡ì„ í˜„ìƒì„ ë”ìš± ìµœì†Œí™” í•  ìˆ˜ ìˆì–´ìš”. `gatsby-plugin-offline`ì€ **Service Worker**ë¥¼ í™œìš©í•´ì„œ ì‘ë™í•©ë‹ˆë‹¤. ê·¸ëŸ¼ ì„œë¹„ìŠ¤ì›Œì»¤ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?\r\n> ì„œë¹„ìŠ¤ ì›Œì»¤ëŠ” ì›¹ ì‘ìš© í”„ë¡œê·¸ë¨, ë¸Œë¼ìš°ì €, ê·¸ë¦¬ê³  (ì‚¬ìš© ê°€ëŠ¥í•œ ê²½ìš°) ë„¤íŠ¸ì›Œí¬ ì‚¬ì´ì˜ í”„ë¡ì‹œ ì„œë²„ ì—­í• ì„ í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì›Œì»¤ì˜ ê°œë°œ ì˜ë„ëŠ” ì—¬ëŸ¬ê°€ì§€ê°€ ìˆì§€ë§Œ, ê·¸ ì¤‘ì—ì„œë„ íš¨ê³¼ì ì¸ ì˜¤í”„ë¼ì¸ ê²½í—˜ì„ ìƒì„±í•˜ê³ , ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ë„¤íŠ¸ì›Œí¬ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ì— ë”°ë¼ ì ì ˆí•œ í–‰ë™ì„ ì·¨í•˜ê³ , ì„œë²„ì˜ ìì‚°ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í‘¸ì‹œ ì•Œë¦¼ê³¼ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” APIë¡œì˜ ì ‘ê·¼ë„ ì œê³µí•©ë‹ˆë‹¤. (ì¶œì²˜: [MDN](https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API))\r\n\r\n![gatsby-service-worker](https://github.com/dobyming/dobyming.github.io/assets/90133704/9ab3f2eb-f665-4c5c-aeec-9f83ee2264da)\r\n\r\ní˜ì´ì§€ë¥¼ ìµœì´ˆ ìš”ì²­í• ë•Œ staticí•œ assetë“¤(SVG Icon)ì„ ë‚´ë ¤ ë°›ê³ , CacheStorageì— ì €ì¥ì„ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ìœ ì €ê°€ í–¥í›„ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì¬ë°©ë¬¸í• ë•Œ ìœ ì €ì˜ Cache Storageì— ì €ì¥ëœ assetsë“¤ì„ ì°¸ê³ í•˜ì—¬, ë¹ ë¥´ê²Œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê¹œë¹¡ì„ í˜„ìƒì„ ìµœì†Œí™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\nì´ë•Œ config optionsë¥¼ í†µí•´ì„œ ì–´ëŠ í˜ì´ì§€ ë˜ëŠ” ì–´ë–¤ í´ë”ì— ëŒ€í•´ì„œë§Œ Cacheì— ë‹´ì„ ì§€ ë¶€ì—¬í•  ìˆ˜ ìˆì–´ìš”. ì´ Optionì´ í•„ìš”í•œ ì´ìœ ëŠ” ì—­ì‹œ ì‚¬ìš©ì ê²½í—˜ê³¼ ë°€ì ‘í•œ ì—°ê´€ì„ ë§ºê³  ìˆì–´ìš”. ë§Œì•½ ìµœì´ˆë¡œ ë°©ë¬¸í•˜ëŠ” ìœ ì €ì¼ ê²½ìš°ì—ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ë“¤ì„ Cacheì— ë‹´ëŠ” ì‘ì—…ì´ ìˆ˜í–‰ëœë‹¤ë©´, ì‚¬ìš©ìë³„ë¡œ Cache ì‚¬ì´ì¦ˆë„ ìƒì´í•˜ê³  ê·¸ë¦¬ê³  Band-widthë„ ìƒì´í•˜ê¸° ë•Œë¬¸ì— ì–´ë–¤ í™˜ê²½ì—ì„œëŠ” ë¹ ë¥¼ì§€ ëª°ë¼ë„, ë˜ ë‹¤ë¥¸ ìœ ì €ëŠ” ëŠë¦¬ê²Œ ëŠê»´ì§ˆ ìˆ˜ë„ ìˆì–´ìš”. \r\n\r\në”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì´ ë‚´ê°€ ì–´ë–¤ ìƒí™©ì—ì„œë§Œ cacheì‘ì—…ì„ í•˜ê² ë‹¤ëŠ” ê²ƒì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n```js\r\n{\r\n    resolve: `gatsby-plugin-offline`,\r\n    options: {\r\n        precachePages: [`/blog/*`],\r\n    },\r\n}\r\n```\r\n\r\n### ê²°ê³¼ë¬¼\r\nìœ„ ê³¼ì •ë“¤ì„ ê±°ì¹˜ê³  ë‚˜ë©´..!\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/c03d5350-d60b-44e2-a565-04f092e6f3b2/image.gif)\r\n\r\në”ì´ìƒì€ í•´ë¡œ ì ê¹ ë³´ì˜€ë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” í˜„ìƒì€ ë³¼ ìˆ˜ ì—†ê²Œ ë˜ìš”ğŸ˜™\r\n\r\n## Ongoing..\r\nGatsbyë¡œ ì´ê²ƒì €ê²ƒ ì ‘ëª©í•´ì„œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ë©´ì„œ ê°€ì¥ ë§ì´ ì ‘í•œ ê°œë…ì€ ë¸Œë¼ìš°ì €ì˜ ì‘ë™ë°©ì‹ì´ì—ˆì–´ìš”. ì‹¤ì œë¡œ ê°œë°œì„ ì§„í–‰í•˜ë©´ì„œ CSR, SSR, SSGì™€ ê°™ì´ ë Œë”ë§ì— ëŒ€í•œ ê°œë…ì„ ê¸°ì¡´ë³´ë‹¤ ë” ë”¥í•˜ê²Œ ì²´ê°í•˜ë©° ê°œë…ì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì„ ìˆ˜ ìˆì—ˆë˜ ì¢‹ì€ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ ê²½í—˜í–ˆë‹¤ê³  ìƒê°í•´ìš”. \r\n\r\n### +) 23.05.29 LightHouse ì ìˆ˜ ğŸ’¯\r\n![](https://velog.velcdn.com/images/damin1025/post/89bfd0af-9bac-4670-b46e-c27acc9d1d00/image.PNG)\r\n\r\nPerformanceì—ì„œ 2ì ì´ ë¶€ì¡±í•œë°.. 400ì ì„ ë°›ëŠ” ê·¸ë‚ ê¹Œì§€ ê³„ì†í•´ì„œ ì„±ëŠ¥ íŠœë‹ì„ ì§„í–‰í•  ì˜ˆì •ì…ë‹ˆë‹·..!ğŸ‘Š\r\n\r\n### ğŸ™‡ğŸ¼â€â™€ï¸ì°¸ê³ \r\n**React Hydration Issue**\r\n\r\nhttps://www.codeandweb.com/tutorials/gatsby-lazy-loading-with-react-lazy\r\n\r\nhttps://egghead.io/lessons/react-avoiding-state-flickers-in-gatsby-applications\r\n\r\nhttps://vaihe.com/blog/fixing-gatsby-hydration-flicker-issue/\r\n\r\n**Gastby SSR Issue(í•¨ê»˜ ì½ìœ¼ë©´ ì¢‹ìŒ)**\r\n\r\nhttps://stackoverflow.com/questions/64371186/gatsby-window-not-available-during-server-side-rendering-build-error\r\n\r\nhttps://www.gatsbyjs.com/docs/debugging-html-builds/#how-to-check-if-window-is-defined"},{"id":"2a70bfc3-a825-5826-86cb-e88209ae7d25","path":"/Develop/Gatsby-TOC-êµ¬í˜„í•˜ê¸°/","title":"Gatsby ë¸”ë¡œê·¸ - TOC ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°","body":"\r\nğŸ¤  ê¸€ì´ ê½¤ ê¹ë‹ˆë‹¤! \r\n## ğŸ’­ ë™ê¸° \r\n\r\ní¬ìŠ¤íŒ…ì„ ì½ë‹¤ ë³´ë©´, ë‹¤ì‹œ ì½ê³  ì‹¶ì€ ë¶€ë¶„ìœ¼ë¡œ ëŒì•„ê°€ê³  ì‹¶ì—ˆë˜ ê²½í—˜ì´ ìˆì„ ê²ë‹ˆë‹¤. ì´ë•Œ ì¼ì¼ì´ ìŠ¤í¬ë¡¤ í•´ì„œ ë‚´ê°€ ì›í•˜ëŠ” ì½˜í…ì¸ ë¥¼ ì½ëŠ” ê²ƒì€ ì‚¬ìš©ì ê²½í—˜ì´ êµ‰ì¥íˆ ë–¨ì–´ì§€ëŠ” í–‰ìœ„ì…ë‹ˆë‹¤.\r\n\r\në”°ë¼ì„œ ë§ì€ ê°œë°œ ë¸”ë¡œê·¸ì—ëŠ” **TOC**, ì¦‰ Table Of Contentsë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì € ì—­ì‹œ ì œ ë¸”ë¡œê·¸ì— ë°©ë¬¸í•´ ì£¼ì‹œëŠ” ìœ ì €ë¶„ë“¤ê»˜ í¸ë¦¬í•¨ì„ ì œê³µí•˜ê³ ì TOC ê¸°ëŠ¥ì„ ì œì‘í•˜ê³  êµ¬í˜„ì— ì§„í–‰í–ˆìŠµë‹ˆë‹¤.\r\n\r\nVelogë‚˜ ë‹¤ë¥¸ ê°œë°œ ë¸”ë¡œê·¸ë“¤ì—ì„œ ë´¤ì„ ë• ë³µì¡í•  ê±°ë¼ê³  ìƒê°ì€ ì•ˆ í–ˆëŠ”ë°, ì—­ì‹œ ë§Œë§Œí•œ ê±´ ì•„ë¬´ê²ƒë„ ì—†ì—ˆìŠµë‹ˆë‹¤ğŸ˜… \r\n\r\n## ê²°ê³¼ \r\n\r\në¨¼ì € êµ¬í˜„ ê²°ê³¼ë¶€í„° ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. \r\n\r\nìŠ¤í¬ë¡¤ ì‹œ, ì¼ì • ìœ„ì¹˜ì— headingì´ scope ì‹œ ì˜¤ë¥¸ìª½ì— ìˆëŠ” TOCì˜ ê°ê°ì˜ ìš”ì†Œë“¤ì— active ê°’ì´ í™œì„±í™”ë¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n![](https://velog.velcdn.com/images/damin1025/post/021cd97b-05b8-470c-8d95-1c82fe32e9e7/image.gif)\r\n\r\nê·¸ë¦¬ê³  ê° ì½˜í…ì¸ ë¥¼ í´ë¦­ ì‹œ, ì•Œë§ëŠ” headingìœ¼ë¡œ direct í•˜ê²Œ ì´ë™í•©ë‹ˆë‹¤.\r\n![](https://velog.velcdn.com/images/damin1025/post/ed65ab46-8384-4b63-8db1-f060334ae8a5/image.gif)\r\n\r\nê·¸ëŸ¼ ì œê°€ ì–´ë–¤ flowë¡œ TOC ê¸°ëŠ¥ì„ ê°œë°œí–ˆëŠ”ì§€ íšŒê³ í•˜ê³ ì í•©ë‹ˆë‹¤. \r\n\r\n## headerë¥¼ ì–´ë–»ê²Œ ê°–ê³  ì˜¬ê²ƒì¸ê°€?\r\nìš°ì„  TOC ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë° ìˆì–´, ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ í¬ìŠ¤íŒ…ì— ìˆëŠ” headerë¥¼ ì–´ë–»ê²Œ ê°–ê³  ì˜¬ ê²ƒì¸ê°€ì…ë‹ˆë‹¤. ë‹¹ì—°í•˜ê²Œë„ `gatsby-node.js`ì—ì„œ GraphQLë¡œ ìš”ì²­í•´ì•¼ í•˜ëŠ”ë°, ì´ë•Œ ì–´ë–¤ í•„ë“œë¥¼ ì°¸ì¡°í•  ê²ƒì¸ê°€ë¥¼ ìƒê°í•´ ë´ì•¼ í•©ë‹ˆë‹¤.\r\n\r\n1) `tableOfContents` í•„ë“œë¥¼ í™œìš©í•˜ê¸°\r\n`tableOfContents` í•„ë“œë¥¼ GraphQLë¡œ ìš”ì²­í•˜ì—¬ `dangerouslySetInnerHTML`ì— __html ìš”ì†Œë¡œ Propsë¥¼ ë³´ë‚´ì„œ ë Œë”ë§ í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\r\n![](https://velog.velcdn.com/images/damin1025/post/dde204d0-a5ed-41f9-808e-dc0ab46cfef6/image.PNG)\r\n\r\n\r\n2) `headings` í•„ë“œì˜ depthì™€ valueë¥¼ í™œìš©í•˜ê¸° \r\n![](https://velog.velcdn.com/images/damin1025/post/eacbf940-6312-4203-8750-93f29f440712/image.PNG)\r\n\r\nì—¬ê¸°ì„œ depthëŠ” h1, h2,...ì—ì„œ ìˆ«ìì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ê³ , valueëŠ” ì œëª©ì…ë‹ˆë‹¤. ì €ëŠ” ì§ì ‘ depthë¥¼ handle í•˜ì—¬ CSSë„ Styling í•  ê²ƒì´ê³ , ê·¸ë¦¬ê³  ë°°ì—´ì„ ëŒë©´ì„œ valueë¥¼ TOC ì»´í¬ë„ŒíŠ¸ì— ë Œë”ë§ í•˜ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì— 1ë²ˆë³´ë‹¨ 2ë²ˆ ë°©ë²•ì„ íƒí–ˆìŠµë‹ˆë‹¤. \r\n\r\n## Valueë¥¼ ì–´ë–»ê²Œ slugí™” í• ê²ƒì¸ê°€?\r\në³´í†µ `tableOfContents` í•„ë“œë¥¼ í™œìš©í•´ì„œ êµ¬í˜„í•œë‹¤ë©´ slugë¥¼ ìì²´ì ìœ¼ë¡œ ì•Œì•„ì„œ ë§Œë“¤ì–´ì„œ `href`ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê°’ì´ ë¶€ì—¬ë˜ëŠ”ë°, ì €ê°™ì€ ê²½ìš°ëŠ” `headings`ë¥¼ í™œìš©í•˜ê¸° ë•Œë¬¸ì— **ì œëª©ì„ ì–´ë–»ê²Œ slug í™”í•  ê²ƒì¸ê°€**ë¥¼ ê³ ë¯¼í•´ ë´¤ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.\r\n\r\nì •ë§ npmì€ ì—†ëŠ”ê²Œ ì—†êµ°ìš”.. [github-slugger](https://www.npmjs.com/package/github-slugger) ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ í†µí•´ì„œ slugì— ëŒ€í•œ ê³ ë¯¼ì„ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ npmìœ¼ë¡œ ì„¤ì¹˜í•˜ê³ , `slug(value)` ë©”ì„œë“œë§Œ ì„ ì–¸í•˜ë©´ ì•Œì•„ì„œ value(ì œëª©)ë¥¼ slugí™” í•´ì£¼ëŠ” ì•„ì£¼ ì¹œì ˆí•œ íŒ¨í‚¤ì§€ë¥¼ í™œìš©í•˜ì—¬ í•´ë‹¹ ê³ ë¯¼ì„ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.  \r\n\r\n## Data íë¦„ì€? \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/6f0fe709-8358-4507-aba0-ca1bc62cb64a/image.PNG)\r\n\r\në°ì´í„° íë¦„ì€ ìœ„ì™€ ê°™ì´ `post_template.tsx` (í¬ìŠ¤íŒ… í…œí”Œë¦¿)ì—ì„œ GraphQLë¡œ ìš”ì²­í•œ headings(depth,value)ë¥¼ `PostTOC.tsx` ì— ì „ë‹¬í•˜ëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„í•˜ê³  êµ¬í˜„ì— ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \r\n\r\n## TOC ì»´í¬ë„ŒíŠ¸ Styling \r\n\r\nì ê·¸ëŸ¼ GraphQLë¡œ ìš”ì²­í•œ headingsë“¤ì„ ì´ì˜ê²Œ Renderí•˜ê¸° ìœ„í•´  Styling ì‘ì—…ì„ í•´ì•¼ í•©ë‹ˆë‹¤. \r\n\r\nì‚¬ì‹¤ TOC ê¸°ëŠ¥ì„ ë§Œë“¤ë©´ì„œ ê½¤ ì‹œê°„ì„ ë§ì´ ë“¤ì˜€ë˜ ë¶€ë¶„ì´ ë°”ë¡œ ì´ Styling ë¶€ë¶„ì´ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. CSSì ìœ¼ë¡œ deepí•˜ê²Œ MockUp í–ˆê³ .. ë”°ë¼ì„œ ì´ê±´ ë³¸ì¸ì´ ìŠ¤ìŠ¤ë¡œ ê³ ë¯¼í•˜ë©´ì„œ ë§Œë“œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ì œ ì½”ë“œë¥¼ ë´ë„ ë³¸ì¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë˜ ì ìš©ì´ ì•ˆë ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤ ã…   \r\n\r\nì´ê±´ ì œê°€ Schemeí•œ ë¶€ë¶„ì…ë‹ˆë‹¤. \r\n![](https://velog.velcdn.com/images/damin1025/post/dd2ad444-f17c-4215-9d85-52ff52623c6d/image.jpg)\r\nì´ëŸ°ì‹ìœ¼ë¡œ ë³¸ì¸ì´ ìŠ¤ìŠ¤ë¡œ í•œë²ˆ êµ¬ìƒí•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤ ğŸ£ ê·¸ë¦¬ê³  í¬ìŠ¤íŒ…ì„ ì½ì„ë•Œ, TOC ì»´í¬ë„ŒíŠ¸ê°€ **ì¼ì • ìœ„ì¹˜ì— ê³ ì •**ë˜ë„ë¡ êµ¬í˜„í•˜ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì— `Sticky` ì†ì„±ì„ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤. \r\n\r\në˜í•œ ë‹¤í¬ëª¨ë“œë¡œ ì „í™˜ ì‹œ, ì½˜í…ì¸ ë“¤ì˜ ê¸€ììƒ‰ë“¤ì´ ë°”ë€Œì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— bodyì˜ classListê°€ 'dark'ë©´ ë°”ë€” ìˆ˜ ìˆë„ë¡ ê°’ì„ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤. \r\n\r\n```css\r\na {\r\n\tcolor: ${\r\n    isBrowser() && window.document.body.classList.contains('dark')\r\n\t};\r\n    text-decoration: none;\r\n}\r\n```\r\n\r\n## Scrollì‹œ ê° headerì— ë§ê²Œ Active ê¸°ëŠ¥ ë¶€ì—¬í•˜ê¸°\r\n\r\nScrollì‹œ ê° Headerì— ë§ê²Œ Activeí•˜ëŠ” ê¸°ëŠ¥ì„ ì–´ë–»ê²Œ êµ¬í˜„í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ê³ ë¯¼í•´ë´¤ì„ë•Œ, ì €ëŠ” Scrollê°’ê³¼ offsetTopê°’ì„ í™œìš©í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ê²ƒìœ¼ë¡œ êµ¬ìƒí–ˆìŠµë‹ˆë‹¤. \r\n\r\n`InterSectionObserver` APIë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ë¬¼ë¡  í¼í¬ë¨¼ìŠ¤ì ìœ¼ë¡œ ì¢‹ë‹¤ëŠ” ì§€í‘œë„ ìˆì§€ë§Œ, ìš°ì„  ì•„ì§ ì €ì˜ ë¬´ì§€í•¨ìœ¼ë¡œ ì¸í•´.. êµ¬ìƒë¶€í„° ì˜ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤ğŸ™.. Learning Curveê°€ ìˆê¸°ì— ì¢€ ë” ìµìˆ™í•´ì§€ë©´ í•´ë‹¹ ë°©ë²•ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê³ ë ¤í•  ìˆ˜ ìˆì„ê²ƒ ê°™ìŠµë‹ˆë‹¤.  \r\n\r\në”°ë¼ì„œ ì œê°€ ìƒê°í•œ ë°©ë²•ì€ Scrollê°’ì— ë”°ë¼ headings ë°°ì—´ì„ ëŒë©´ì„œ ì¼ì • offsetTop ê°’ì— ë„ë‹¬í•˜ë©´ Index ê°’ì„ ì°¸ì¡°í•˜ì—¬ active í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì–´ë–¨ê¹Œ? ë¡œ êµ¬ìƒí–ˆê³  ì´ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„ì— ì§„í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \r\n\r\n```tsx\r\n// PostTOC.tsx\r\nconst calcActive = useCallback(() => {\r\n    if (!isBrowser) {\r\n      return 0\r\n    }\r\n    const offsets: number[] = []\r\n\r\n    // bring each headings offsetTop\r\n    for (const { slug } of headers) {\r\n      const element = document.getElementById(slug)\r\n      if (!element) {\r\n        return\r\n      }\r\n      offsets.push(element.offsetTop - 10)\r\n    }\r\n\r\n    const maxIndex = offsets.length - 1\r\n    const { scrollY } = window\r\n    let index = 0\r\n\r\n    // Scroll Active Trigger (looping the offset)\r\n    if (scrollY === 0 || scrollY <= offsets[0]) {\r\n      index = 0\r\n    } else if (\r\n      window.innerHeight + scrollY >= document.body.scrollHeight ||\r\n      scrollY >= offsets[maxIndex]\r\n    ) {\r\n      index = maxIndex\r\n    } else {\r\n      index = findIndex(offsets, offset => offset >= scrollY) - 1\r\n    }\r\n    return index\r\n  }, [headers])\r\n```\r\n\r\n`headers` ë°°ì—´ì„ ì°¸ì¡°í•˜ì—¬ valueë¥¼ slugí™” í•œ ê°ê°ì˜ íƒœê·¸ë¥¼ `element`ë¡œ ë¶ˆëŸ¬ì˜¤ê³ , ê°ê°ì˜ offsetTop ê°’ì„ `offsets` ë°°ì—´ì— ë‹´ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•˜ë©´ `offsets` ë°°ì—´ì€ document ê¸°ì¤€ì˜ ê° headerë“¤ì˜ ìœ„ì¹˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. \r\n\r\nê·¸ë¦¬ê³  ìŠ¤í¬ë¡¤ í• ë•Œë§ˆë‹¤ Yì¶•ì˜ ê°’ì„ ë°˜í™˜í•˜ëŠ” `scrollY` ë¥¼ í†µí•´ì„œ, 3ê°€ì§€ ìƒí™©ìœ¼ë¡œ ì¡°ê±´ë¬¸ì„ ë¶„ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì‚¬ì‹¤ ê¸€ë³´ë‹¨ ì½”ë“œê°€ ë” ì´í•´ê°€ ì˜ ë ê²ƒ ê°™ê¸´ í•©ë‹ˆë‹¤ğŸ˜…)\r\n\r\n1. ë§Œì•½ `scrollY` ê°’ì´ 0(ë§¨ìœ„) ë˜ëŠ” `offsets[0]`(ê°€ì¥ ì²«ë²ˆì§¸ header ë¬¸êµ¬) ë³´ë‹¤ ì‘ê±°ë‚˜(ë‹¿ê¸°ì§ì „) í•´ë‹¹ ìœ„ì¹˜ì— ë„ë‹¬ í–ˆë‹¤ë©´? : **index = 0ìœ¼ë¡œ ë¶€ì—¬** \r\n\r\n2. `scrollY` ê°’ì´ `offset[maxIndex]`ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ë•Œ(ë§ˆì§€ë§‰ headerë¬¸êµ¬ ìœ„ì¹˜ì™€ ê°™ê±°ë‚˜ ì§€ë‚˜ì³¤ì„ë•Œ) ë˜ëŠ” windowì˜ innerHeightì™€ `scrollY` ë¥¼ í•©ì¹œ ê°’ì´ document ê¸°ì¤€ì˜ scrollHeightë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ë•Œ(ë§ˆì§€ë§‰ headerë¬¸êµ¬ë¥¼ ì§€ë‚˜ì¹œê±´ ì•„ë‹ˆì§€ë§Œ, ScrollHeight(ìŠ¤í¬ë¡¤í•˜ì§€ ì•Šì•˜ì„ë•Œ ì „ì²´ ë†’ì´)ë¥¼ ë„˜ê²¼ì„ë•Œ) : **index = maxIndexë¡œ ë¶€ì—¬** \r\n\r\n3. 1,2ì— í•´ë‹¹í•˜ì§€ ì•Šì„ë•Œ \r\n\r\nê·¸ë˜ì„œ ì´ `index`ë¥¼ í™œìš©í•´ì„œ eventë¥¼ triggerí•©ë‹ˆë‹¤. \r\n```tsx\r\n// PostTOC.tsx\r\nconst [currentIndex, setCurrentIndex] = useState<number | undefined>(0)\r\n\r\n  useEffect(() => {\r\n    setCurrentIndex(calcActive())\r\n    const onScrollForActive = throttle(() => setCurrentIndex(calcActive()), 300)\r\n    window.addEventListener('scroll', onScrollForActive)\r\n\r\n    return () => {\r\n      onScrollForActive.cancel()\r\n      window.removeEventListener('scroll', onScrollForActive)\r\n    }\r\n  }, [calcActive])\r\n```\r\n`useEffect()` Hookì„ í™œìš©í•˜ì—¬ `calcActive`ì— ë”°ë¼ eventê°€ Triggerë  ìˆ˜ ìˆë„ë¡ dependency Arrayì— í• ë‹¹í•©ë‹ˆë‹¤. \r\n\r\nì´ë•Œ Scrollì‹œ, ë§¤ë²ˆ offsetTop ê°’ê³¼ ScrollYê°’ì„ ì—°ì‚°í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€ ìŠ¤ë ˆë“œì— ì¡°ê¸ˆì´ë¼ë„ ìµœì í™” í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ Scrollì‹œ, ë§¤ë²ˆ ì—°ì‚°í•˜ê¸° ë•Œë¬¸ì— consoleì„ ì°ì–´ë³´ë©´ ê°’ë“¤ì´ ë¬´ìˆ˜íˆ ì°íˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\r\n\r\në”°ë¼ì„œ ì €ëŠ” [lodash-es](https://www.npmjs.com/package/@types/lodash-es)ì—ì„œ ì œê³µí•˜ëŠ” `throttle()` ë©”ì†Œë“œë¥¼ í™œìš©í•˜ì—¬ Scroll Eventë¥¼ ìµœì í™” í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” Scrollì‹œ ë§¤ë²ˆ ìš”ì²­ë˜ëŠ” callì„ `SetTimeOut()` ì—°ì‚°ê³¼ ê°™ì€ êµ¬ì¡°ë¡œ, 300msë¥¼ ê¸°ë‹¤ë ¸ë‹¤ê°€ `onScrollForActive`ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. \r\n\r\n```tsx\r\n// PostTOC.tsx\r\n<ol>\r\n{headers.map(({ value, depth }, idx) => (\r\n\t<li\r\n    key={idx}\r\n    style={{ paddingLeft: `${depth * 11}px` }}\r\n    className={currentIndex === idx ? 'active' : ''}\r\n    >\r\n\t\t// ...\r\n\t</li>\r\n    ))}\r\n</ol>\r\n```\r\n`calcActive()` í•¨ìˆ˜ì˜ ë¦¬í„´ indexê°€ `useState` Hookì˜ í˜„ì¬ stateë¡œ ë‹´ê¸°ëŠ” `currentIndex`ì— ë‹´ê¸°ë©´ì„œ, ì‹¤ì œ ol íƒœê·¸ë‚´ì—ì„œ headers ë°°ì—´(`PostTOC` ì»´í¬ë„ŒíŠ¸ ìƒë‹¨ì—ì„œ `useMemo()`ë¥¼ í†µí•´ ì—°ì‚°í•œ ê°’ì„ ì¬ì‚¬ìš© í–ˆìŠµë‹ˆë‹¤.) ì„ ë„ëŠ” idx ê°’ê³¼ ë¹„êµí•˜ê²Œ ë˜ë©´ì„œ `currentIndex`ì™€ ì¼ì¹˜í•˜ëŠ” idxì— ëŒ€í•´ì„œë§Œ active í™œì„±í™”ë¥¼ ë¶€ì—¬í•˜ê²Œ ë˜ë©´, Scrollì‹œ boldì²´ë¡œ í™œì„±í™” ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n(*`li`íƒœê·¸ ì—ì„œ styleì€ indentationì„ ì£¼ê¸° ìœ„í•´ì„œ depthë¥¼ í™œìš©í•œ ê²ƒì…ë‹ˆë‹¤.)\r\n\r\n## headerì— ë§ëŠ” hrefë¡œ ì´ë™í•˜ê¸° \r\nê·¸ë¦¬ê³  `a` íƒœê·¸ì— href ê°’ìœ¼ë¡œ `slug(value)`ë¥¼ í• ë‹¹í•˜ê²Œ ë˜ë©´ í—¤ë”ì— ë§ëŠ” ìœ„ì¹˜ë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤. \r\n\r\n```tsx\r\n// PostTOC.tsx\r\n//...\r\n<a data-idx={idx} href={`#${slug(value)}`}>\r\n\t{value}\r\n</a>\r\n//...\r\n```\r\n\r\n### ğŸª“ Issue Handle  \r\n![2023-05-16 11;09;11](https://github.com/dobyming/dobyming.github.io/assets/90133704/d9c2b8db-6934-4e50-9e93-bc0d5eb196f3)\r\n\r\nTestingì„ í•˜ë˜ ì¤‘, consoleì— ì´ëŸ° error logê°€ ì°í˜”ìŠµë‹ˆë‹¤. ê³µí†µì ì„ ë³´ë‹ˆ, ìˆ«ìë¡œ ì‹œì‘í•˜ëŠ” í—¤ë”ë¥¼ `querySelector`ê°€ parsingì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤ëŠ” ë¥˜ì˜ ì—ëŸ¬ì˜€ìŠµë‹ˆë‹¤. (TOC ì»¨í…Œì´ë„ˆì— í•´ë‹¹í•˜ëŠ” í—¤ë”ê°’ì„ í´ë¦­ ì‹œ, í•´ë‹¹í•˜ëŠ” í—¤ë”ë¡œ ì´ë™í•˜ì§€ë„ ì•Šì•˜ìŠµë‹ˆë‹¤.) \r\n\r\n```tsx\r\nconst heading = document.querySelector<HTMLHeadingElement>(href)\r\nif (!heading) {\r\n\treturn\r\n}\r\n\r\nwindow.scrollTo({\r\n\ttop: heading.offsetTop,\r\n  behavior: 'smooth',\r\n })\r\n```\r\n\r\në¬¸ì œê°€ ë°œìƒí•œ ì½”ë“œì˜€ê³  [StackOverflow](https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document)ì—ì„œ ë³´ë‹ˆ, `querySelctor`ëŠ” ìˆ«ìë¡œ ì‹œì‘í•˜ëŠ” headingì€ ì¸ì‹í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìœ„ì˜ ì½”ë“œëŠ” ê³¼ê°íˆ ì œê±°í•˜ê³ , `a` íƒœê·¸ì˜ `href`ì— slugí™” í•œ valueë¥¼ í• ë‹¹í•˜ì—¬ ìˆ«ìë¡œ ì‹œì‘í•˜ëŠ” slugë„ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \r\n\r\n## ğŸ”® í›„ê¸° \r\nì¼ì£¼ì¼ ê°€ê¹Œì´? ì‹œê°„ì„ ìŸê³  ë‚˜ë¦„ ê³ ìƒí•˜ë©´ì„œ ë§Œë“¤ì—ˆë„¤ìš”.. ê¸°ëŠ¥ ê°œë°œì—ì„œ ë§ì€ ê³ ë¯¼ê³¼ ì‹œê°„ì„ íˆ¬ìí•´ì„œ ê·¸ëŸ°ì§€ ë” ì†Œì¤‘í•˜ê²Œ ë‹¤ê°€ì˜µë‹ˆë‹¤. ì˜ì™¸ë¡œ CSS ìŠ¤íƒ€ì¼ë§ë„ ë‚´ê°€ ì•„ëŠ”ê²Œ ë‹¤ ì•„ë‹ˆì—ˆêµ¬ë‚˜ë¥¼ ë˜ ê¹¨ë‹¬ìœ¼ë©° ì—­ì‹œ ê³„ì† ë°°ì›Œì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ë˜ feature ê°œë°œì´ì—ˆìŠµë‹ˆë‹¤. \r\n\r\nì„±ëŠ¥ìƒ ìµœì í™”í•´ì•¼ í•  ë¶€ë¶„ì´ ë‚¨ì€ ìˆ™ì œê² ë„¤ìš”! ê·¸ë˜ë„ ìŠ¤ìŠ¤ë¡œ TOC ê¸°ëŠ¥ì„ ë§Œë“ ê±´ ê½¤ë‚˜ ë¿Œë“¯í•©ë‹ˆë‹¤.ğŸ˜Š"},{"id":"95b9e1bc-62a3-54a3-8c10-d54cdd51bd8c","path":"/TIL/gatsby-page-route/","title":"Gatsbyì—ì„œ í˜ì´ì§€ ë¼ìš°íŒ… í•˜ëŠ”ë²•","body":"\r\n## Gatsbyì—ì„œ í˜ì´ì§€ ë¼ìš°íŒ…í•˜ê¸° \r\n\r\nGatsbyì—ì„œ í˜ì´ì§€ê°„ ë¼ìš°íŒ… í•˜ëŠ” ë°©ì‹ì€ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. \r\n\r\nì²«ë²ˆì§¸ëŠ” `a` íƒœê·¸ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. pages í´ë” ë‚´ì— ì„ ì–¸ëœ íŒŒì¼ë“¤ì€ '/íŒŒì¼ëª…'ìœ¼ë¡œ í˜ì´ì§€ ê°„ ì´ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. \r\ní•˜ì§€ë§Œ React ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ëœ í”„ë ˆì„ì›Œí¬ì¸ Gatsbyë¥¼ ê°íˆ ë§¤ë²ˆ í˜ì´ì§€ ì´ë™ ì‹œ, refresh ë˜ê²Œ êµ¬í˜„í•˜ë©´... ì´ê±¸ë¡œ ì™œ ê°œë°œ í•˜ëƒêµ¬ìš” (UXë„ ë§¤ìš° ì €í•˜ë˜êµ¬ìš”) \r\n\r\n\r\n## Gatsby Link API í™œìš©í•˜ê¸° \r\n\r\nGatsbyì—ì„œ ì œê³µí•˜ëŠ” í˜ì´ì§€ ì´ë™ APIì¸  <span style=\"color:red\">Gatsby Link API</span>ì„ í™œìš©í•˜ì—¬ í˜ì´ì§€ ê°„ ë¼ìš°íŒ…ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ APIë¥¼ í†µí•´ í˜ì´ì§€ ì´ë™ì„ êµ¬í˜„í•˜ë©´ ë³´ë‹¤ ë” ë†’ì€ ì„±ëŠ¥ì˜ ì •ì  ì‚¬ì´íŠ¸ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\n### Usage\r\n```tsx\r\nimport { Link } from 'gatsby'\r\n<Link to=\"/info/\">To Info</Link>\r\n```\r\nê¸°ë³¸ì ì¸ ì‚¬ìš©ë°©ë²•ì€ ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤. `Link`ë¥¼ import í›„, Link íƒœê·¸ì˜ toì˜ propsë¡œ ì´ë™í•  í˜ì´ì§€ëª…ì„ ì ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. \r\n\r\ní•´ë‹¹ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ ì‹œ, a íƒœê·¸ë¥¼ ì‚¬ìš©í–ˆì„ë•Œë³´ë‹¤ Linkíƒœê·¸ë¥¼ í™œìš©í•˜ì—¬ í˜ì´ì§€ ê°„ ë¼ìš°íŒ… ë°©ì‹ì´ í›¨ì”¬ ë” ë§¤ë„ëŸ½ê³  ì†ë„ë„ í–¥ìƒë¨ì„ ì²´ê°í•  ìˆ˜ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤. \r\n\r\nê·¸ëŸ¬ë©´ ìš°ë¦¬ëŠ” ì™œ ì´ëŸ´ ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ê·¼ê±°ê¹Œì§€ ì•Œì•„ë´ì•¼ê² ì£ \r\n\r\n### Gatsby Link APIì˜ ì„±ëŠ¥ìƒ ì´ì \r\nê¶ê·¹ì ì¸ ê·¼ê±°ëŠ” GatsbyëŠ” **Prefetch**ë¥¼ í†µí•´ì„œ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ë¦¬ì†ŒìŠ¤ì˜ ë¡œë”© ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\nì¦‰ PrefetchëŠ” ì´ì™€ ê°™ì€ ê°œë…ì…ë‹ˆë‹¤. \r\n\r\n1. í˜ì´ì§€ê°€ ë¡œë“œê°€ ëŒ -> í˜„ì¬ ë¡œë“œëœ í˜ì´ì§€ ë‚´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ë§í¬ ì°¾ì€ í›„ -> ê° ë§í¬ì˜ í˜ì´ì§€ë¥¼ <span style=\"color:red\">ë¯¸ë¦¬</span> ë¡œë“œ \r\n2. ì¦‰ ì˜ˆë¥¼ ë“¤ë©´, `index.tsx` í˜ì´ì§€ ë¡œë“œê°€ ë¨ -> ë™ì‹œì— `Link` íƒœê·¸ë¥¼ ì°¾ìŒ(`/info`) -> ì´ í˜ì´ì§€(`info`)ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•´ë‘  \r\n\r\n"},{"id":"88750ab1-b392-580f-94b0-09a214040da1","path":"/TIL/gatsby-request/","title":"Gatsby - GraphQLë¡œ query ìš”ì²­í•˜ê¸°","body":"\r\n## GraphQLì´ë€?\r\nGraphQLì€ í˜ì´ìŠ¤ë¶ì—ì„œ ê°œë°œí•œ **ì¿¼ë¦¬ ì–¸ì–´**ì…ë‹ˆë‹¤.\r\nê°ê°ì˜ ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ê³ ì •ëœ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” Rest APIì™€ëŠ” ë‹¤ë¥´ê²Œ GraphQLì€ <span style=\"color:red\">**ë‹¨ì¼ ì—”ë“œí¬ì¸íŠ¸**</span>ì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë§Œì„ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\r\n\r\nì •ì  ì›¹ì‚¬ì´íŠ¸ì˜ ì½˜í…ì¸  ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ìˆì–´ GraphQLë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n## Gatsbyì—ì„œ GraphQLì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•\r\n\r\nê·¸ëŸ¼ Gatsbyì—ì„œ GraphQLë¡œ queryë¡œ ìš”ì²­í•´ì„œ ì›¹ì‚¬ì´íŠ¸ë¡œ ê°’ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. \r\n\r\nìš°ì„  `pages` í´ë” ë‚´ì— `info.tsx`ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤. \r\n\r\n```tsx\r\nimport React, { FunctionComponent } from 'react'\r\nimport { graphql } from 'gatsby'\r\nimport Text from 'components/Text'\r\n\r\ntype InfoPageProps = {}\r\n\r\nconst InfoPage: FunctionComponent<InfoPageProps> = function () {\r\n  return (\r\n    <div>\r\n      <Text text=\"Hello\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoPage\r\n```\r\nì¼ë°˜ì ì¸ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë³€ìˆ˜ë¡œì„œ ì •ì˜ê°€ ë¶ˆê°€ëŠ¥í•˜ê³ , **StaticQuery**ë¼ëŠ” ê¸°ëŠ¥ì„ í†µí•´ ì •ì˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. pages í´ë” ë‚´ë¶€ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ Queryë¥¼ ì •ì˜í•˜ê³  ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\n```tsx\r\nimport React, { FunctionComponent } from 'react'\r\nimport { graphql } from 'gatsby'\r\nimport Text from 'components/Text'\r\n\r\ntype InfoPageProps = {}\r\n\r\nconst InfoPage: FunctionComponent<InfoPageProps> = function () {\r\n  return (\r\n    <div>\r\n      <Text text=\"Hello\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoPage\r\n\r\n// query ìš”ì²­ ë¶€ \r\nexport const metadataQuery = graphql`\r\n  {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n        description\r\n        author\r\n      }\r\n    }\r\n  }\r\n`\r\n```\r\n\r\n`metadataQuery` ë³€ìˆ˜ì— ìš”ì²­í•œ Queryë¥¼ ìš”ì²­ ì‹œ, ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µ ê°’ì€ `InfoPage` ì»´í¬ë„ŒíŠ¸ì˜ Propsë¡œ ì „ë‹¬í•´ì¤ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ `InfoPage` ì»´í¬ë„ŒíŠ¸ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ê°’ì„ ë¶ˆëŸ¬ì˜¤ë©´ì„œ Gatsbyì—ì„œ GraphQLì„ í†µí•œ Query ìš”ì²­ ì‘ì—…ì´ ë§ˆë¬´ë¦¬ ë©ë‹ˆë‹¤. \r\n```tsx\r\nimport React, { FunctionComponent } from 'react'\r\nimport { graphql } from 'gatsby'\r\nimport Text from 'components/Text'\r\n\r\n// ìš”ì²­í•œ Queryì˜ ë°ì´í„° êµ¬ì¡°ì— ë”°ë¼ typeì„ ì§€ì • \r\ntype InfoPageProps = {\r\n  data: {\r\n    site: {\r\n      siteMetadata: {\r\n        title: string\r\n        description: string\r\n        author: string\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// ë§¤ê°œë³€ìˆ˜ë¡œ ìš”ì²­í•œ Queryë¥¼ Propsë¡œ ì „ë‹¬ \r\nconst InfoPage: FunctionComponent<InfoPageProps> = function ({\r\n  data: {\r\n    site: {\r\n      siteMetadata: { title, description, author },\r\n    },\r\n  },\r\n}) {\r\n  return (\r\n    <div>\r\n      <Text text={title} />\r\n      <Text text={description} />\r\n      <Text text={author} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoPage\r\n\r\nexport const metadataQuery = graphql`\r\n  {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n        description\r\n        author\r\n      }\r\n    }\r\n  }\r\n`;\r\n```\r\n\r\nì´ì™€ ê°™ì´ Gatsbyì—ì„œ GraphQLì„ í†µí•´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µë°›ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. "},{"id":"0f50d653-27c0-5986-9a18-da9e1d08e557","path":"/Develop/Gatsby-ë‹¤í¬ëª¨ë“œ-êµ¬í˜„ê¸°/","title":"Gatsby ë¸”ë¡œê·¸ - ë‹¤í¬ëª¨ë“œ êµ¬í˜„ê¸°ğŸŒ—","body":"\r\nìš°ì„  ê¸€ì„ ì‹œì‘í•˜ê¸° ì „ì—.. 5ì›” 24ì¼ ë¶€ë¡œ ë¸”ë¡œê·¸ ê°œë°œì„ ì‹œì‘í•œì§€ 1ë‹¬ ë„˜ì€ ì‹œì ì—ì„œ 100ê°œì˜ commitì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤..ğŸ¥³\r\n\r\n<div style=\"text-align:center\"><img src=\"https://velog.velcdn.com/images/damin1025/post/0e0117f4-e670-4a3c-a849-c5eadf34c786/image.PNG\" /></div>\r\n\r\n\r\nì €ì—ê²Œ ì´ `ê°œë°œ ë¸”ë¡œê·¸` í”„ë¡œì íŠ¸ëŠ” **í”„ë¡ íŠ¸ì—”ë“œê°€ ë­”ì§€ ì œëŒ€ë¡œ ë³´ì—¬ì¤€** í”„ë¡œì íŠ¸ë‚˜ ë‹¤ë¦„ ì—†ì–´ì„œ ë°°ìš´ê²Œ ì •ë§ ë§ì€ ê³ ë§ˆìš´ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. ë§Œì•½ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ë‚´ ì»¤ë¦¬ì–´íŒ¨ìŠ¤ë¡œ ë°Ÿê³  ì‹¶ë‹¤ê³  í•œë‹¤ë©´ ìì‹ ë§Œì˜ ë¸”ë¡œê·¸ ë§Œë“œëŠ” ê²ƒì„ ì ê·¹ ì¶”ì²œí•  ì •ë„ë¡œ ë°°ìš¸ê²Œ ì •ë§ ë§ê³  ì¢‹ì€ í”„ë¡œì íŠ¸ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. \r\n\r\nì‚¬ì¡±ì€ ì—¬ê¸°ì„œ ë§ˆë¬´ë¦¬ ì§“ê³ .. ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í•˜ë©´ì„œ ê²ªì€ ì œ ì‚½ì§ˆê¸°ë¥¼ ë‚˜ì—´í•´ë³´ê² ìŠµë‹ˆë‹¤ ğŸ¤ª...\r\n\r\n\r\n## ë™ê¸° \r\nì´ í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒ êµ¬ìƒí•˜ê³  ê·¸ë¦¬ê³  ê¸°ëŠ¥ë“¤ì„ í•˜ë‚˜ì”© ë§Œë“¤ì–´ ë‚˜ê°ˆë•Œ ì„¸ìš´ ëª©í‘œ ì¤‘ í•˜ë‚˜ê°€ ë‹¤í¬ëª¨ë“œëŠ” ê¼­ ë§Œë“¤ì–´ì•¼ì§€..! ìƒê°í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì´ì œ ì—†ìœ¼ë©´ í—ˆì „í•  ì •ë„ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ” **ë‹¤í¬ëª¨ë“œğŸŒ—** ê¸°ëŠ¥ì„ Gatsbyì™€ ì–´ëŠì •ë„ ì¹œí•´ì§€ë©´ ì œëŒ€ë¡œ íŒŒì•¼ê² ë‹¤ ìƒê°í–ˆê³  ë•Œê°€ ì˜¨ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. \r\n\r\nì¼ì „ì— Reactë¥¼ ë°°ìš°ê¸° ìœ„í•´ì„œ [Emotionary](https://github.com/dobyming/Emotionary) í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰ ì¤‘, `Provider` ê°œë…ì„ í™œìš©í•˜ì—¬ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ `theme` propsë¥¼ ì „ë‹¬í•˜ì—¬ ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í–ˆë˜ ê²½í—˜ì´ ìˆì—ˆê³ , Gatsbyì—ì„œë„ ì´ëŸ° ê°œë…ì„ í™œìš©í•˜ë©´ ë˜ë ¤ë‚˜? ìƒê°ìœ¼ë¡œë¶€í„° ì‹œì‘í•˜ë©° êµ¬í˜„ì— Dive í–ˆìŠµë‹ˆë‹¤. \r\n\r\n## Themeì„ ì–´ë–»ê²Œ ì „ë‹¬í•  ê²ƒì¸ê°€ : ThemeProvider VS CSS Variable\r\nëŒ€ëµì ì¸ Mock Upì€ ì´ë ‡ê²Œ êµ¬ìƒí–ˆì—ˆìŠµë‹ˆë‹¤.\r\n>í† ê¸€ ë²„íŠ¼ì´ ìˆìŒ(component) -> í´ë¦­ ê°’(state)ì— ë”°ë¼ ì–´ë–¤ themeì„ ë³´ì—¬ì¤„ì§€ ê²°ì •í•  ê²ƒ. (boolean ì†ì„±ìœ¼ë¡œ trueë©´ dark, falseë©´ light) \r\n\r\nê·¸ë¦¬ê³  ì´ë•Œ `theme`ì„ ì–´ë–»ê²Œ ì „ë‹¬í•  ê²ƒì¸ê°€? ì´ê²Œ ê´€ê±´ì´ì—ˆìŠµë‹ˆë‹¤.  \r\n\r\n### ğŸ¤” emotionì˜ ThemeProviderë¡œ ì‚½ì§ˆ \r\n~~ì˜¤ë˜ì „ì— ìˆ˜í–‰í•œ ì‚½ì§ˆì´ë¼ ê¸°ì–µì´ ì•½ê°„ ê°€ë¬¼í•˜ë„¤ìš”...ã… ~~\r\n\r\nê¸°ì¡´ì— `Provider`ë¥¼ í™œìš©í•˜ì—¬ êµ¬í˜„í•´ ë³¸ ê²½í—˜ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— ë§ˆì¹¨ `emotion`ì—ì„œ `ThemeProvider` Theme packageë¥¼ ì§€ì›í•˜ê³  ìˆì—ˆê³  ì € ì—­ì‹œ ì´ê±¸ë¡œ êµ¬í˜„í•´ì•¼ê² ë‹¤ ìƒê°í•˜ë©° ì½”ë“œ êµ¬í˜„ì— ì§„í–‰í–ˆì§€ë§Œ, ... buildëŠ” ì»¤ë…• develop ë‹¨ê³„ì—ì„œë¶€í„° errorë¥¼ ë§Œë‚˜ê²Œ ë˜ì–´ ë¨¸ë¦¬ë¥¼ ì‹¸ë§¸ìŠµë‹ˆë‹¤.\r\n\r\n### ğŸ¥° CSS Variableë¡œ ê´‘ëª…ì„ ì°¾ë‹¤ \r\n'í† ê¸€ ë²„íŠ¼ì˜ í´ë¦­ ê°’ì— ë”°ë¼ ì–´ë–¤ themeì„ ë³´ì—¬ì¤„ ì§€..' ì´ ë¬¸ì¥ì—ì„œ CSS Variableê³¼ ì—®ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n```tsx\r\n// trigger theme change refer localStorage's key-value\r\n useLayoutEffect(() => {\r\n\tif (userTheme === 'dark') {\r\n    document.body.classList.remove('light')\r\n    document.body.classList.add('dark')\r\n    setIsDark(true)\r\n\t} else {\r\n    document.body.classList.remove('dark')\r\n    document.body.classList.add('light')\r\n    setIsDark(false)\r\n    }\r\n }, [userTheme])\r\n```\r\nì—¬ê¸°ì„œ `userTheme`ì´ í˜„ì¬ stateì´ê³ , ê·¸ stateê°€ `dark`ë¼ë©´ `body` íƒœê·¸ì˜ classNameì„ `dark`ë¼ê³  ì§€ì •í•˜ê³ , ê·¸ ë°˜ëŒ€ë©´ `light`ë¡œ ì§€ì •í•©ë‹ˆë‹¤. \r\n\r\nê·¸ëŸ¬ë©´ ì´ `body` íƒœê·¸ì˜ classNameì— ë”°ë¼ì„œ CSS Variableë¡œ ì§€ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.   \r\n```css\r\n/*theme.css*/\r\n\r\n.light {\r\n    --color-background:#f6f6f6;\r\n}\r\n\r\n.dark {\r\n    --color-background: #25262c;\r\n    --color-text: #f6f6f6;\r\n}\r\n\r\nbody {\r\n    background-color: var(--color-background);\r\n    transition: 0.2s;\r\n}\r\n\r\nh1,\r\nh2,\r\nh3,\r\nh4,\r\nh5,\r\nhr,\r\na,\r\np,\r\nli,\r\ntd,\r\ntr,\r\nfooter,\r\nspan {\r\n  color: var(--color-text);\r\n}\r\n```\r\n`theme.css` íŒŒì¼ì— ìœ„ì™€ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒë‹¨ì—ëŠ” bodyì˜ classNameì— ë”°ë¼ì„œ ì–´ë–¤ css ì†ì„± ê°’ì„ ë¶€ì—¬í•  ì§€ rgb ê°’ì„ ì •ì˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  **ì›í•˜ëŠ” íƒœê·¸ì— ì›í•˜ëŠ” CSS Variable**ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ë¡œì§ìœ¼ë¡œ ìˆ˜í–‰í•˜ë©´ ì „ì²´ì ìœ¼ë¡œ ê°œë°œ ë¸”ë¡œê·¸ì— ë‹¤í¬ëª¨ë“œê°€ ì ìš©ë¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\nê·¸ë¦¬ê³  ì‹¤ì œë¡œ Providerë¥¼ í™œìš©í•´ ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒë³´ë‹¨, CSS Variableì„ í™œìš©í•˜ì—¬ êµ¬í˜„í•œ ê²ƒì´ **ì„±ëŠ¥ì ì¸** ì¸¡ë©´ì—ì„œë„ ë” ì¢‹ì€ ì§€í‘œë¥¼ ë³´ì—¬ì¤¬ìŠµë‹ˆë‹¤. \r\n[Dark Mode Theme PR](https://github.com/dobyming/dobyming.github.io/pull/11) í•´ë‹¹ ë§í¬ë¡œ ê°€ì‹œë©´ ì œê°€ ì™œ CSS Variableì„ ì„ íƒí•˜ì—¬ êµ¬í˜„ì— ì§„í–‰í–ˆëŠ”ì§€ ìì„¸í•œ ì§€í‘œì™€ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n>+) ì¶”ê°€ë¡œ SVG Iconì— ë‹¤í¬ëª¨ë“œë¥¼ ì–´ë–»ê²Œ ì ìš©í•´ì•¼ í•  ì§€ ë§‰ë§‰í•œ ë¶„ë“¤ê»˜ ê°„ëµí•œ ì½”ë“œë¥¼ ë³´ì—¬ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤. (ì‚¬ì‹¤ ë‚´ê°€ ë°”ë³´ì—¬ì„œ í—·ê°ˆë ¤í–ˆìŒ..)\r\n\r\nìš°ì„  SVG ê°™ì€ ê²½ìš°ì—ëŠ” ìƒ‰ìƒì´ ë‹´ê¸¸ ìˆ˜ ìˆë„ë¡ `fill`ê³¼ `stroke` ì†ì„±ì„ ì§€ì • í•´ì•¼í•©ë‹ˆë‹¤. `fill`ì€ ì±„ì›Œì§€ëŠ” ìƒ‰ì´ê³  `stroke`ëŠ” í…Œë‘ë¦¬ìƒ‰ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `.svg` íŒŒì¼ì—ì„œ **`path` íƒœê·¸ ë‚´ì— fillê³¼ stroke ì†ì„±ì„ current**ë¡œ ì§€ì •í•©ë‹ˆë‹¤.\r\n\r\n```svg\r\n// ì˜ˆì‹œ svg\r\n<svg width=\"30px\" height=\"30px\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path fill=\"current\" stroke=\"current\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z\" fill=\"#000000\"/>\r\n</svg>\r\n```\r\n\r\nê·¸ëŸ¼ ìƒ‰ìƒì„ ì§€ì •í•˜ê³ ì í•˜ëŠ” SVG Iconì— classNameì„ ë¶€ì—¬í•œ í›„, ìì‹ ì´ ì •ì˜í•œ theme css íŒŒì¼ì— ë§ˆì°¬ê°€ì§€ë¡œ CSS Variableë¡œ ì§€ì •í•˜ë©´ ëì…ë‹ˆë‹¤! \r\n```css\r\n.githubIcon path {\r\n    fill: var(--color-text);\r\n}\r\n```\r\n\r\n## Flicker Issue ì—ëŸ¬ í•´ê²°í•˜ê¸°\r\në‹¤í¬ ëª¨ë“œ êµ¬í˜„ì— ëŒ€í•œ í‹€ì„ ì¡ì•˜ë‹¤ëŠ” ê¸°ì¨ë„ ì ì‹œ, í˜ì´ì§€ë¥¼ reload ì‹œ  ë¶„ëª… ì´ëŸ° ê¹œë¹¡ì„ í˜„ìƒì„ ê²ªì„ ê²ƒì…ë‹ˆë‹¤...\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/58ff2ef6-95a9-4fea-b04d-3520fb34a879/image.gif)\r\n\r\nëª»ë´¤ë‹¤êµ¬ìš”? ì €ë„ ê·¸ëƒ¥ ì ì‹œ ì¼ì‹œì ìœ¼ë¡œ ì•„ì£¼ ì ê¹ ì´ëŸ¬ëŠ”ê±° ì•„ë‹ê¹Œ..? ã…ã… í–ˆëŠ”ë° ì•„ë‹ˆë”ë¼êµ¬ìš” ğŸ˜£ ì•„ì£¼ ìœ ëª…í•œ <span style=\"color:red\">**Flicker Issue**</span> ì˜€ìŠµë‹ˆë‹¤. \r\n\r\n>The problem is that the HTML is generated long before it reaches the user's device, so there's no way to know which color theme the user prefers. [ì°¸ê³ ](https://www.joshwcomeau.com/css/css-variables-for-react-devs/#dark-mode-flash-fix)\r\n\r\ní•´ë‹¹ Issueê°€ ë°œìƒí•œ ì›ì¸ìœ¼ë¡œëŠ”, Gatsbyê°€ HTML íŒŒì¼ì„ ë¹Œë“œí•˜ëŠ” `Pre-Render` íŠ¹ì„±ê³¼ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤. ë¹„ë¡ localStorageë¡œ ì‚¬ìš©ìê°€ ì„¤ì •í•œ themeì„ ì €ì¥í•œë‹¤ê³  í•´ë„, **reload ì‹œ localStorageë¥¼ ì°¸ì¡°í•˜ëŠ”ê±´ Pre-Render ì‹œì ì´ ì•„ë‹Œ ê·¸ ì´í›„ ì‹œì ì— ì°¸ì¡°**í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ° í˜„ìƒì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. \r\n\r\nì¦‰ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”, localStorageë¥¼ ì°¸ì¡°í•˜ëŠ” ì‹œì ì„ DOM íŠ¸ë¦¬ê°€ êµ¬ì¶•ë˜ê¸° ì´ì „ì— Script íŒŒì¼ì„ ê°•ì œë¡œ Injectioní•˜ëŠ” ë¶€ë¶„ì˜ ì½”ë“œ ì‘ì—…ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  Gatsbyì—ì„œëŠ” **`html.js` íŒŒì¼ì„ í†µí•´ Script íŒŒì¼ì„ inject í•  ìˆ˜ ìˆë„ë¡ customize**ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤. \r\n\r\n>ğŸ’– [Gatsby html.js customize](https://www.gatsbyjs.com/docs/custom-html/) docsì— `html.js` íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì— ëŒ€í•´ ìì„¸í•œ ì„¤ëª…ì´ ìˆìœ¼ë¯€ë¡œ ê¼­ docsë¥¼ ì½ìœ¼ì‹œê³  ì§„í–‰í•˜ì‹œê¸¸!!\r\n\r\nê·¸ëŸ¼ `html.js` íŒŒì¼ì´ ìƒì„±ëê³ , ì €ëŠ” ì•„ë˜ì™€ ê°™ì´ customizeë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. \r\n```js\r\n// html.js\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport default class HTML extends React.Component {\r\n  render() {\r\n    return (\r\n      <html {...this.props.htmlAttributes}>\r\n        <head>\r\n          <meta charSet=\"utf-8\" />\r\n          <meta httpEquiv=\"x-ua-compatible\" content=\"ie=edge\" />\r\n          <meta\r\n            name=\"viewport\"\r\n            content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"\r\n          />\r\n          {this.props.headComponents}\r\n        </head>\r\n        <body {...this.props.bodyAttributes} className=\"light\">\r\n          <script\r\n            dangerouslySetInnerHTML={{\r\n              __html: `\r\n\t\t\t// Customize í•  ë¶€ë¶„\r\n              (function () {\r\n                try {\r\n                  var mode = localStorage.getItem('color-theme');\r\n                  if (!mode) return;\r\n                  document.body.classList.add(mode);\r\n                } catch (e) {}\r\n              })();\r\n            `,\r\n            }}\r\n          />\r\n          {this.props.preBodyComponents}\r\n          <div\r\n            key={`body`}\r\n            id=\"___gatsby\"\r\n            dangerouslySetInnerHTML={{ __html: this.props.body }}\r\n          />\r\n          {this.props.postBodyComponents}\r\n        </body>\r\n      </html>\r\n    )\r\n  }\r\n}\r\n\r\nHTML.propTypes = {\r\n  htmlAttributes: PropTypes.object,\r\n  headComponents: PropTypes.array,\r\n  bodyAttributes: PropTypes.object,\r\n  preBodyComponents: PropTypes.array,\r\n  body: PropTypes.string,\r\n  postBodyComponents: PropTypes.array,\r\n}\r\n```\r\nDOM íŠ¸ë¦¬ê°€ êµ¬ì¶•ë˜ê¸° ì§ì „ì— localStorageë¥¼ ì°¸ì¡°í•˜ì—¬ ë¯¸ë¦¬ Themeì´ setting ë  ìˆ˜ ìˆë„ë¡ Scriptë¥¼ ì£¼ì…í–ˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ í•´ë‹¹ Dark mode flicker issueë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/9818ade3-3dbd-4eca-a24f-0eaf7c0f70a1/image.gif)\r\n\r\nì‹¤ì œ deployëœ element ì½”ë“œë¥¼ ë³´ë©´ script injectionì´ ì˜ ëìŒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/c6c1144e-5caa-490d-b842-7ee175488c7c/image.PNG)\r\n\r\n## ğŸ”® Utteranceì— ë‹¤í¬ëª¨ë“œ ì ìš©í•˜ê¸° \r\nì œ ê°œë°œ ë¸”ë¡œê·¸ì—ëŠ” ëŒ“ê¸€ ê¸°ëŠ¥ìœ¼ë¡œ `Utterance` ì˜¤í”ˆ ì†ŒìŠ¤ë¥¼ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. \r\n\r\nì´ë•Œ UtteranceëŠ” ë‹¤ë¥¸ ìš”ì†Œë“¤ê³¼ëŠ” ë‹¬ë¦¬, `Div` elementë¥¼ ì§ì ‘ ìƒì„±í•˜ê³  ê·¸ë¦¬ê³  `attributes`ì— repo ë“±ë“± ì†ì„±ì„ ì§€ì •í•˜ê³  ê·¸ë¦¬ê³  ê·¸ ì§€ì •í•œ ê°’ì— ëŒ€í•´ì„œ DOM íŠ¸ë¦¬ì— appendChild í•˜ì—¬ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ë‹¤í¬ëª¨ë“œ êµ¬í˜„ì— ëŒ€í•´ CSS Variableë¡œ ì–´ë–»ê²Œ ì§€ì •í•´ì•¼ ë˜ëŠ”ì§€ êµ¬ìƒì´ ì˜ ë– ì˜¤ë¥´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\r\n\r\nUtterance ìš”ì†ŒëŠ” `Div`ë¡œ ìƒì„±ë˜ì§€ ì•Šê³  `iframe`ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. \r\në”°ë¼ì„œ `iframe` íƒœê·¸ì— ì ‘ê·¼í•˜ì—¬ themeì„ ë°”ê¾¸ëŠ” ë¶€ë¶„ì„ `window.postMessage()`ë¡œ ì „ë‹¬í•˜ì—¬ ì ‘ê·¼í–ˆì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.\r\n\r\n> `window.postMessage()` ë©”ì†Œë“œëŠ” Window ì˜¤ë¸Œì íŠ¸ ì‚¬ì´ì—ì„œ ì•ˆì „í•˜ê²Œ cross-origin í†µì‹ ì„ í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì˜ˆì‹œë¡œ, í˜ì´ì§€ì™€ ìƒì„±ëœ íŒì—… ê°„ì˜ í†µì‹ ì´ë‚˜, í˜ì´ì§€ì™€ í˜ì´ì§€ ì•ˆì˜ iframe ê°„ì˜ í†µì‹ ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì¶œì²˜: [MDN](https://developer.mozilla.org/ko/docs/Web/API/Window))\r\n\r\nì œ í”„ë¡œì íŠ¸ì—ì„œ **ë‹¤í¬ëª¨ë“œì˜ ì „í™˜ ìœ ë¬´ì˜ í¬ì¸íŠ¸ëŠ” bodyì˜ className**ì…ë‹ˆë‹¤. lightëƒ darkëƒì— ë”°ë¼ì„œ DOM íŠ¸ë¦¬ê°€ êµ¬ì¶•ë ë•Œ, bodyì˜ classNameì— ë”°ë¼ ìœ ë™ì ìœ¼ë¡œ ë³€í™”í•  ìˆ˜ ìˆëŠ” ideaê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤. êµ¬ê¸€ë§ ê²°ê³¼, `MutationObserver` ë¼ëŠ” Constructorê°€ ì´ ê°œë…ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤. [ì°¸ê³ ](https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)\r\n\r\n```tsx\r\nuseEffect(() => {\r\n    const mutationObserver: MutationObserver = new MutationObserver(\r\n      mutationsList => {\r\n        mutationsList.forEach(mutation => {\r\n          if (mutation.attributeName === 'class') {\r\n            if (window.document.querySelector('.utterances-frame')) {\r\n              const theme = mutation.target.classList.contains('dark')\r\n                ? 'photon-dark'\r\n                : 'github-light'\r\n              const message = {\r\n                type: 'set-theme',\r\n                theme: theme,\r\n              }\r\n              const iframe =\r\n                window.document.querySelector('.utterances-frame')\r\n              iframe.contentWindow.postMessage(message, src)\r\n            }\r\n          }\r\n        })\r\n      },\r\n    )\r\n    mutationObserver.observe(document.body, { attributes: true })\r\n  }, [])\r\n```\r\nê°ì§€ëœ bodyì˜ classNameì— ë”°ë¼ ì‚¼í•­ì—°ì‚°ìë¡œ themeì„ í• ë‹¹ í›„, iframeì— postMessage()ë¡œ messageë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  `attributes`ì˜ ìƒíƒœê°’ì„ trueë¡œ ì§€ì •í•˜ì—¬, bodyì˜ classì˜ ë³€í™”ë¥¼ ê°ì§€í•  ìˆ˜ ìˆë„ë¡ ìˆ˜í–‰í•©ë‹ˆë‹¤. \r\në˜í•œ ì´ ì´ë²¤íŠ¸ë¥¼ mount ì‹œì ì— trigger ë  ìˆ˜ ìˆë„ë¡ `useEffect()` Hookë‚´ì— ì„ ì–¸í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” index(í™ˆ í™”ë©´)ì—ì„œ ë‹¤í¬ ëª¨ë“œë¡œ í† ê¸€ í›„, í¬ìŠ¤íŠ¸ë¥¼ í´ë¦­í•˜ì—¬ utterance themeì´ ë°”ë¡œ ì ìš©ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. \r\n\r\n### ê²°ê³¼ë¬¼\r\n![](https://velog.velcdn.com/images/damin1025/post/c7799ac4-2bbe-466e-95ca-d1c33a3a491e/image.gif)\r\n\r\níœ´ .. ê°œì¸ì ìœ¼ë¡œ ì–´ë ¤ì› ë˜ ë¶€ë¶„ ì¤‘ í•˜ë‚˜ì˜€ëŠ”ë° ì˜ ì‘ë™í•´ì„œ ì–´ì°Œë‚˜ í–‰ë³µí•˜ë˜ì§€ğŸ’™\r\n\r\n\r\n## ë§ˆë¬´ë¦¬ \r\nì‚¬ì‹¤ ì´ ê¸€ì„ ì“°ë©´ì„œ ì—¥ ì´ê²ƒë°–ì— ì•ˆëœë‹¤ê³ ? ìƒê°ì´ ë“¤ ì •ë„ë¡œ, ë‹¤í¬ëª¨ë“œ êµ¬í˜„ì€ ê½¤ë‚˜ ë³µì¡í•˜ê³  ê·¸ë¦¬ê³  ê¼¼ê¼¼í•¨ì„ ê¸°ìš¸ì´ëŠ” ì‘ì—…ì´ì—ˆìŠµë‹ˆë‹¤. ì•„ë¬´ë˜ë„ ì‚¬ìš©ì ê²½í—˜ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìš”ì†Œì´ê¸° ë•Œë¬¸ì— ë”ìš±ì´ ì‹ ê²½ì„ ì“¸ ìˆ˜ ë°–ì— ì—†ì—ˆë˜ ì‘ì—…ì´ì—ˆìŠµë‹ˆë‹¤.  \r\n\r\nì–´ë–¤ ê¸°ìˆ ì„ ì„ íƒí•´ì•¼ í• ì§€, ê·¸ë¦¬ê³  ì–´ë–¤ íƒœê·¸ì— ìƒ‰ìƒ ë³€í™”ê°€ í•„ìš”í•œì§€, ë˜í•œ ë Œë”ë§ ì´ìŠˆë„ handling í–ˆì–´ì•¼ í–ˆê³  ì •ë§.. ì˜¤ëœ ì‘ì—… ëì— ì–´ëŠì •ë„ êµ¬ìƒ‰ì„ ê°–ì¶˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.. (4ì›”ë§ë¶€í„° ì‹œì‘í–ˆìœ¼ë‹ˆ..) \r\n\r\nì €ë„ ì²˜ìŒìœ¼ë¡œ ì œëŒ€ë¡œ ê°ì¡ê³  ë§Œë“  ë‹¤í¬ëª¨ë“œë¼ ë¶€ì¡±í•œ ì ì´ ìˆì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ğŸ˜‚ í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤! \r\n\r\n### ğŸ™‡ğŸ¼â€â™€ï¸ ì°¸ê³  \r\n**-ë‹¤í¬ëª¨ë“œ CSS Variable ë° flicker Issue-**\r\n\r\nhttps://blog.maximeheckel.com/posts/switching-off-the-lights-part-2-fixing-dark-mode-flashing-on-servered-rendered-website/\r\n\r\nhttps://blog.rhostem.com/posts/2020-06-25-dark-mode-for-gatsby-website\r\n\r\nhttps://github.com/gaearon/overreacted.io/blob/master/src/html.js\r\n\r\n**-Utterance dark mode-**\r\n\r\nhttps://www.sungikchoi.com/blog/gatsby-dark-mode/\r\n\r\n**-MutationObserver-**\r\n\r\nhttps://mong-blog.tistory.com/entry/JS-DOM%EC%9D%84-%EA%B0%90%EC%8B%9C%ED%95%98%EB%8A%94-MutationObserver\r\n\r\nhttps://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\r\n\r\nhttps://developer.chrome.com/blog/detect-dom-changes-with-mutation-observers/\r\n\r\nhttps://stackoverflow.com/questions/31659567/performance-of-mutationobserver-to-detect-nodes-in-entire-dom\r\n"},{"id":"a6d41dee-de2d-5b58-b234-56017b6e5fb5","path":"/TIL/js-sync-async/","title":"JavaScript - ë™ê¸°ì™€ ë¹„ë™ê¸° ì²˜ë¦¬","body":"\r\n## ë™ê¸°ì™€ ë¹„ë™ê¸° (Synchronus , Asynchronus)\r\nì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„  ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ 2ê°€ì§€ ë™ì‘ ë°©ì‹ì¸ ë™ê¸°ì™€ ë¹„ë™ê¸°ì²˜ë¦¬ì— ëŒ€í•´ì„œ ë‹¤ë¤„\r\në³´ê² ìŠµë‹ˆë‹¤.\r\n\r\ní•¨ìˆ˜ 3ê°œë¥¼ í˜¸ì¶œí–ˆì„ë•Œë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\r\n\r\n```jsx\r\nfunction taskA() {\r\n  console.log('Task A');\r\n}\r\nfunction taskB() {\r\n  console.log('Task B');\r\n}\r\nfunction taskC() {\r\n  console.log('Task C');\r\n}\r\n\r\n//í•¨ìˆ˜ í˜¸ì¶œ \r\ntaskA();\r\ntaskB();\r\ntaskC();\r\n```\r\n\r\ní•¨ìˆ˜ 3ê°œë¥¼ í˜¸ì¶œ ì‹œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì—…ì„ í• ë‹¹í•©ë‹ˆë‹¤. ìˆœì„œëŒ€ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©° í•œê°œì˜ taskê°€ ëë‚ ë•Œê¹Œì§€ ë‹¤ìŒ taskëŠ” ë¼ì–´ë“¤ ìˆ˜ ì—†ëŠ” ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ë™ê¸°ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/a5298539-fe91-4a59-bd30-0f69822ad327/image.PNG)\r\n\r\n## ë™ê¸° ì²˜ë¦¬ì˜ ë¬¸ì œì  \r\n![](https://velog.velcdn.com/images/damin1025/post/fb33ffa5-fbc4-42e0-8d4a-966a84597e2c/image.PNG)\r\n\r\nğŸ¤” ì‘ì—… ì‹œê°„ì´ ê¸´ taskë¥¼ ì²˜ë¦¬í• ë•Œ ë¬¸ì œê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.í”„ë¡ íŠ¸ëŠ” ì†ë„ê°€ ìƒëª…ì´ì§€ ì•Šë‚˜â€¦? \r\n\r\n**ë©€í‹° ìŠ¤ë ˆë“œ**ë¡œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ ë˜ì§€ ì•Šë‚˜ìš”?\r\nâ‡’ OS ìƒ ìƒê°ì€ ok. í•˜ì§€ë§Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” **Single Thread**ë¡œ ë™ì‘í•©ë‹ˆë‹¤. \r\n\r\nê·¸ë˜ì„œ ë™ê¸°ì²˜ë¦¬ ëŒ€ì‹  **ë¹„ë™ê¸° ì²˜ë¦¬** ê°œë…ì´ í•„ìš”í•´ì§€ê²Œ ë©ë‹ˆë‹¤.\r\n\r\n## ë¹„ë™ê¸° ì²˜ë¦¬\r\n![](https://velog.velcdn.com/images/damin1025/post/57548644-48a6-4b56-8277-cb53ddac1f69/image.PNG)\r\n\r\nğŸ¤” ë…¼ ë¸”ë¡œí‚¹ ë°©ì‹ì´ë©´ ì‘ì—…ì´ ì–´ë–»ê²Œ ëë‚˜ê³  ì²˜ë¦¬ë˜ëŠ”ì§€.. ì¤‘êµ¬ë‚œë°© ì•„ë‹ê¹Œìš”?\r\nâ†’ **ì½œë°± í•¨ìˆ˜**ë¥¼ í™œìš©í•©ë‹ˆë‹¤. \r\n\r\nëŒ€í‘œì ì¸ ì½œë°± í•¨ìˆ˜ëŠ” `setTimeout()` ìœ¼ë¡œ, ì½”ë“œë¥¼ ë°”ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê³  ëª‡ì´ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‹¤ìŒ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆœì„œê°€ ì¤‘êµ¬ë‚œë°©ì¼ì§€ ì—¼ë ¤ë˜ëŠ” ë¶€ë¶„ì„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n```jsx\r\nfunction taskA() {\r\n\tsetTimeout(() => {\r\n\t\tconsole.log('A Task End');\r\n\t}, 2000); // ë‹¤ìŒ í•¨ìˆ˜ ì‹¤í–‰ê¹Œì§€ 2ì´ˆ ê¸°ë‹¤ë ¤ì¤Œ \r\n}\r\n\r\ntaskA();\r\nconsole.log('ì½”ë“œ ë');\r\n```\r\n---\r\n\r\nì‹¤í–‰ ê²°ê³¼\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/bd013054-c63e-45d6-aea2-2a94361d7326/image.gif)\r\n\r\n## JS Engine\r\nJS Engine ê¸°ë³¸ êµ¬ì„±\r\n<br/>\r\n-Heap : ë©”ëª¨ë¦¬ í• ë‹¹<br/>\r\n-**Call Stack** : ì½”ë“œ ì‹¤í–‰\r\n\r\n### Call Stack ë™ê¸° ì‘ë™ë°©ì‹\r\n\r\ní•­ìƒ Main contextê°€ ë¨¼ì € stackì— push ëŒ. ê·¸ë¦¬ê³  ì„ ì–¸í•œ í•¨ìˆ˜ ìˆœì„œëŒ€ë¡œ Call Stackì— pushë˜ê³ , ì‘ì—…ì´ ëë‚˜ë©´ popì´ ì´ë£¨ì–´ì§.\r\n\r\n### ë¹„ë™ê¸° ì‘ë™ ë°©ì‹\r\nì—¬ê¸°ì„œ `setTimeout()` ì€ ëŒ€í‘œì ì¸ **ë¹„ë™ê¸° í•¨ìˆ˜**ì¸ë°, ë§Œì•½ ë™ê¸°ì²˜ë¦¬ ë°©ì‹ ê·¸ëŒ€ë¡œ ì ìš©í•œë‹¤ë©´ call stackì— 3ì´ˆ ë¨¸ë¬¼ë €ë‹¤ê°€ ì½œë°±í•¨ìˆ˜ `cb`ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ëŠ”ë° ì´ì™€ ê°™ì´ ìˆ˜í–‰í•œë‹¤ë©´ ë™ê¸° ì²˜ë¦¬ ë°©ì‹ê³¼ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ì˜ ì°¨ì´ì ì´ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/359c37e2-d6df-4195-af7d-3cf8d7011385/image.PNG)\r\n\r\në”°ë¼ì„œ í•´ë‹¹ ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´, Web APIsì— 3ì´ˆë™ì•ˆ ê¸°ë‹¤ë¦¬ë©´ì„œ `asyncAdd()` í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ì„œ popë˜ë©´ì„œ ì¢…ë£Œë˜ê³ \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/18c5b0e0-04d0-4a46-8beb-b5106cdac240/image.PNG)\r\n\r\n\r\n3ì´ˆ ê¸°ë‹¤ë¦° `setTimeout()`ì€ ì œê±°ê°€ ë˜ë©´ì„œ ì½œë°±í•¨ìˆ˜ `cb`ë¥¼ ì½œë°± íì— pushí•©ë‹ˆë‹¤.\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/81ed6192-8b10-4789-ace7-ec3b9fc7b30e/image.PNG)\r\n\r\nEvent Loopì„ í†µí•´ cbí•¨ìˆ˜ëŠ” call stackë¡œ pushë©ë‹ˆë‹¤. \r\n\r\nì´ë•Œ Event LoopëŠ” Main Contextë¥¼ ì œì™¸í•œ ë‹¤ë¥¸ ì‹¤í–‰í•  í•¨ìˆ˜ë“¤ì´ Call stackì— ì¡´ì¬í•˜ëŠ”ì§€ ê³„ì†í•´ì„œ checkí•©ë‹ˆë‹¤. ë§Œì•½ ìˆ˜í–‰í•  í•¨ìˆ˜ê°€ ì½œë°±í•¨ìˆ˜ë°–ì— ì—†ë‹¤ë©´, ê·¸ì œì„œì•¼ ì½œë°±í•¨ìˆ˜ë¥¼ Call Stackì— pushí•˜ëŠ” ë°©ì‹ì¸ê±°ì£ . \r\n\r\nê·¸ë ‡ê²Œ ì½œë°±í•¨ìˆ˜ë¥¼ ìˆ˜í–‰í•˜ê³  pop í›„, Main Contextë„ ì œê±°ë˜ë©´ì„œ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œê°€ ë©ë‹ˆë‹¤. \r\n\r\n### ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ì˜ ë¬¸ì œì \r\n\r\nâ‡’ ë§Œì•½ ë¶ˆëŸ¬ì•¼ í•  ì½œë°±í•¨ìˆ˜ë¥¼ ë©”ì†Œë“œ ë‚´ì—ì„œ ê³„ì† ì„ ì–¸í•˜ê²Œ ëœë‹¤ë©´ **ì½œë°±ì§€ì˜¥**ì„ ì•¼ê¸°í•©ë‹ˆë‹¤. ì´ëŠ” ì´ì œ ES6+ ë¬¸ë²• ì¤‘ `Promise` ê°ì²´ ì™€ `async()-await()` ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."},{"id":"eb7f9757-da97-554a-98d0-a997dbd71b62","path":"/TIL/Redux-Toolkit/","title":"Redux Toolkitìœ¼ë¡œ React Native Todoì•± êµ¬ì¡° ì¡ì•„ë³´ê¸°","body":"## ğŸ” ë™ê¸°\r\në¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ê°€ì¥ ì±Œë¦°ì§€ í–ˆë˜ ë¶€ë¶„ì€ **stateê´€ë¦¬**ì˜€ìŠµë‹ˆë‹¤. \r\n\r\nê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” stateë¥¼ ê´€ë¦¬í•˜ê³  ìˆì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ íŒŒì¼ì´ ë°©ëŒ€í•´ì§€ê³  propsë¡œ ì „ë‹¬í•´ì•¼ ë˜ëŠ” ë¶€ë¶„ì´ ë§ì•„ì§€ê²Œ ë˜ë©´ state ê´€ë¦¬ê°€ ë³µì¡í•´ì ¸ì„œ êµ‰ì¥íˆ ì„¤ê³„ì— ì–´ë ¤ì›€ì„ ê²ªì—ˆë˜ ê²½í—˜ì´ ìˆì—ˆìŠµë‹ˆë‹¤.. ğŸ˜¥ \r\n\r\ní•˜ì§€ë§Œ ReduxëŠ” ì´ëŸ¬í•œ ë¶€ë¶„ì„ ì™„í™”ì‹œì¼œì¤„ ìˆ˜ ìˆëŠ” toolë¡œ, storeë¡œ ëª¨ë“  stateë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ React Nativeë¡œ ì§„í–‰í•˜ê³  ìˆëŠ” Todo Appì˜ data stateì˜ ê´€ë¦¬ë¥¼ `Redux Toolkit` ì„ í†µí•´ ë¡œì§ì„ êµ¬í˜„í•˜ê³ ì í•©ë‹ˆë‹¤.  \r\n\r\n## ğŸ›’ ìˆœì„œ\r\nì „ì²´ì ì¸ êµ¬ì¡°ëŠ” ì–´ë– í•œ ì´ë²¤íŠ¸ê°€ ë°œìƒ ì‹œ, í•´ë‹¹ Actionì„ Dispatcherì— ì „ë‹¬í•˜ì—¬ Reducer í•¨ìˆ˜ë“¤ì„ í†µí•´ í•´ë‹¹í•˜ëŠ” Actionì˜ stateë¥¼ raiseí•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  store ë‚´ë¶€ stateê°€ update ë˜ë©´ ê·¸ stateë¥¼ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ì—¬ ë¦¬ë Œë”ë§ì´ ì§„í–‰ë©ë‹ˆë‹¤. \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/441bb55f-8efc-4bb3-a07a-6040a8a059a7/image.png)\r\n\r\n\r\në‹¤ìŒ CLI ëª…ë ¹ì–´ë¡œ `Redux Toolkit`ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n```bash\r\nnpm install @reduxjs/toolkit react-redux\r\n```\r\n\r\n### 1. configureStoreë¥¼ ì‚¬ìš©í•˜ì—¬ Redux Store ìƒì„±\r\n```jsx\r\nimport { configureStore } from \"@reduxjs/toolkit\";\r\nimport todoReducer from './slices/todoSlice';\r\n\r\nexport const store = configureStore({\r\n    reducer:{\r\n        todo: todoReducer //ìƒì„±í•œ reducerë¥¼ Storeì— ë“±ë¡\r\n    }\r\n});\r\n```\r\n\r\n### 2. React ì»´í¬ë„ŒíŠ¸ì— Redux Store ì œê³µ ìˆœì„œ\r\nì œ í”„ë¡œì íŠ¸ì˜ `App` ì»´í¬ë„ŒíŠ¸ ì•„ë˜ ì»´í¬ë„ŒíŠ¸ì¸ `MainScreen` ì»´í¬ë„ŒíŠ¸ì— data ë° stateë¥¼ ê³µê¸‰í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ `Provider` ì»´í¬ë„ŒíŠ¸ì— `store`ë¥¼ propsë¡œ ì „ë‹¬í•´ì•¼í•©ë‹ˆë‹¤. \r\n\r\n```jsx\r\nimport { Provider } from 'react-redux';\r\nimport {store} from './redux/store';\r\nimport MainScreen from './screens/MainScreen';\r\n\r\nexport default function App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <MainScreen/>\r\n    </Provider>\r\n  );\r\n}\r\n```\r\n\r\nâš  ì´ë•Œ ìƒì„±í•œ storeëŠ” **ë‚´ì¥ ëª¨ë“ˆì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì—** `{ }` ë¡œ ê°ì‹¸ì„œ ëª¨ë“ˆì„ import í•˜ëŠ”ê²ƒì— ì£¼ì˜í•©ë‹ˆë‹¤.\r\n  \r\n\r\n### 3. createSliceë¡œ Redux slice reducer ìƒì„±\r\n`createSlice`ë¥¼ í™œìš©í•˜ì—¬ ìƒíƒœê´€ë¦¬ í•¨ìˆ˜ ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤. \r\nì œ í”„ë¡œì íŠ¸ì—ëŠ” add,update,deleteì— ê´€í•œ ìƒíƒœê´€ë¦¬í•¨ìˆ˜ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— `reducer`ë¡œ ì •ì˜í•©ë‹ˆë‹¤. \r\n\r\n```jsx\r\nconst todoSlice = createSlice({\r\n  name: \"todo\", \r\n  initialState: {\r\n        currentId: 4,\r\n        todos: [],\r\n    }, //ì´ˆê¸° state ì •ì˜\r\n  reducers: {\r\n    //state functions(add,delete,update ë¡œì§ êµ¬í˜„ ë¶€)\r\n  },\r\n});\r\nexport default todoSlice.reducer; \r\n```\r\n\r\n### 4. useSelector, useDispatchë¡œ ë°ì´í„° ì½ê³  state raiseí•˜ê¸°\r\n\r\n`useSelector`ë¡œ `store`ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì¤ë‹ˆë‹¤.\r\n`useDispatch`ë¡œ dispatchí•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¤ê³  í•„ìš”ì— ë”°ë¼ actionì„ dispatchí•©ë‹ˆë‹¤. (actionì„ dispatchí•œë‹¤ = eventë¥¼ triggerí•œë‹¤.)\r\n\r\ní•´ë‹¹ ë¶€ë¶„ì€ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\r\n\r\n## ğŸŒŒ ë¦¬ë“€ì„œ í•¨ìˆ˜ êµ¬ì²´í™”í•˜ê¸°\r\n`createSlice`ë¡œ Redux slice Reducerë¥¼ ìƒì„±í–ˆë‹¤ë©´ ê°ê°ì˜ ìƒíƒœê´€ë¦¬í•¨ìˆ˜ (add,update,delete)ì— ëŒ€í•´ì„œ êµ¬í˜„ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤. \r\n\r\n### 1. addTodo()\r\n![](https://velog.velcdn.com/images/damin1025/post/cfab0e3f-ee60-49c1-983f-a88b9cbec230/image.PNG)\r\n\r\ní˜„ì¬ stateì˜ í• ì¼ ë°°ì—´ê°’ì„ ë°›ì„ `todos`ì— ê°’ì„ pushí•´ì£¼ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n### 2. updateTodo()\r\n![](https://velog.velcdn.com/images/damin1025/post/8aa630c4-94c4-4ca9-a5e0-4fb4b7f5cc05/image.PNG)\r\n\r\nupdate(í• ì¼ ì¢…ë£Œ)í–ˆë‹¤ëŠ” indexë¥¼ ë”°ê¸° ìœ„í•´ì„œ `item` ë³€ìˆ˜ì— `findIndex()`ë¡œ ìƒíƒœê°€ ë³€í™”í•œ indexë¥¼ ë‹´ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‚¼í•­ì—°ì‚°ìë¥¼ í†µí•´ todo -> done ìœ¼ë¡œ stateë¥¼ ë°”ê¿”ì£¼ê³ , `todos` ë°°ì—´ì—ì„œ ì œê±°í•œ ê°’ì„ ë°°ì—´ì— pushí•©ë‹ˆë‹¤. \r\n\r\n\r\n### 3. deleteTodo()\r\n![](https://velog.velcdn.com/images/damin1025/post/0bc7ec31-156b-4bff-9360-865913c271e7/image.PNG)\r\n\r\n`x` ë²„íŠ¼ì„ ì‚­ì œí•˜ëŠ” ë¡œì§ì…ë‹ˆë‹¤. ì „ì²´ì ì¸ íë¦„ì€ `updateTodo()` ì™€ ë™ì¼í•©ë‹ˆë‹¤.\r\n\r\n\r\n### reducer í•¨ìˆ˜ export í•˜ê¸° \r\në§ˆì§€ë§‰ìœ¼ë¡œ í•´ë‹¹ reducerí•¨ìˆ˜ë“¤ì„ ì™¸ë¶€ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ exportí•˜ëŠ” ì‘ì—…ìœ¼ë¡œ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.\r\n```jsx\r\nexport const { addTodo, updateTodo, deleteTodo } = todoSlice.actions;\r\n```\r\n"},{"id":"70aed9e7-4c38-511c-9220-59edbfd69464","path":"/TIL/js-function/","title":"JavaScript - í•¨ìˆ˜","body":"### í•¨ìˆ˜\r\n\r\n-**í•¨ìˆ˜ ì„ ì–¸ì‹ vs í•¨ìˆ˜ í‘œí˜„ì‹ ì°¨ì´**\r\n\r\n```jsx\r\nconsole.log(helloDelcare()); // 'ì•ˆë…•í•˜ì„¸ìš” í•¨ìˆ˜ ì„ ì–¸ì‹ì…ë‹ˆë‹¤'\r\nconsole.log(hello); // error : 'hello is not a function'\r\n\r\nfunction helloDelcare() {\r\n\treturn 'ì•ˆë…•í•˜ì„¸ìš” í•¨ìˆ˜ ì„ ì–¸ì‹ì…ë‹ˆë‹¤'\r\n}\r\n\r\nlet hello = function helloRepresent() {\r\n\treturn 'ì•ˆë…•í•˜ì„¸ìš” í•¨ìˆ˜ í‘œí˜„ì‹ ì…ë‹ˆë‹¤.'\r\n}\r\n```\r\n\r\n1) í•¨ìˆ˜ ì„ ì–¸ì‹: **Hoisting**(ì‰½ê²Œ ë§í•˜ë©´ ë°‘ì—ì„œ ì„ ì–¸í•œ í•¨ìˆ˜ë¥¼ ì½”ë“œì˜ ìƒë‹¨ì—ì„œ í˜¸ì¶œí•´ë„ ì¶œë ¥ì´ ì´ë£¨ì–´ì§)ì´ ì¼ì–´ë‚˜ëŠ” ë°©ì‹ \r\n\r\n2) í•¨ìˆ˜ í‘œí˜„ì‹: **Hoisting**ì˜ ëŒ€ìƒì´ ë˜ì§€ ì•ŠìŒ â‡’ ì¦‰ `hello` ë³€ìˆ˜ë¥¼ í‘œí˜„í•˜ë©´ì„œ ë¶€í„° í•¨ìˆ˜ê°€ ìƒì„±ë˜ê¸° ë•Œë¬¸ì—, ìƒë‹¨ì—ì„œ helloë¥¼ logë¡œ ì°ìœ¼ë ¤ê³  í•˜ë©´ **ì—ëŸ¬**ê°€ ë°œìƒ.\r\nâ†’ ë”°ë¼ì„œ í•¨ìˆ˜ë¥¼ ë¨¼ì € ì„ ì–¸ í›„, í‘œí˜„ì‹ì— ì„ ì–¸ëœ ë³€ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ ì •ìƒì ìœ¼ë¡œ ê°’ì„ ì°ì„ ìˆ˜ ìˆë‹¤. \r\n\r\n**-arrow function (í•¨ìˆ˜ í‘œí˜„ì‹ì„ ê°„ë‹¨íˆ í‘œí˜„í•˜ëŠ” ë°©ë²•)**\r\n\r\n```jsx\r\nlet hello = () => {\r\n\treturn 'ì•ˆë…•í•˜ì„¸ìš”'\r\n}\r\n// '() =>' í‘œí˜„ê³¼ ë™ì¼í•œ ì˜ˆì•½ì–´ê°€ 'function í•¨ìˆ˜ëª…()' ì´ë¼ê³  ìƒê°í•˜ë©´ ëŒ \r\n```\r\n\r\ní™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ì‰½ê²Œ ìƒê°í•˜ë©´ í•¨ìˆ˜ í‘œí˜„ì‹ì—ì„œ keyword `function` **ë§Œ ì‚­ì œ**í•œ ë¬¸ë²•ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. (ì—­ì‹œ Hoistingì˜ ëŒ€ìƒì´ ì•„ë‹˜)\r\n\r\n>-ì½œë°±í•¨ìˆ˜\r\n```jsx\r\nfunction checkMood(mood) {\r\n\tif (mood === \"good\") {\r\n\t\t// ...\r\n\t\tsing()\r\n\t} else {\r\n\t\t// ...\r\n\t\tcry()\r\n\t}\r\n}\r\n\r\nfunction cry() {\r\n\tconsole.log('Action : CRY');\r\n}\r\n\r\nfunction sing() {\r\n\tconsole.log('Action : SING');\r\n}\r\n\r\nfunction dance() {\r\n\tconsole.log('Action: DANCE');\r\n}\r\n\r\ncheckMood(\"good\"); \r\n```\r\n\r\nê¸°ì¡´ ë™ì‘ ë°©ì‹\r\n\r\n1. `checkMood` í•¨ìˆ˜ê°€ goodì´ë¼ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬ ë°›ëŠ”ë‹¤.\r\n2. goodì´ë©´ `sing` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ console ë¡œê·¸ê°€ ì°íŒë‹¤.\r\n\r\n>**ì½œë°±í•¨ìˆ˜ì˜ ë“±ì¥ ë°°ê²½** \r\në§Œì•½ ì–´ë–¤ í•¨ìˆ˜ì—ì„œ íŠ¹ì • ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³  ì‹¶ì€ë°, ì¼ì¼ì´ bodyì•ˆì— ë©”ì†Œë“œë¥¼ ì„ ì–¸í•´ì¤˜ì•¼ í•œë‹¤ë©´.. ì½”ë“œ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë§¤ìš° ë–¨ì–´ì§„ë‹¤.  \r\në”°ë¼ì„œ ë§Œì•½ í•¨ìˆ˜(`checkMood`) íŒŒë¼ë¯¸í„°ì— í•¨ìˆ˜(`sing` , `cry` , `dance`)ë¥¼ ë„˜ê²¨ì£¼ë©´ ë§¤ê°œë³€ìˆ˜ë¡œëŠ” **í•¨ìˆ˜ì˜ í‘œí˜„ì‹** ì²˜ëŸ¼ ì‘ë™í•˜ê²Œ ë©ë‹ˆë‹¤. \r\n\r\n```jsx\r\nfunction checkMood(mood,goodCallback,badCallback) {\r\n\tif (mood === \"good\") {\r\n\t\t// ...\r\n\t\tgoodCallback()\r\n\t} else {\r\n\t\t// ...\r\n\t\tbadCallback()\r\n\t}\r\n}\r\n\r\nfunction cry() {\r\n\tconsole.log('Action : CRY');\r\n}\r\n\r\nfunction sing() {\r\n\tconsole.log('Action : SING');\r\n}\r\n\r\nfunction dance() {\r\n\tconsole.log('Action: DANCE');\r\n}\r\n\r\ncheckMood(\"good\",sing,cry); \r\n```\r\n\r\në‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•œ ì½”ë“œë¥¼ ì½œë°±í•¨ìˆ˜ë¼ê³  í•©ë‹ˆë‹¤. ì½œë°±í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°í•¨ìˆ˜ì—ì„œ ì¤‘ìš”í•œ ê°œë…ìœ¼ë¡œ ì“°ì…ë‹ˆë‹¤. "},{"id":"a041e359-fd49-504e-9a3b-28dfdba117e0","path":"/TIL/what-is-CORS/","title":"CORSì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì","body":"### Origin ì´ë€?\r\n\r\nì•„ë˜ì™€ ê°™ì´ ì‚¬ì´íŠ¸ë“¤ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. \r\n\r\n```bash\r\nhttp://localhost:8000\r\nhttps://api.alazierplace.com:3000/api/\r\nhttps://alazierplace.com/2019/05/data-driven-testing-how-we-went-from-150-test-cases-to-1/\r\n```\r\n\r\nscheme(http,https) + IP ì£¼ì†Œ ë˜ëŠ” ë„ë©”ì¸ + :í¬íŠ¸ë„˜ë²„ â‡’ í•´ë‹¹ êµ¬ì„±ì„ Origin ì´ë¼ê³  ì¹­í•©ë‹ˆë‹¤. \r\n\r\nJSì˜ Script íŒŒì¼ì´ HTTPì— API ìš”ì²­ì„ í• ë•Œ, ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— Origin ì •ë³´ë¥¼ í—¤ë”ì— ì €ì¥í•©ë‹ˆë‹¤. \r\n\r\n### CORS ì´ìŠˆê°€ ì¤‘ìš”í•œ ì´ìœ \r\n\r\nOriginì´ ë‹¤ë¥¸ í—¤ë”ê°’ì„ ê³„ì†í•´ì„œ ìš”ì²­í•˜ê²Œ ë˜ë©´, ì•…ì˜ì ì¸ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¸í•´ ë³´ì•ˆì„±ì´ ì·¨ì•½í•´ì§€ê³ , ìœ ì €ì™€ ì‚¬ì´íŠ¸ì— í•´ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\níŠ¹íˆ `same-orign policy` ëŠ” í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ë” ì¤‘ìš”í•˜ê²Œ ë‹¤ë¤„ì§€ëŠ” ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— ë”ìš±ì´ CORSë¥¼ ë”°ì ¸ì¤˜ì•¼ í•©ë‹ˆë‹¤. (*`same-origin-policy` : ì—†ëŠ” ë„ë©”ì¸ ê°’ ë˜ëŠ” í¬íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” í–‰ìœ„) \r\n\r\n### CORSë€?\r\n\r\nCross-Origin Resource Sharingì˜ ì•½ìë¡œ, W3Cê°€ ì œì•ˆí•œ ì›¹ í‘œì¤€ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ originê°’ì„ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ê°€ëŠ¥ì¼€ í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤.\r\n\r\n![Request/Response cycle for a CORS Request](https://i0.wp.com/alazierplace.com/wp-content/uploads/2019/06/CORS-flow.png?resize=833%2C406&ssl=1)\r\n\r\nRequest/Response cycle for a CORS Request\r\n\r\n**<ì‹¤í–‰ ìˆœì„œ>**\r\n\r\n- JS í´ë¼ì´ì–¸íŠ¸ê°€ AJAX callì„ ì‹œì‘í•¨\r\n- ë¸Œë¼ìš°ì €ê°€ (ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê¸°ì „ì—) requestë¥¼ interceptí•˜ì—¬ `pre-flight` ìš”ì²­ì„ ë³´ëƒ„\r\n- ì„œë²„ëŠ” `pre-flight` ì— ëŒ€í•œ responseì— CORS configurationì„ ë‹´ì€ HTTP í—¤ë”ë¥¼ ë¸Œë¼ìš°ì €ì— ë³´ëƒ„\r\n- CORSê°€ verifyë˜ë©´ ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ê°€ requestí•œ ê°’ì„ ì„œë²„ì— ë³´ë‚´ê²Œ ëŒ\r\n- ì„œë²„ëŠ” ìš”ì²­í•œ responseê°’ì„ JS Clientì— ë³´ë‚´ì¤Œ\r\n\r\n******************pre-flight request?****************** \r\n\r\n- HTML ì˜µì…˜ì„ request í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì´ì— ëŒ€í•œ responseë¡œëŠ” CORS configuration(êµ¬ì„± íŒŒì¼)ì„ ëª…ì‹œí•˜ëŠ” HTTP í—¤ë”\r\n- í•œë²ˆë§Œ ë³´ë‚´ì§€ê³ , ë¸Œë¼ìš°ì €ì— ì˜í•œ ìºì‹±ì´ ì²˜ë¦¬ëœë‹¤.\r\n- ë§¤ë²ˆ CORS requestê°€ ë³´ë‚´ì§€ëŠ”ê±´ ì•„ë‹ˆê³  ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì— ë¶€í•©í• ë•Œ ë³´ë‚´ì§„ë‹¤.\r\n    - `HEAD`, `POST`, `GET` ì´ì™¸ì˜ HTTP ë©”ì†Œë“œë¥¼ request í• ë•Œ\r\n    - Content-type requestì— application/x-www-form-urlencoded, multipart/form-data ë° text/plain ì´ì™¸ì˜ ê°’ì´ ìˆì„ë•Œ\r\n    - ìš”ì²­ì´ Accept, Accept-Language ë° Content-Language ì´ì™¸ì˜ í—¤ë”ë¥¼ ì„¤ì •í• ë•Œ\r\n\r\n### ê·¸ë˜ì„œ ì™œ ì´ë ‡ê²Œê¹Œì§€ CORSë¥¼ ë”°ì ¸ì•¼ í• ê¹Œ?\r\n\r\nJavaScriptëŠ” ëŒì•„ê°ˆ ìˆ˜ ìˆëŠ” ì‹¤í–‰í™˜ê²½ì´ ë‹¤ì–‘í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. \r\n\r\níŠ¹íˆ JavaScript ê°™ì€ ê²½ìš°ëŠ”, ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë¸Œë¼ìš°ì €ì˜ í˜•íƒœë¡œ ì‚¬ìš©ìì—ê²Œ ì œê³µë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì›¹ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë°”ì¼ ì›¹ì—ì„œë„ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì‹¤í–‰í™˜ê²½ ì—­ì‹œ ë‹¤ì–‘í•´ì§‘ë‹ˆë‹¤. \r\n\r\në¸Œë¼ìš°ì €ëŠ” ë¡œê·¸ì¸ ì •ë³´, ì¿ í‚¤, ì„¸ì…˜ë“± ë¯¼ê°í•œ ì •ë³´ë“¤ì„ ë‹´ê³  ìˆê³  ì´ì— ëŒ€í•œ ì² ì €í•œ ê·œì œê°€ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤. \r\n\r\në¹„ìœ í•´ì„œ ë§í•˜ë©´.. ì´ìƒí•œ ì‚¬ëŒì´ ë§›ìˆëŠ”ê±° ì‚¬ì¤€ë‹¤ê³  í•´ë„ ì«“ì•„ê°€ë©´ ì•ˆëœë‹¤ ë¥¼ í‘œí˜„í•œ ê°œë…ì´ CORSë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. JavaScript í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ì— ëŒ€í•œ ë¹¡ì„¼ ê·œì •ì´ í•„ìš”í•˜ì£ ."},{"id":"272d2bb7-2ca7-5a97-8444-57d04952b875","path":"/TIL/what-is-gatsby/","title":"Gatsbyë€?","body":"### Gatsbyì— ëŒ€í•´ ì„¤ëª…í•˜ê¸° ì „ì—..\r\n[Gatsby](https://www.gatsbyjs.com/)ëŠ” React ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ëœ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ì´ë•Œ Gatsbyë¥¼ ì•Œê¸°ì „ì— **JAM Stack**ì´ë¼ëŠ” ìš©ì–´ì— ëŒ€í•´ì„œ ì•Œì•„ì•¼ í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. \r\n\r\në¸”ë¡œê·¸ë‚˜ í¬íŠ¸í´ë¦¬ì˜¤ì™€ ê°™ì´ **ì •ì  í˜ì´ì§€**ë¥¼ ê°œë°œí•´ì•¼ í•  ë•Œì— í™œìš©ë©ë‹ˆë‹¤. ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ê¸°ì¸ Gatsbyë¥¼ ì‹œì‘í•˜ê¸° ì „ì— <span style=\"color:red\">JAM Stack</span>ì— ëŒ€í•´ ë¨¼ì € ì•Œì•„ë´…ì‹œë‹¤. \r\n\r\n\r\n### JAM Stackì´ë€?\r\n\r\nJAM Stackì€ ë” ë¹ ë¥´ê³ , ì•ˆì „í•˜ë©°, ìŠ¤ì¼€ì¼ë§í•˜ê¸° ì‰¬ìš´ ì›¹ì„ ë§Œë“¤ê¸° ìœ„í•´ ë””ìì¸ëœ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤. \r\n\r\nì¦‰ JAM Stackì€ JavaScript, API, MarkUp Stackì˜ ì•½ìë¡œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ API, HTMLì´ë‚˜ CSS ë“±ì„ ì¹­í•˜ëŠ” MarkUpìœ¼ë¡œ ì´ë£¨ì–´ì§„ ì›¹ êµ¬ì„± ë°©ë²•ì…ë‹ˆë‹¤.\r\n\r\nì´ë¦„ì— ìˆëŠ” ê·¸ëŒ€ë¡œ ì € 3ê°€ì§€ì˜ ê¸°ìˆ ì„ í†µí•´ í™ˆí˜ì´ì§€ë¥¼ ë§Œë“ ë‹¤ëŠ” ê²ƒì¸ë°, ê·¸ëŸ¼ ê¸°ì¡´ ì›¹ ì‚¬ì´íŠ¸ì™€ëŠ” ì–´ë–¤ ì°¨ì´ì ì´ ìˆì„ê¹Œìš”?\r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/0b81fb8f-ec23-40fc-bc72-93a1a3a4af89/image.png)\r\n\r\n\r\nê¸°ì¡´ ì›¹ ì‚¬ì´íŠ¸ì˜ ë°©ì‹ì€ ëŒ€ë¶€ë¶„ ì„œë²„ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” CMS(Content Management System)ë¡œë¶€í„° ì¶”ì¶œí•œ ë°ì´í„°ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì— ë¿Œë ¤ì£¼ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ëŠ” í´ë¼ì´ì–¸íŠ¸ì— ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ì„œ ë§ì€ ì ˆì°¨ë¥¼ ê±°ì³ì•¼ë§Œ í•˜ê¸° ë•Œë¬¸ì— êµ¬ì¡°ê°€ ë³µì¡í•©ë‹ˆë‹¤.\r\n\r\ní•˜ì§€ë§Œ JAM Stackì„ ì‚¬ìš©í•œ ë°©ì‹ì€ ê¸°ì¡´ ì›¹ì‚¬ì´íŠ¸ì˜ ë°©ì‹ê³¼ ë‹¤ë¥´ê²Œ ì ˆì°¨ê°€ ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤.\r\n\r\nê°ì¢… ë§ˆí¬ì—… ìš”ì†Œì™€ ë‹¤ì–‘í•œ APIë¥¼ í†µí•´ ë§Œë“  ì •ì  ì›¹ì‚¬ì´íŠ¸ë¥¼ **Pre-Render**í•œ ê²ƒì„ CDN(Content Delivery Network)ì„ í†µí•´ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê¸°ì¡´ ë°©ì‹ì— ë¹„í•´ **ë” ë¹ ë¥´ê²Œ** ì›¹ ì‚¬ì´íŠ¸ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê±°ì£ . \r\n\r\n#### 1. ê¸°ì¡´ ë°©ì‹ì— ë¹„í•´ ë” ë¹ ë¥´ê²Œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\nêµ¬ì²´ì ìœ¼ë¡œëŠ” JAM Stackì€ ë Œë”ë§í•  í™”ë©´ë“¤ì„ ëª¨ë‘ Pre-Renderí•˜ì—¬ ì œê³µë˜ì–´ ê·¸ë§Œí¼ ì‚¬ìš©ìì—ê²Œ í™”ë©´ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì¤€ë¹„í•˜ëŠ” ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\nì´ì— ë”ë¶ˆì–´ì„œ ë¸Œë¼ìš°ì €ì—ì„œ ì²« ì‘ë‹µì„ ë°›ê¸°ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ì¸ TTFB(Time to First Byte)ë¥¼ ìµœì†Œí™”í•˜ëŠ” ë°ì—ëŠ” ë¯¸ë¦¬ ë¹Œë“œ ëœ íŒŒì¼ì„ CDNì„ í†µí•´ ì œê³µí•˜ëŠ” ê²ƒë³´ë‹¤ ë‚˜ì€ ë°©ë²•ì´ ì—†ë‹¤ê³  í•©ë‹ˆë‹¤.\r\n\r\n#### 2. ì•ˆì „í•œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\nJAM Stackì€ APIë¥¼ í†µí•´ ì •ì  ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\r\n\r\nì—¬ê¸°ì„œ ì‚¬ìš©ë˜ëŠ” APIëŠ” JAM Stackì„ í™œìš©í•œ ê° í”„ë ˆì„ì›Œí¬ì—ì„œì˜ **ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤**ë¡œì„œ, ì‚¬ì´íŠ¸ ìƒì„±ì„ ìœ„í•œ í”„ë¡œì„¸ìŠ¤ê°€ ì¶”ìƒí™”ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê·¸ë§Œí¼ ê³µê²© ë…¸ì¶œ ë²”ìœ„ê°€ ê°ì†Œí•˜ê²Œ ë©ë‹ˆë‹¤.\r\n\r\në”°ë¼ì„œ ê°œë°œìëŠ” ì›¹ ê°œë°œ ì¤‘ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì·¨ì•½ì ì— ëŒ€í•´ ë³´ë‹¤ ëœ ì‹ ê²½ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\n#### 3. ìŠ¤ì¼€ì¼ë§í•˜ê¸° ì‰¬ìš´ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\nì •ì  ì›¹ì‚¬ì´íŠ¸ì—ì„œì˜ ìŠ¤ì¼€ì¼ë§ì´ë€, ë” ë§ì€ ì§€ì—­ì—ì„œ í™ˆí˜ì´ì§€ë¥¼ ì œê³µí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ë¯¸ë¦¬ ë¹Œë“œ ëœ íŒŒì¼ ì œê³µì„ ë‹´ë‹¹í•˜ëŠ” CDNì´ ê·¸ ì—­í• ì„ ì¶©ë¶„íˆ ìˆ˜í–‰í•´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\n\r\n### Gatsby VS Next.js\r\n\r\nGatsbyì™€ í•¨ê»˜ í•­ìƒ ì–¸ê¸‰ë˜ëŠ” JAM Stack ê¸°ë°˜ í”„ë ˆì„ì›Œí¬ì¸ Next.jsì™€ ë¹„êµë¥¼ ë˜ ë¹¼ë†“ì„ ìˆ˜ê°€ ì—†ì£ . ë‘˜ ëª¨ë‘ React ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\r\n\r\nê·¸ëŸ¼ ì´ì¯¤ì—ì„œ í•œë²ˆì¯¤ì€ ëª¨ë‘ ê³ ë¯¼ì„ í•  ê²ƒì…ë‹ˆë‹¤. \r\n\r\n>ğŸ¤·ğŸ¼â€â™€ï¸ Next.jsê°€ ëŒ€ì„¸ë¼ëŠ”ë°? í˜„ì¬ 1ë“±ì„ ë‹¬ë¦¬ê³  ìˆëŠ” í”„ë ˆì„ì›Œí¬ë¼ëŠ”ë°.. \r\n\r\ní•­ìƒ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ìˆ˜í–‰í•˜ë©´ì„œ ë”œë ˆë§ˆì¸ ë¶€ë¶„ì¸ê²ƒ ê°™ìŠµë‹ˆë‹¤. íŠ¸ë Œë“œë¥¼ ì«“ëŠ”ë‹¤ëŠ”ê²ƒ..í•˜ì§€ë§Œ ê° í”„ë ˆì„ì›Œí¬ë§ˆë‹¤ ëª¨ë‘ ì¥ë‹¨ì ì´ ìˆê³ , ëª©ì ì— ë§ê²Œ ì˜ í™œìš©í•˜ëŠ”ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.\r\n\r\nGatsbyì™€ Next.js ì—­ì‹œ ë‘ í”„ë ˆì„ì›Œí¬ì˜ ì‚¬ìš© ìš©ë„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.\r\n\r\n`Next.js`ëŠ” ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ì˜ ê¸°ëŠ¥ë„ ìˆì§€ë§Œ ì£¼ë¡œ **SSR**ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ `Gatsby`ëŠ” **ì„œë²„ ì—†ì´**, ì˜¤ë¡œì§€ ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\r\n\r\nê·¸ë˜ì„œ `Next.js`ëŠ” ì£¼ë¡œ ê¸°ì—…ë‹¨ìœ„ì˜ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— í™œìš©ì´ ë˜ê³ , `Gatsby`ëŠ” ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ë‚˜ ê¸°ìˆ  ë¸”ë¡œê·¸ ê°œë°œì— í™œìš©ì´ ë©ë‹ˆë‹¤. (ì €ëŠ” ì €ë§Œì˜ ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ ì˜ˆì •ì´ê¸°ì— `Gatsby`ë¥¼ í™œìš©í• ê²ƒì…ë‹ˆë‹¤.)\r\n\r\n"},{"id":"2d63d8d1-10f5-5ee4-8eba-a7a378c5337b","path":"/TIL/Redux-useDispatch/","title":"Redux Toolkit - useDispatchë¡œ state rasieí•˜ê¸°","body":"## stateë¥¼ useDispatchë¡œ ë³´ë‚´ê¸° \r\n\r\nì´ì „ í¬ìŠ¤íŒ…ì—ì„œ Redux toolkitìœ¼ë¡œ storeë¥¼ ì…‹íŒ…ì„ í–ˆë‹¤ë©´, ì‹¤ì œë¡œ ì´ì œ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ìˆ˜í–‰í•  ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ importí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. \r\n\r\n\r\n## ìˆœì„œ\r\n**1. ì»´í¬ë„ŒíŠ¸ì— ì•Œë§ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ importí•˜ê¸°**\r\n\r\ní•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œ todoList Appì˜ í•µì‹¬ì ì¸ ê¸°ëŠ¥ì¸ **í• ì¼ì„ ì¶”ê°€** í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— ì•Œë§ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ import í•´ë³´ê² ìŠµë‹ˆë‹¤. \r\n\r\nreducer slice ì— `addTodo()` ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ êµ¬í˜„í–ˆìœ¼ë¯€ë¡œ, í•´ë‹¹ í•¨ìˆ˜ë¥¼ import í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. \r\n\r\n```jsx\r\nimport { addTodo } from '../redux/slices/todoSlice';\r\n```\r\n\r\n`slices` ì— ë¦¬ë“€ì„œ í•¨ìˆ˜ë“¤ì„ exportí–ˆê¸° ë•Œë¬¸ì— importê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\r\n\r\n#### **2. stateë¥¼ raiseí•˜ê¸° í•˜ê¸°** \r\n\r\në¶€ëª¨ ì»´í¬ë„ŒíŠ¸ storeì—ì„œ ëª¨ë“  stateë¥¼ ë°”ê¾¸ê¸° ë•Œë¬¸ì— stateë¥¼ ë°”ê¾¼ë‹¤ëŠ” ì „ë‹¬í•˜ëŠ” ë§¤ê°œì²´ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´ ë§¤ê°œì²´ëŠ” `useDispatch()` í›…ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n```jsx\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// ì»´í¬ë„ŒíŠ¸ ë‚´ì— ì‘ì„±í•©ë‹ˆë‹¤. \r\nconst dispatch = useDispatch(); \r\n```\r\n`useDispatch()` ë¥¼ importí•©ë‹ˆë‹¤. \r\n\r\n![](https://velog.velcdn.com/images/damin1025/post/a1626d25-39a9-448f-a5fb-6a20d073bf99/image.PNG)\r\n\r\nê·¸ë¦¬ê³  `dispatch` í•¨ìˆ˜ ë‚´ë¶€ì— ìœ„ì—ì„œ importí•œ ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ triggerí•©ë‹ˆë‹¤. ì´ì™€ ê°™ì€ processë¡œ ë¦¬ë“€ì„œ í•¨ìˆ˜ë¡œ stateë¥¼ raiseí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. "},{"id":"d778771d-6091-5bd9-a7c1-c0cca0fc513e","path":"/TIL/ìë°”ìŠ¤í¬ë¦½íŠ¸-ë¹„ë™ê¸°í•¨ìˆ˜/","title":"Promise ê°ì²´, async-await í•¨ìˆ˜ë¥¼ í™œìš©í•œ ë¹„ë™ê¸° ì²˜ë¦¬","body":"## Promise ê°ì²´\r\n\r\në™ê¸°: ì½œë°± ì§€ì˜¥ì—ì„œ íƒˆì¶œí•˜ê¸°\r\n\r\n**ë¹„ë™ê¸° ì‘ì—…ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” 3ê°€ì§€ ìƒíƒœ**\r\n\r\n![https://joshua1988.github.io/images/posts/web/javascript/promise.svg](https://joshua1988.github.io/images/posts/web/javascript/promise.svg)\r\n- Pending: ëŒ€ê¸°ìƒíƒœ (ì„±ê³µ or ì‹¤íŒ¨)\r\n- Fulfilled: ì„±ê³µ (Pending ìƒíƒœì—ì„œ resolve ëë‹¤)\r\n- Rejected: ì‹¤íŒ¨ (Pending ìƒíƒœì—ì„œ rejecet ëë‹¤)\r\n\r\n\r\n#### Promise ê°ì²´ë¥¼ í™œìš©í•œ ë¹„ë™ê¸° êµ¬ë¬¸\r\n```jsx\r\n// ê¸°ì¡´ ë¹„ë™ê¸° ì²˜ë¦¬ \r\nfunction isPositive(number,resolve,reject) {\r\n\tsetTimeout(()=> {\r\n\t\tif(typeof number === 'number') {\r\n\t\t\t//resolve\r\n\t\t\tresolve(number >=0 ? \"ì–‘ìˆ˜\" : \"ìŒìˆ˜\");\r\n\t\t} else {\r\n\t\t\treject(\"ì£¼ì–´ì§„ ê°’ì´ ìˆ«ìí˜•ì´ ì•„ë‹™ë‹ˆë‹¤\");\r\n\t\t},2000);\r\n}\r\n\r\n// Promise ê°ì²´ë¥¼ ë°˜í™˜í•˜ì—¬ êµ¬í˜„í•œ ë¹„ë™ê¸° ì½”ë“œ\r\nfunction isPositiveP(number) {\r\n\t//ì‹¤í–‰ì \r\n\treturn new Promise(resolve,reject) => {\r\n\t\tsetTimeout(()=> {\r\n\t\t\tif(typeof number === 'number') {\r\n\t\t\t\tresolve(number >=0 ? \"ì–‘ìˆ˜\" : \"ìŒìˆ˜\");\r\n\t\t\t} else {\r\n\t\t\t\treject(\"ì£¼ì–´ì§„ ê°’ì´ ìˆ«ìí˜•ì´ ì•„ë‹™ë‹ˆë‹¤\");\r\n\t\t\t},2000);\r\n\t};\r\n}\r\n\r\nconst res = isPostiveP(101); //101\r\n\r\nres\r\n\t.then((res) => { \r\n\t\tconsole.log(\"ì‘ì—… ì„±ê³µ: \",res);\r\n\t}).catch((err)=>{\r\n\t\t\tconsole.log(\"ì‘ì—…ì—ëŸ¬\")\r\n\t}); \r\n```\r\n\r\n`then` ê³¼ `catch` êµ¬ë¬¸ì„ í™œìš©í•˜ì—¬ Fulfilled ìƒíƒœì¸ì§€ Rejected ìƒíƒœì¸ì§€ ì²˜ë¦¬ ê²°ê³¼ê°’ì„ ë°˜í™˜ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n\r\n\r\n\r\n## ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ ì—°ê²°í•˜ê¸° (Promise Chaining)\r\n\r\ní”„ë¡œë¯¸ìŠ¤ì˜ ë˜ ë‹¤ë¥¸ íŠ¹ì§•ì€ **ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì—°ê²°**í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì• ì˜ˆì œì—ì„œÂ `then()`Â ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  ë‚˜ë©´ ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ê°€ ë°˜í™˜ë©ë‹ˆë‹¤. \r\n\r\n```jsx\r\nfunction getData() {\r\n  return new Promise({\r\n    // ...\r\n  });\r\n}\r\n\r\n// then() ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì—°ê²°í•œ í˜•ì‹\r\ngetData()\r\n  .then(function(data) {\r\n    // ...\r\n  })\r\n  .then(function() {\r\n    // ...\r\n  })\r\n  .then(function() {\r\n    // ...\r\n  });\r\n```\r\n\r\n## async- await : ì§ê´€ì ì¸ ë¹„ë™ê¸° ì²˜ë¦¬ ì½”ë“œ ì‘ì„±\r\n```jsx\r\n// async ì˜ˆì œ\r\nasync function helloAsync() {\r\n\treturn 'hello async';\r\n} \r\n```\r\n\r\n`helloAsync()` í•¨ìˆ˜ ì½˜ì†”ì„ ì°ìœ¼ë©´ **Promise ê°ì²´**ë¥¼ ë°˜í™˜í•˜ëŠ”ë° ì´ëŠ” `async` í•¨ìˆ˜ì˜ íŠ¹ì§• ì¤‘, Promise ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” íŠ¹ì§• ë•Œë¬¸ì…ë‹ˆë‹¤.\r\n\r\nì´ë•Œ ë‹¤ìŒ ì½”ë“œë¥¼ ì¶œë ¥í•´ë³´ë©´ â€˜hello asyncâ€™ê°€ ì •ìƒì ìœ¼ë¡œ ì½˜ì†”ì— ì¶œë ¥ë©ë‹ˆë‹¤. ì´ëŠ” `res` ì½œë°±í•¨ìˆ˜ê°€ `helloAsync`í•¨ìˆ˜ì˜ returnì„ ë°”ë¼ë´¤ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \r\n```jsx\r\nhelloAsync.then((res) => {\r\n\tconsole.log(res);\r\n});\r\n```\r\n\r\n```jsx\r\n// await ì˜ˆì œ\r\nfunction delay(ms) {\r\n\treturn new Promise(resolve) => {\r\n\t\tsetTimeout((resolve,ms);\r\n\t});\r\n}\r\n\r\nasync function helloAsync() {\r\n\treturn delay(3000).then(()=> {\r\n\t\treturn 'hello async';\r\n\t});\r\n} \r\n```\r\n\r\nìœ„ í•¨ìˆ˜ë¥¼ **async-await êµ¬ë¬¸**ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\r\n```jsx\r\nasync function helloAsync() {\r\n\tawait delay(3000);\r\n\treturn 'hello async';\r\n} \r\n\r\nasync function main() {\r\n\tconst res = await helloAsync();\r\n\tconsole.log(res);\r\n} \r\nmain(); // 3ì´ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ 'hello async' ë°˜í™˜\r\n```\r\n\r\nì´ë•Œ `await` í•¨ìˆ˜ëŠ” ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì—, awaitì— ì„ ì–¸ëœ êµ¬ë¬¸ì„ ë¨¼ì € ìˆ˜í–‰ì„ í•´ì•¼ returní•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì´ë‹¤. \r\n\r\n#### async-await êµ¬ë¬¸ ì •ë¦¬\r\n```jsx\r\nasync function í•¨ìˆ˜ëª…() {\r\n  await ë¹„ë™ê¸°_ì²˜ë¦¬_ë©”ì„œë“œ_ëª…();\r\n}\r\n```\r\n\r\n## API í˜¸ì¶œ\r\nAPI : í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ (request and response)\r\n\r\n\r\n\r\n```jsx\r\n// <JSON placeholderë¥¼ í™œìš©í•œ API í˜¸ì¶œ ë©”ì†Œë“œ ì˜ˆì œ>\r\nlet response = fetch('Json Placeholder URL...').then((res) => \r\n\tconsole.log(res)\r\n);\r\n```\r\n\r\nì´ë•Œ `fetch()` í•¨ìˆ˜ì— hoverì‹œ, `Promise<Response>` ë¡œ Promise ê°ì²´ë¥¼ ë°˜í™˜í•¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ `fetch()` í•¨ìˆ˜ëŠ” **ë¹„ë™ê¸° í•¨ìˆ˜** ì„ì„ ì˜ë¯¸í•˜ê³ , `then` í‚¤ì›Œë“œë„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\nì´ë¥¼ ì´ì œ async-await í•¨ìˆ˜ë¥¼ í†µí•´ ë¦¬íŒ©í† ë§ ì‹œ, ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\r\n\r\n```jsx\r\nasync functiong getData() {\r\n\tlet rawResponse = await fetch('Json URL');\r\n\tlet jsonResponse = await rawResponse.json();\r\n\tconsole.log(jsonResponse);\r\n}\r\ngetData(); // ê°ì²´ ë°°ì—´ ë°˜í™˜ \r\n```"}]}