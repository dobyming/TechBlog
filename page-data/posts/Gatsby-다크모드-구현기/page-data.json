{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/Gatsby-다크모드-구현기/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>우선 글을 시작하기 전에.. 5월 24일 부로 블로그 개발을 시작한지 1달 넘은 시점에서 100개의 commit을 달성했습니다..🥳</p>\n<div style=\"text-align:center\"><img src=\"https://velog.velcdn.com/images/damin1025/post/0e0117f4-e670-4a3c-a849-c5eadf34c786/image.PNG\"></div>\n<p>저에게 이 <code class=\"language-text\">개발 블로그</code> 프로젝트는 <strong>프론트엔드가 뭔지 제대로 보여준</strong> 프로젝트나 다름 없어서 배운게 정말 많은 고마운 프로젝트입니다. 만약 프론트엔드를 내 커리어패스로 밟고 싶다고 한다면 자신만의 블로그 만드는 것을 적극 추천할 정도로 배울게 정말 많고 좋은 프로젝트라고 생각합니다.</p>\n<p>사족은 여기서 마무리 짓고.. 다크모드를 구현하면서 겪은 제 삽질기를 나열해보겠습니다 🤪…</p>\n<h2 id=\"동기\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0\" aria-label=\"동기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동기</h2>\n<p>이 프로젝트를 처음 구상하고 그리고 기능들을 하나씩 만들어 나갈때 세운 목표 중 하나가 다크모드는 꼭 만들어야지..! 생각했습니다. 특히 프론트엔드에서 이제 없으면 허전할 정도라고 볼 수 있는 <strong>다크모드🌗</strong> 기능을 Gatsby와 어느정도 친해지면 제대로 파야겠다 생각했고 때가 온 것이었습니다.</p>\n<p>일전에 React를 배우기 위해서 <a href=\"https://github.com/dobyming/Emotionary\" target=\"_blank\" rel=\"nofollow\">Emotionary</a> 프로젝트를 진행 중, <code class=\"language-text\">Provider</code> 개념을 활용하여 최상위 컴포넌트에서 <code class=\"language-text\">theme</code> props를 전달하여 다크모드를 구현했던 경험이 있었고, Gatsby에서도 이런 개념을 활용하면 되려나? 생각으로부터 시작하며 구현에 Dive 했습니다.</p>\n<h2 id=\"theme을-어떻게-전달할-것인가--themeprovider-vs-css-variable\" style=\"position:relative;\"><a href=\"#theme%EC%9D%84-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%A0%84%EB%8B%AC%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80--themeprovider-vs-css-variable\" aria-label=\"theme을 어떻게 전달할 것인가  themeprovider vs css variable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Theme을 어떻게 전달할 것인가 : ThemeProvider VS CSS Variable</h2>\n<p>대략적인 Mock Up은 이렇게 구상했었습니다.</p>\n<blockquote>\n<p>토글 버튼이 있음(component) -> 클릭 값(state)에 따라 어떤 theme을 보여줄지 결정할 것. (boolean 속성으로 true면 dark, false면 light)</p>\n</blockquote>\n<p>그리고 이때 <code class=\"language-text\">theme</code>을 어떻게 전달할 것인가? 이게 관건이었습니다.</p>\n<h3 id=\"-emotion의-themeprovider로-삽질\" style=\"position:relative;\"><a href=\"#-emotion%EC%9D%98-themeprovider%EB%A1%9C-%EC%82%BD%EC%A7%88\" aria-label=\" emotion의 themeprovider로 삽질 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 emotion의 ThemeProvider로 삽질</h3>\n<p><del>오래전에 수행한 삽질이라 기억이 약간 가물하네요…ㅠ</del></p>\n<p>기존에 <code class=\"language-text\">Provider</code>를 활용하여 구현해 본 경험이 있었기 때문에 마침 <code class=\"language-text\">emotion</code>에서 <code class=\"language-text\">ThemeProvider</code> Theme package를 지원하고 있었고 저 역시 이걸로 구현해야겠다 생각하며 코드 구현에 진행했지만, … build는 커녕 develop 단계에서부터 error를 만나게 되어 머리를 싸맸습니다.</p>\n<h3 id=\"-css-variable로-광명을-찾다\" style=\"position:relative;\"><a href=\"#-css-variable%EB%A1%9C-%EA%B4%91%EB%AA%85%EC%9D%84-%EC%B0%BE%EB%8B%A4\" aria-label=\" css variable로 광명을 찾다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🥰 CSS Variable로 광명을 찾다</h3>\n<p>‘토글 버튼의 클릭 값에 따라 어떤 theme을 보여줄 지..’ 이 문장에서 CSS Variable과 엮을 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// trigger theme change refer localStorage's key-value</span>\r\n <span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userTheme <span class=\"token operator\">===</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span>\r\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token function\">setIsDark</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\r\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span>\r\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token function\">setIsDark</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span>\r\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>userTheme<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>여기서 <code class=\"language-text\">userTheme</code>이 현재 state이고, 그 state가 <code class=\"language-text\">dark</code>라면 <code class=\"language-text\">body</code> 태그의 className을 <code class=\"language-text\">dark</code>라고 지정하고, 그 반대면 <code class=\"language-text\">light</code>로 지정합니다.</p>\n<p>그러면 이 <code class=\"language-text\">body</code> 태그의 className에 따라서 CSS Variable로 지정할 수 있었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/*theme.css*/</span>\r\n\r\n<span class=\"token selector\">.light</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">--color-background</span><span class=\"token punctuation\">:</span>#f6f6f6<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token selector\">.dark</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">--color-background</span><span class=\"token punctuation\">:</span> #25262c<span class=\"token punctuation\">;</span>\r\n    <span class=\"token property\">--color-text</span><span class=\"token punctuation\">:</span> #f6f6f6<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-background<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> 0.2s<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token selector\">h1,\r\nh2,\r\nh3,\r\nh4,\r\nh5,\r\nhr,\r\na,\r\np,\r\nli,\r\ntd,\r\ntr,\r\nfooter,\r\nspan</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">theme.css</code> 파일에 위와 같이 정의할 수 있습니다. 상단에는 body의 className에 따라서 어떤 css 속성 값을 부여할 지 rgb 값을 정의합니다. 그리고 <strong>원하는 태그에 원하는 CSS Variable</strong>을 지정할 수 있습니다. 이런 로직으로 수행하면 전체적으로 개발 블로그에 다크모드가 적용됨을 볼 수 있습니다.</p>\n<p>그리고 실제로 Provider를 활용해 다크모드를 구현하는 것보단, CSS Variable을 활용하여 구현한 것이 <strong>성능적인</strong> 측면에서도 더 좋은 지표를 보여줬습니다.\r\n<a href=\"https://github.com/dobyming/dobyming.github.io/pull/11\" target=\"_blank\" rel=\"nofollow\">Dark Mode Theme PR</a> 해당 링크로 가시면 제가 왜 CSS Variable을 선택하여 구현에 진행했는지 자세한 지표와 설명을 볼 수 있습니다.</p>\n<blockquote>\n<p>+) 추가로 SVG Icon에 다크모드를 어떻게 적용해야 할 지 막막한 분들께 간략한 코드를 보여드리고자 합니다. (사실 내가 바보여서 헷갈려했음..)</p>\n</blockquote>\n<p>우선 SVG 같은 경우에는 색상이 담길 수 있도록 <code class=\"language-text\">fill</code>과 <code class=\"language-text\">stroke</code> 속성을 지정 해야합니다. <code class=\"language-text\">fill</code>은 채워지는 색이고 <code class=\"language-text\">stroke</code>는 테두리색입니다. 그러므로 <code class=\"language-text\">.svg</code> 파일에서 <strong><code class=\"language-text\">path</code> 태그 내에 fill과 stroke 속성을 current</strong>로 지정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"svg\"><pre class=\"language-svg\"><code class=\"language-svg\">// 예시 svg\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30px<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>30px<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 24 24<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>current<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>current<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill-rule</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>evenodd<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">clip-rule</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>evenodd<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000000<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>그럼 색상을 지정하고자 하는 SVG Icon에 className을 부여한 후, 자신이 정의한 theme css 파일에 마찬가지로 CSS Variable로 지정하면 끝입니다!</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.githubIcon path</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token property\">fill</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"flicker-issue-에러-해결하기\" style=\"position:relative;\"><a href=\"#flicker-issue-%EC%97%90%EB%9F%AC-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"flicker issue 에러 해결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flicker Issue 에러 해결하기</h2>\n<p>다크 모드 구현에 대한 틀을 잡았다는 기쁨도 잠시, 페이지를 reload 시  분명 이런 깜빡임 현상을 겪을 것입니다…</p>\n<p><img src=\"https://velog.velcdn.com/images/damin1025/post/58ff2ef6-95a9-4fea-b04d-3520fb34a879/image.gif\" alt=\"\"></p>\n<p>못봤다구요? 저도 그냥 잠시 일시적으로 아주 잠깐 이러는거 아닐까..? ㅎㅎ 했는데 아니더라구요 😣 아주 유명한 <span style=\"color:red\"><strong>Flicker Issue</strong></span> 였습니다.</p>\n<blockquote>\n<p>The problem is that the HTML is generated long before it reaches the user’s device, so there’s no way to know which color theme the user prefers. <a href=\"https://www.joshwcomeau.com/css/css-variables-for-react-devs/#dark-mode-flash-fix\" target=\"_blank\" rel=\"nofollow\">참고</a></p>\n</blockquote>\n<p>해당 Issue가 발생한 원인으로는, Gatsby가 HTML 파일을 빌드하는 <code class=\"language-text\">Pre-Render</code> 특성과 밀접한 관련이 있습니다. 비록 localStorage로 사용자가 설정한 theme을 저장한다고 해도, <strong>reload 시 localStorage를 참조하는건 Pre-Render 시점이 아닌 그 이후 시점에 참조</strong>하기 때문에 이런 현상이 발생하게 됩니다.</p>\n<p>즉 이 문제를 해결하기 위해서는, localStorage를 참조하는 시점을 DOM 트리가 구축되기 이전에 Script 파일을 강제로 Injection하는 부분의 코드 작업이 필요했습니다. 그리고 Gatsby에서는 <strong><code class=\"language-text\">html.js</code> 파일을 통해 Script 파일을 inject 할 수 있도록 customize</strong>를 허용합니다.</p>\n<blockquote>\n<p>💖 <a href=\"https://www.gatsbyjs.com/docs/custom-html/\" target=\"_blank\" rel=\"nofollow\">Gatsby html.js customize</a> docs에 <code class=\"language-text\">html.js</code> 파일을 생성하는 부분에 대해 자세한 설명이 있으므로 꼭 docs를 읽으시고 진행하시길!!</p>\n</blockquote>\n<p>그럼 <code class=\"language-text\">html.js</code> 파일이 생성됐고, 저는 아래와 같이 customize를 진행했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// html.js</span>\r\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n<span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HTML</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n      <span class=\"token operator\">&lt;</span>html <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>htmlAttributes<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>meta charSet<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>meta httpEquiv<span class=\"token operator\">=</span><span class=\"token string\">\"x-ua-compatible\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"ie=edge\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>meta\r\n            name<span class=\"token operator\">=</span><span class=\"token string\">\"viewport\"</span>\r\n            content<span class=\"token operator\">=</span><span class=\"token string\">\"width=device-width, initial-scale=1, shrink-to-fit=no\"</span>\r\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>headComponents<span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span>body <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>bodyAttributes<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"light\"</span><span class=\"token operator\">></span>\r\n          <span class=\"token operator\">&lt;</span>script\r\n            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\r\n              <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\r\n\t\t\t// Customize 할 부분\r\n              (function () {\r\n                try {\r\n                  var mode = localStorage.getItem('color-theme');\r\n                  if (!mode) return;\r\n                  document.body.classList.add(mode);\r\n                } catch (e) {}\r\n              })();\r\n            </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>preBodyComponents<span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">&lt;</span>div\r\n            key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">body</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\r\n            id<span class=\"token operator\">=</span><span class=\"token string\">\"___gatsby\"</span>\r\n            dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>body <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n          <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>postBodyComponents<span class=\"token punctuation\">}</span>\r\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token constant\">HTML</span><span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">htmlAttributes</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">headComponents</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">bodyAttributes</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">preBodyComponents</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">postBodyComponents</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>DOM 트리가 구축되기 직전에 localStorage를 참조하여 미리 Theme이 setting 될 수 있도록 Script를 주입했습니다. 아래와 같이 해당 Dark mode flicker issue를 해결할 수 있었습니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/damin1025/post/9818ade3-3dbd-4eca-a24f-0eaf7c0f70a1/image.gif\" alt=\"\"></p>\n<p>실제 deploy된 element 코드를 보면 script injection이 잘 됐음을 볼 수 있습니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/damin1025/post/c6c1144e-5caa-490d-b842-7ee175488c7c/image.PNG\" alt=\"\"></p>\n<h2 id=\"-utterance에-다크모드-적용하기\" style=\"position:relative;\"><a href=\"#-utterance%EC%97%90-%EB%8B%A4%ED%81%AC%EB%AA%A8%EB%93%9C-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\" utterance에 다크모드 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔮 Utterance에 다크모드 적용하기</h2>\n<p>제 개발 블로그에는 댓글 기능으로 <code class=\"language-text\">Utterance</code> 오픈 소스를 활용하고 있습니다.</p>\n<p>이때 Utterance는 다른 요소들과는 달리, <code class=\"language-text\">Div</code> element를 직접 생성하고 그리고 <code class=\"language-text\">attributes</code>에 repo 등등 속성을 지정하고 그리고 그 지정한 값에 대해서 DOM 트리에 appendChild 하여 생성되기 때문에 다크모드 구현에 대해 CSS Variable로 어떻게 지정해야 되는지 구상이 잘 떠오르지 않았습니다.</p>\n<p>Utterance 요소는 <code class=\"language-text\">Div</code>로 생성되지 않고 <code class=\"language-text\">iframe</code>으로 생성됩니다.\r\n따라서 <code class=\"language-text\">iframe</code> 태그에 접근하여 theme을 바꾸는 부분을 <code class=\"language-text\">window.postMessage()</code>로 전달하여 접근했어야 했습니다.</p>\n<blockquote>\n<p><code class=\"language-text\">window.postMessage()</code> 메소드는 Window 오브젝트 사이에서 안전하게 cross-origin 통신을 할 수 있게 합니다. 예시로, 페이지와 생성된 팝업 간의 통신이나, 페이지와 페이지 안의 iframe 간의 통신에 사용할 수 있습니다. (출처: <a href=\"https://developer.mozilla.org/ko/docs/Web/API/Window\" target=\"_blank\" rel=\"nofollow\">MDN</a>)</p>\n</blockquote>\n<p>제 프로젝트에서 <strong>다크모드의 전환 유무의 포인트는 body의 className</strong>입니다. light냐 dark냐에 따라서 DOM 트리가 구축될때, body의 className에 따라 유동적으로 변화할 수 있는 idea가 필요했습니다. 구글링 결과, <code class=\"language-text\">MutationObserver</code> 라는 Constructor가 이 개념을 활용할 수 있다고 판단했습니다. <a href=\"https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\" target=\"_blank\" rel=\"nofollow\">참고</a></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> mutationObserver<span class=\"token operator\">:</span> MutationObserver <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MutationObserver</span><span class=\"token punctuation\">(</span>\r\n      mutationsList <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        mutationsList<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>mutation <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mutation<span class=\"token punctuation\">.</span>attributeName <span class=\"token operator\">===</span> <span class=\"token string\">'class'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.utterances-frame'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> mutation<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token operator\">?</span> <span class=\"token string\">'photon-dark'</span>\r\n                <span class=\"token operator\">:</span> <span class=\"token string\">'github-light'</span>\r\n              <span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n                type<span class=\"token operator\">:</span> <span class=\"token string\">'set-theme'</span><span class=\"token punctuation\">,</span>\r\n                theme<span class=\"token operator\">:</span> theme<span class=\"token punctuation\">,</span>\r\n              <span class=\"token punctuation\">}</span>\r\n              <span class=\"token keyword\">const</span> iframe <span class=\"token operator\">=</span>\r\n                window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.utterances-frame'</span><span class=\"token punctuation\">)</span>\r\n              iframe<span class=\"token punctuation\">.</span>contentWindow<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> src<span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">}</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">)</span>\r\n    mutationObserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> attributes<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>감지된 body의 className에 따라 삼항연산자로 theme을 할당 후, iframe에 postMessage()로 message를 전달합니다. 그리고 <code class=\"language-text\">attributes</code>의 상태값을 true로 지정하여, body의 class의 변화를 감지할 수 있도록 수행합니다.\r\n또한 이 이벤트를 mount 시점에 trigger 될 수 있도록 <code class=\"language-text\">useEffect()</code> Hook내에 선언했습니다. 이는 index(홈 화면)에서 다크 모드로 토글 후, 포스트를 클릭하여 utterance theme이 바로 적용될 수 있도록 하기 위함입니다.</p>\n<h3 id=\"결과물\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC%EB%AC%BC\" aria-label=\"결과물 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과물</h3>\n<p><img src=\"https://velog.velcdn.com/images/damin1025/post/c7799ac4-2bbe-466e-95ca-d1c33a3a491e/image.gif\" alt=\"\"></p>\n<p>휴 .. 개인적으로 어려웠던 부분 중 하나였는데 잘 작동해서 어찌나 행복하던지💙</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>사실 이 글을 쓰면서 엥 이것밖에 안된다고? 생각이 들 정도로, 다크모드 구현은 꽤나 복잡하고 그리고 꼼꼼함을 기울이는 작업이었습니다. 아무래도 사용자 경험에 큰 영향을 미치는 요소이기 때문에 더욱이 신경을 쓸 수 밖에 없었던 작업이었습니다.</p>\n<p>어떤 기술을 선택해야 할지, 그리고 어떤 태그에 색상 변화가 필요한지, 또한 렌더링 이슈도 handling 했어야 했고 정말.. 오랜 작업 끝에 어느정도 구색을 갖춘것 같습니다.. (4월말부터 시작했으니..)</p>\n<p>저도 처음으로 제대로 각잡고 만든 다크모드라 부족한 점이 있을 수도 있습니다😂 피드백은 언제나 환영입니다!</p>\n<h3 id=\"️-참고\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%B0%B8%EA%B3%A0\" aria-label=\"️ 참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🙇🏼‍♀️ 참고</h3>\n<p><strong>-다크모드 CSS Variable 및 flicker Issue-</strong></p>\n<p><a href=\"https://blog.maximeheckel.com/posts/switching-off-the-lights-part-2-fixing-dark-mode-flashing-on-servered-rendered-website/\" target=\"_blank\" rel=\"nofollow\">https://blog.maximeheckel.com/posts/switching-off-the-lights-part-2-fixing-dark-mode-flashing-on-servered-rendered-website/</a></p>\n<p><a href=\"https://blog.rhostem.com/posts/2020-06-25-dark-mode-for-gatsby-website\" target=\"_blank\" rel=\"nofollow\">https://blog.rhostem.com/posts/2020-06-25-dark-mode-for-gatsby-website</a></p>\n<p><a href=\"https://github.com/gaearon/overreacted.io/blob/master/src/html.js\" target=\"_blank\" rel=\"nofollow\">https://github.com/gaearon/overreacted.io/blob/master/src/html.js</a></p>\n<p><strong>-Utterance dark mode-</strong></p>\n<p><a href=\"https://www.sungikchoi.com/blog/gatsby-dark-mode/\" target=\"_blank\" rel=\"nofollow\">https://www.sungikchoi.com/blog/gatsby-dark-mode/</a></p>\n<p><strong>-MutationObserver-</strong></p>\n<p><a href=\"https://mong-blog.tistory.com/entry/JS-DOM%EC%9D%84-%EA%B0%90%EC%8B%9C%ED%95%98%EB%8A%94-MutationObserver\" target=\"_blank\" rel=\"nofollow\">https://mong-blog.tistory.com/entry/JS-DOM%EC%9D%84-%EA%B0%90%EC%8B%9C%ED%95%98%EB%8A%94-MutationObserver</a></p>\n<p><a href=\"https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\" target=\"_blank\" rel=\"nofollow\">https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/</a></p>\n<p><a href=\"https://developer.chrome.com/blog/detect-dom-changes-with-mutation-observers/\" target=\"_blank\" rel=\"nofollow\">https://developer.chrome.com/blog/detect-dom-changes-with-mutation-observers/</a></p>\n<p><a href=\"https://stackoverflow.com/questions/31659567/performance-of-mutationobserver-to-detect-nodes-in-entire-dom\" target=\"_blank\" rel=\"nofollow\">https://stackoverflow.com/questions/31659567/performance-of-mutationobserver-to-detect-nodes-in-entire-dom</a></p>","headings":[{"depth":2,"value":"동기"},{"depth":2,"value":"Theme을 어떻게 전달할 것인가 : ThemeProvider VS CSS Variable"},{"depth":3,"value":"🤔 emotion의 ThemeProvider로 삽질"},{"depth":3,"value":"🥰 CSS Variable로 광명을 찾다"},{"depth":2,"value":"Flicker Issue 에러 해결하기"},{"depth":2,"value":"🔮 Utterance에 다크모드 적용하기"},{"depth":3,"value":"결과물"},{"depth":2,"value":"마무리"},{"depth":3,"value":"🙇🏼‍♀️ 참고"}],"frontmatter":{"title":"Gatsby 블로그 - 다크모드 구현기🌗","summary":"어리바리 응애 FE 개발자의 다크모드 구현 삽질기 - 어디서부터 어떻게 해야될지 감을 못잡겠다면🥴","date":"2023.05.24.","categories":["Web","Gatsby"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUEBgcJ/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgT/2gAMAwEAAhADEAAAAevkXeWNDrY/Jx//xAAdEAACAgEFAAAAAAAAAAAAAAACBAEFBgADBxMX/9oACAEBAAEFAh5ATnKPUsR6aq3r7tSFFRZ0ABtx/8QAGxEAAgIDAQAAAAAAAAAAAAAAAQIREhBBUWH/2gAIAQMBAT8Bcoa0UpCgNLWltt5PMf/EAB0RAAICAgMBAAAAAAAAAAAAAAEDAhEEEgAUISL/2gAIAQIBAT8ByJ48yvrpkgRTCLBJhZu4Xu0EgaiXnwPBViroc//EACUQAAMBAAEDAgcBAAAAAAAAAAECAwQRBRITFCEABhAkMTI0Qv/aAAgBAQAGPwLT8tP0vqa+njsqOoiLUjU4J6aaESKIaNx6Swn4zWlGfL2y+4HZWj6di0zwve8Bg0aDNY28IX1eQaOmVOh/5XhurG36rXvIUjd0y50ZDSshUw0QBpFvHZQumUXPioGlQheFslJE+SdFV9i5s666IJ01CMxpeY44m9wvkZBwOFLFRwPb2+nbNFRe534RQo76OaUbgf6ejM7n8s7FjySfj//EABkQAQEBAQEBAAAAAAAAAAAAAAERACEQQf/aAAgBAQABPyEjLEp4QJKiIJgcahYFuOLisO8zbbmtGtSJvbXOKdedB8/cQjxSjIZ1SIMXanWf/9oADAMBAAIAAwAAABAgD//EABcRAQEBAQAAAAAAAAAAAAAAAAERIQD/2gAIAQMBAT8QfjBiI7JQjGMJSWHf/8QAGBEBAAMBAAAAAAAAAAAAAAAAARARITH/2gAIAQIBAT8QZ3Jzl6iWmkgMf//EABgQAQEAAwAAAAAAAAAAAAAAAAEAEDGB/9oACAEBAAE/EFOLxCvRNqYKNnjKSiOytuICJmn100DgI1PLXTpXSj4MZMA/AHvsNU2l/9k="},"images":{"fallback":{"src":"/static/0e6a2859511bc04abeba878c5508a73f/f77da/gatsby.webp","srcSet":"/static/0e6a2859511bc04abeba878c5508a73f/dd2c8/gatsby.webp 375w,\n/static/0e6a2859511bc04abeba878c5508a73f/c5e11/gatsby.webp 750w,\n/static/0e6a2859511bc04abeba878c5508a73f/f77da/gatsby.webp 1500w","sizes":"(min-width: 1500px) 1500px, 100vw"},"sources":[]},"width":1500,"height":1000}},"publicURL":"/static/0e6a2859511bc04abeba878c5508a73f/gatsby.jpg"}}}}]}},"pageContext":{"slug":"/posts/Gatsby-다크모드-구현기/","prev":{"node":{"fields":{"slug":"/posts/Gatsby-Trouble-Shooting/"},"headings":[{"depth":2,"value":"#418 #423 Minified Error"},{"depth":3,"value":"해결"},{"depth":2,"value":"SVG Icon Flicker Issue"},{"depth":3,"value":"useEffect와 useLayoutEffect 적절히 사용하기"},{"depth":4,"value":"useEffect"},{"depth":4,"value":"useLayoutEffect"},{"depth":3,"value":"gatsby-plugin-offline 활용하기"},{"depth":3,"value":"결과물"},{"depth":2,"value":"Ongoing.."},{"depth":3,"value":"+) 23.05.29 LightHouse 점수 💯"},{"depth":3,"value":"🙇🏼‍♀️참고"}]}},"next":{"node":{"fields":{"slug":"/posts/Gatsby-TOC-구현하기/"},"headings":[{"depth":2,"value":"💭 동기"},{"depth":2,"value":"결과"},{"depth":2,"value":"header를 어떻게 갖고 올것인가?"},{"depth":2,"value":"Value를 어떻게 slug화 할것인가?"},{"depth":2,"value":"Data 흐름은?"},{"depth":2,"value":"TOC 컴포넌트 Styling"},{"depth":2,"value":"Scroll시 각 header에 맞게 Active 기능 부여하기"},{"depth":2,"value":"header에 맞는 href로 이동하기"},{"depth":3,"value":"🪓 Issue Handle"},{"depth":2,"value":"🔮 후기"}]}}}},"staticQueryHashes":["1463137677"],"slicesMap":{}}